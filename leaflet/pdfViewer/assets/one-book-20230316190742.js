"use strict";define("one-book/app",["exports","ember","one-book/resolver","ember-load-initializers","one-book/config/environment"],function(e,t,n,i,o){t.default.MODEL_FACTORY_INJECTIONS=!0,window.App=t.default.Application.extend({modulePrefix:o.default.modulePrefix,podModulePrefix:o.default.podModulePrefix,Resolver:n.default}),(0,i.default)(App,o.default.modulePrefix),e.default=App}),define("one-book/components/page-main",["exports","ember"],function(e,t){e.default=t.default.Component.extend({didRender:function(){function e(){App.PdfUtilController.cleanPhraseMatch(!0),1==App.pdfInfo.get("compatibleFlg")&&(App.PdfUtilController.clearCanvasRect(),App.PdfUtilController.showCanvasFlg=!1,App.PdfUtilController.keywordsArr=[],App.PdfUtilController.keywordsArr.length=0,App.PdfUtilController.rectArr=[],App.PdfUtilController.rectArr.length=0,App.PdfUtilController.clearRectFlg=!0),$("#search_dialog").hide(),$("#acti-search-content-view").html(""),$("#sidebar_search_input").val(""),App.pdfInfo.set("searchValueArr",t.default.A()),App.searchViewerController.set("searchValueArr",t.default.A()),$("#acti_search_resultNum_div").text(""),$("#acti_search_value").text(""),$("#acti-sidebar-search-content-title div").hide(),App.searchViewerController.cleanupQueue()}this._super.apply(this,arguments);var n=parseInt(App.pdfInfo.get("totalPageNo")),i=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);App.PublicUtilController.setButtonShowOrHideByPorts(),App.TurnUtilController.initBook(),$("#toolbar_pageCount_span").text(App.pdfInfo.get("totalPageNo")),App.pdfInfo.get("callAppUrl")&&$("div.contentinfo_app > a").on("click",function(){var e=App.pdfInfo.get("callAppUrl");try{if(e){for(var t=window,n=0;n<5;n++){if($("body",t.document).hasClass("topPage")){t.location.href=e;break}t=t.parent}window.open(e)}}catch(e){}}),$("#index_main.phone > div.pack_book_div").css("z-index",n+10),$("div.audioLink").css("z-index",n+5200),$("#sidebar_main, #toolbar_main, #toolbar_main > div, #sidebar_main > div, #acti-header-container, #acti-mobile-toc-content, #acti-mobile-menu-button, #acti-mobile-search-content, #acti-mobile-hamburger-content, #acti-mobile-share-content, #acti-mobile-painter-content, #acti-mobile-memo-content").css("z-index",n+5300),$("div.memo-create-title-box").css("z-index",n+5300),$("div.tooltips_left, div.tooltips_top").css("z-index",n+5400),$("#load_pdf_progress").css("z-index",n+5450),$("div.covering_layer").css("z-index",n+5500),$.isTouch&&function(){var e=App.pdfInfo.get("pageHammerObject"),t=App.pdfInfo.get("compatibleFlg");e.get("pinch").set({enable:!0}),e.on("pinch",function(e){e.preventDefault();var n=e.scale-(window.pinch_scale||1),i=App.pdfInfo.get("currentZoomScale"),o=App.pdfInfo.get("zoomScale_max");if(!e.additionalEvent||1===i&&n<0||i===o&&n>0)return!1;i+=n>0?n:1.5*n,i<1?i=1:i>o&&(i=o),App.PdfUtilController.pdfViewZoomFun(e,i,!0),"1"==t&&App.PdfUtilController.changeCanvasRect(),window.pinch_scale=e.scale}),e.on("pinchend",function(e){e.preventDefault();var n=App.pdfInfo.get("currentZoomScale");App.PdfUtilController.pdfViewZoomFun(e,n),"1"==t&&App.PdfUtilController.changeCanvasRect(),window.pinch_scale=0})}();var o=App.pdfInfo.get("searchValueArr");if(o&&o.length){var a=App.pdfInfo.get("compatibleFlg");if($("#sidebar_search_input").val(o.join(" ")),$(".searchType .radio").find("input#orRadio").attr("checked",!0),"1"==a){App.PdfUtilController.orSearchType=!0,device.mobile()||device.tablet()||i?($(".acti-mobile-menu-button").trigger("click"),$("#sidebar_search_input").trigger("openSearchContent"),$("#sidebar_clean_button").removeClass("disabled")):device.desktop();var l=parseInt(App.pdfInfo.get("totalPageNo"));$("#search_dialog").css({"z-index":Number(l+5250),display:"block"}),App.PdfUtilController.showCanvasFlg=!0,App.PdfUtilController.searchFromXml(),App.PdfUtilController.highlightSearchResult()}else $("#sidebar_search_input").trigger("openSearchContent"),$("#sidebar_clean_button").removeClass("disabled"),App.pdfInfo.set("isMatchByPage",!1),App.searchViewerController.pdfSearching()}else setTimeout(function(){$(".searchType .radio").find("input#andRadio").trigger("click")},100);$(document).on("loadedPdfSearch","#sidebar_search_input",function(e){document.all&&window.event;$(this).blur(),App.CommonUtilController.gotoTop_parent();var t=App.pdfInfo.get("isMatchByPage");"boolean"==typeof t?App.pdfInfo.set("isMatchByPage",t):App.pdfInfo.set("isMatchByPage",!0);var n=App.TurnUtilController.getCurrentPagenos();$.each(n,function(){App.PdfUtilController.calcFindPhraseMatch(this)}),App.searchViewerController.pdfSearching(),$("#sidebar_clean_button").removeClass("disabled")}),$(".searchType .radio").find("input").on("click",function(){$(this).parent("label").siblings("label").find("input").removeAttr("checked")&&$(this).attr("checked","checked");var t=$.trim($("#sidebar_search_input").val());e();var n=App.pdfInfo.get("compatibleFlg");$(".searchType #andRadio").attr("checked")?"1"==n?App.PdfUtilController.orSearchType=!1:App.pdfInfo.set("isMatchByPage",!0):"1"==n?App.PdfUtilController.orSearchType=!0:App.pdfInfo.set("isMatchByPage",!1),$("#sidebar_search_input").val(t),device.mobile()||device.tablet()||i?$("#sidebar_search_input").trigger("clickSearch"):device.desktop()&&$("#sidebar_search_input").trigger("clickSearch")}),$.getScript("assets/js/pdf/build/pdf-20230316190742.js",function(){$.getScript("assets/js/pdf/build/ui_utils-20230316190742.js",function(){App.PdfMainController.loadPageLoadObj()})});var r=new UAParser(window.navigator.userAgent).getBrowser(),s=(r.name||"").toLowerCase(),c=App.pdfInfo.get("compatibleFlg");$("#book_main").length>0&&"chrome"==s?$("#book_main")[0].addEventListener("mousewheel",function(e){e.preventDefault();var t=null;if(e.wheelDelta?t=e.wheelDelta:e.detail&&(t=e.detail),!t)return!1;var n=App.pdfInfo.get("currentZoomScale"),i=App.pdfInfo.get("zoomScale_max");return!(1===n&&t<0||n===i&&t>0)&&(t>0?n+=.2:n-=.2,n<1?n=1:n>i&&(n=i),App.PdfUtilController.pdfViewZoomFun(e,n),"1"==c&&App.PdfUtilController.changeCanvasRect(),!1)},{passive:!1}):$(document).on("mousewheel","#book_main",function(e,t){e.preventDefault();var n=App.pdfInfo.get("currentZoomScale"),i=App.pdfInfo.get("zoomScale_max");if(1===n&&t<0||n===i&&t>0)return!1;t>0?n+=.2:n-=.2,n<1?n=1:n>i&&(n=i),App.PdfUtilController.pdfViewZoomFun(e,n),"1"==c&&App.PdfUtilController.changeCanvasRect()}),App.KinesisLogUtilController.sendLogByActionTpye(App.pageConfig.get("kinesis_log_actionType_open")),$(document).on("click","#book_main div.link-layer a.url-link",function(e){var t=$(this).parent().data("info");t&&App.KinesisLogUtilController.sendLogByActionTpye(App.pageConfig.get("kinesis_log_actionType_link_click"),t)}),App.PublicUtilController.forbiddenContextmenu(),1!=App.pdfInfo.get("embed_flg")&&($("#goto_page_input").focus(),$("#goto_page_input").blur()),$(document).on("keyup",function(e){if(!($("#confirm_dialog, #alert_dialog").length>0||App.PainterUtilController.penDrawing)){var t="";if(37==(t="Microsoft Internet Explorer"==navigator.appName?e.keyCode:e.which)||39==t){var n=App.pdfInfo.get("direction");39==t&&"ltr"==n||37==t&&"rtl"==n?App.TurnUtilController.gotoPageByTarget("next"):(37==t&&"ltr"==n||39==t&&"rtl"==n)&&App.TurnUtilController.gotoPageByTarget("previous")}}});try{window.top.gotoTopByViewer&&window.top.gotoTopByViewer()}catch(e){console.log(e)}},doubleClick:function(e){var t=$(e.target).hasClass("jsPanel-theme-memo")?$(e.target):$(e.target).parents(".jsPanel-theme-memo:first");if(window.pageTurning)return!1;if(t.length)return!1;var n=Math.round(App.pdfInfo.get("currentZoomScale"))||1,i=App.pdfInfo.get("zoomScale_max"),o=App.pdfInfo.get("zoomScale_list");if(n>=i||n<=0)n=1;else for(var a=0;a<o.length;a++)if(o[a]>n){n=o[a];break}App.PdfUtilController.pdfViewZoomFun(e,n),"1"==App.pdfInfo.get("compatibleFlg")&&App.PdfUtilController.changeCanvasRect()}})}),define("one-book/configInfo/browser-info",["exports"],function(e){App.browser={versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,qq:" qq"==e.match(/\sQQ/i),mac:e.indexOf("Mac OS")>-1,nexus:e.indexOf("Nexus")>-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()}}),define("one-book/configInfo/i18n-config",["exports","ember"],function(e,t){App.i18nConfig={ja:{pc_sidewrap__thumbnail__text:"サムネイル",pc_sidewrap__contents__text:"目次",pc_sidewrap__mome__text:"付箋一覧",pc_toolbar__search__placeholder:"コンテンツ内の文字を検索",pc_toolbar__zoom_in__text:"拡大",pc_toolbar__zoom_out__text:"縮小",pc_toolbar__pen__text:"ペン",pc_toolbar__memo__text:"付箋",pc_toolbar__cut__text:"切り抜き",pc_toolbar__cut__save:"保存",pc_toolbar__cut__cancel:"キャンセル",pc_toolbar__print__text:"印刷",pc_toolbar__first__text:"最初のページへ",pc_toolbar__previous__text:"前のページへ",pc_toolbar__next__text:"次のページへ",pc_toolbar__last__text:"最後のページへ",pc_toolbar__search__page__text:"のページへ",pc_toolbar__search__Retrieval:"検索中",pc_toolbar__search__piece:"件",pc_toolbar__search__failed:"ページロードする時に失敗しました。",pc_toolbar__search__result:"の検索結果 : ",pc_right_sidebar__share__text:"シェア",pc_right_sidebar__full_srceen__text:"フルスクリーン",pc_right_sidebar__print__text:"印刷",pc_bottom_Choice_print_left:"左ページ",pc_bottom_Choice_print_right:"右ページ",pc_bottom_Choice_print_double:"両ページ",pc_bottom_Choice_print_whole:"全てのページ",pc_bottom_Choice_print_current:"現在のページ",pc_print_title_text:"印刷する範囲を選択してください",pc_print_Popup_title_left_top:"印刷できないページが含んでいます",pc_print_Popup_title_left_bottom:"左ページが存在しません",pc_print_Popup_title_right_bottom:"右ページが存在しません",pc_print_single_option:"単ページ印刷",pc_ptint_double_option:"見開き印刷",pc_share_dialog__title__text:"このコンテンツをシェア",pc_share_dialog__copy_button__text:"コピー",pc_embed_share_dialog__title__text:"このコンテンツをシェア",pc_embed_share_dialog__copy_button__text:"URLをコピー",pad_sidebar__search__placeholder:"コンテンツ内の文字を検索",pad_sidebar__search_clean_button__text:"クリア",pad_footer__back_button__text:"戻る",pad_footer__larger_button__text:"拡大",pad_footer__normal_button__text:"通常",pad_share_content__title__text:"シェア",pad_share_content__copy_button__text:"URLをコピー",pad_share_content__content_url_title__text:"URLをコピーしました",sd_sidebar__search__placeholder:"コンテンツ内の文字を検索",sd_sidebar__search_clean_button__text:"クリア",sd_footer__back_button__text:"戻る",sd_footer__larger_button__text:"拡大",sd_footer__normal_button__text:"通常",sd_toolbar__search__result:"の検索結果 : ",sd_share_content__title__text:"シェア",sd_share_content__copy_button__text:"URLをコピー",sd_share_content__content_url_title__text:"URLをコピーしました",embedded_sd_share_content__app_button__text:"アプリで見る",embedded_sd_share_content__browser_button__text:"コンテンツを見る",embedded_sd_share_content__qrcode_contents_text__1:"QRコードを読み取ることで、",embedded_sd_share_content__qrcode_contents_text__2:"コンテンツの共有ができます。",memo_cleanLinkInfo_text:"設定したリンクを解除します。本当によろしいですか？",memo_cleanLinkMemo_text:"この付箋を削除します。本当によろしいですか？",memo_inlink_content_joint_text:"ページ目",memo_button_yes_text:"はい",memo_button_no_text:"いいえ",memo_select_template_title_text:"付箋の色を選択してください",memo_select_template_option_yellow_text:"黄色",memo_select_template_option_red_text:"赤色",memo_select_template_option_blue_text:"青色",memo_select_template_option_selected_text:"画面をクリックして付箋を貼り付ける場所を選択してください。",memo_select_template_option_selected_button:"作成済みの付箋一覧を見る",memo_template_title_text:"付箋",memo_template_control_close_title_text:"付箋を\n削除します",memo_template_control_clean_link_title_text:"設定したリンク先\nを解除します",memo_template_control_text_placeholder_text:"ここをタップしてテキストを入力してください。",memo_template_control_unfold_text:"リンク先",memo_template_control_button_edit_text:"編集する",memo_template_control_type_radio_1_text:"コンテンツ内のページ",memo_template_control_type_radio_2_text:"URL",memo_template_control_outlink_placeholder_text:"URLを入力してください",memo_template_control_inlink_title_1_text:"ページ番号を選択",memo_template_control_inlink_title_2_text:"ページ",memo_add_overstep_maxNum_10_text:"ページ毎に付箋の数は10個までです。",memo_add_overstep_maxNum_20_text:"見開きありの場合、2ページ合わせて20個までの付箋が作成できます。",painter_clear_painter_text:"描画した内容を全て削除します。本当によろしいですか？",painter_mobile_clear_painter_text:"描画した内容を全て削除します。<br>本当によろしいですか？",painter_curve_title_text:"フリーハンド\n描画ツール",painter_straightline_title_text:"直線描画\nツール",painter_lineWidth_title_text:"ペン先／太さ\n選択",painter_color_title_text:"色選択",painter_back_title_text:"描画内容を\nひとつ戻す",painter_clear_title_text:"描画内容\nを全削除",checkContentNum_error_text:"別コンテンツが開かれていますので、<br>本閲覧ページが無効になりました。",mobile_memo_create_text_1:"画面をタップして付箋を貼り付ける",mobile_memo_create_text_2:"場所を選択してください。",mobile_memo_create_button_text:"キャンセル",mobile_memo_text_dialog_text_title:"付箋メモ内容の編集",mobile_memo_text_dialog_text_placeholder:"ここをタップしてテキストを入力してくださ い。",mobile_memo_text_dialog_outlink_title:"リンク先URLの編集",mobile_memo_text_dialog_outlink_placeholder:"URLを入力してください",mobile_memo_text_dialog_save:"保存",mobile_memo_text_dialog_cancel:"キャンセル",mobile_memo_text_save_dialog_text:"編集した内容を保存します、<br>よろしいですか？",mobile_memo_text_cancel_dialog_text:"編集した内容を破棄します、<br>よろしいですか？"},en:{pc_sidewrap__thumbnail__text:"Thumbnail",pc_sidewrap__contents__text:"Contents",pc_sidewrap__mome__text:"Notes list",pc_toolbar__search__placeholder:"Search for text in content",pc_toolbar__zoom_in__text:"Zoom in",pc_toolbar__zoom_out__text:"Zoom out",pc_toolbar__pen__text:"Pen",pc_toolbar__memo__text:"Sticky note",pc_toolbar__cut__text:"Crop out",pc_toolbar__cut__save:"Save",pc_toolbar__cut__cancel:"Cancel",pc_toolbar__print__text:"Print",pc_toolbar__first__text:"First page",pc_toolbar__previous__text:"Previous page",pc_toolbar__next__text:"Next page",pc_toolbar__last__text:"Last page",pc_toolbar__search__page__text:"Page",pc_toolbar__search__Retrieval:"Searching",pc_toolbar__search__piece:"results",pc_toolbar__search__failed:"Searching failed.",pc_toolbar__search__result:"Search result : ",pc_right_sidebar__share__text:"Share",pc_right_sidebar__full_srceen__text:"Full screen",pc_right_sidebar__print__text:"Print",pc_bottom_Choice_print_left:"Left page",pc_bottom_Choice_print_right:"Right page",pc_bottom_Choice_print_double:"Double pages",pc_bottom_Choice_print_whole:"Whole book",pc_bottom_Choice_print_current:"Current page",pc_print_title_text:"Please select the area to print",pc_print_Popup_title_left_top:"Includes unprintable pages",pc_print_Popup_title_left_bottom:"Left page does not exist",pc_print_Popup_title_right_bottom:"Right page does not exist",pc_print_single_option:"Single page printing",pc_ptint_double_option:"Double page printing",pc_share_dialog__title__text:"Share this content",pc_share_dialog__copy_button__text:"Copy",pc_embed_share_dialog__title__text:"Share this content",pc_embed_share_dialog__copy_button__text:"Copy URL",pad_sidebar__search__placeholder:"Search for text in content",pad_sidebar__search_clean_button__text:"Clear",pad_footer__back_button__text:"Back",pad_footer__larger_button__text:"Enlarge",pad_footer__normal_button__text:"Normal",pad_share_content__title__text:"Share",pad_share_content__copy_button__text:"Copy URL",pad_share_content__content_url_title__text:"URL has been copied",sd_sidebar__search__placeholder:"Search for text in content",sd_sidebar__search_clean_button__text:"Clear",sd_footer__back_button__text:"Back",sd_footer__larger_button__text:"Enlarge",sd_footer__normal_button__text:"Normal",sd_toolbar__search__result:"Search result : ",sd_share_content__title__text:"Share",sd_share_content__copy_button__text:"Copy URL",sd_share_content__content_url_title__text:"URL has been copied",embedded_sd_share_content__app_button__text:"View in APP",embedded_sd_share_content__browser_button__text:"View content",embedded_sd_share_content__qrcode_contents_text__1:"You can share the content by scanning this QR code.",memo_cleanLinkInfo_text:"Are you sure you want to release the set link？",memo_cleanLinkMemo_text:"Are you sure you want to delete this sticky note？",memo_inlink_content_joint_text:"Page {N}",memo_button_yes_text:"Yes",memo_button_no_text:"No",memo_select_template_title_text:"Please select the color of the sticky note",memo_select_template_option_yellow_text:"Yellow",memo_select_template_option_red_text:"Red",memo_select_template_option_blue_text:"Blue",memo_select_template_option_selected_text:"Click on the page and select the location where the sticky note will be pasted.",memo_select_template_option_selected_button:"View the list of sticky notes",memo_template_title_text:"Sticky note",memo_template_control_close_title_text:"Delete \n sticky notes",memo_template_control_clean_link_title_text:"Release \n the set link",memo_template_control_text_placeholder_text:"Tap here to enter text.",memo_template_control_unfold_text:"Link destination",memo_template_control_button_edit_text:"Edit",memo_template_control_type_radio_1_text:"Page in content",memo_template_control_type_radio_2_text:"URL",memo_template_control_outlink_placeholder_text:"Please enter the URL",memo_template_control_inlink_title_1_text:"Select page number",memo_template_control_inlink_title_2_text:"Page",memo_add_overstep_maxNum_10_text:"Create up to 10 sticky notes per page.",memo_add_overstep_maxNum_20_text:"In spead mode, you can create up to 20 sticky notes on 2 pages.",painter_clear_painter_text:"Are you sure you want to delete all the drawn contents？",painter_mobile_clear_painter_text:"Delete all the drawn contents. <br> Are you sure?",painter_curve_title_text:"Freehand \n drawing tools",painter_straightline_title_text:"Line \n drawing tool",painter_lineWidth_title_text:"Select \n pen tip/thickness",painter_color_title_text:"Select color",painter_back_title_text:"Undo \n the last drawing",painter_clear_title_text:"Delete \n all drawing",checkContentNum_error_text:"This browsing page has been disabled<br>because another content is open.",mobile_memo_create_text_1:"Tap the page to paste a sticky note",mobile_memo_create_text_2:"Please select a location.",mobile_memo_create_button_text:"Cancel",mobile_memo_text_dialog_text_title:"Editing sticky note contents",mobile_memo_text_dialog_text_placeholder:"Tap here to enter text.",mobile_memo_text_dialog_outlink_title:"Editing link URL",mobile_memo_text_dialog_outlink_placeholder:"Please enter the URL",mobile_memo_text_dialog_save:"Save",mobile_memo_text_dialog_cancel:"Cancel",mobile_memo_text_save_dialog_text:"Save the edited content.<br>Are you sure?",mobile_memo_text_cancel_dialog_text:"Discard the edited content.<br>Are you sure?"},cn:{pc_sidewrap__thumbnail__text:"缩略图",pc_sidewrap__contents__text:"目录",pc_sidewrap__mome__text:"便签一览",pc_toolbar__search__placeholder:"搜索内容中的文字",pc_toolbar__zoom_in__text:"放大",pc_toolbar__zoom_out__text:"缩小",pc_toolbar__pen__text:"画笔",pc_toolbar__memo__text:"便签",pc_toolbar__cut__text:"截图",pc_toolbar__cut__save:"保存",pc_toolbar__cut__cancel:"取消",pc_toolbar__print__text:"打印",pc_toolbar__first__text:"首页",pc_toolbar__previous__text:"上一页",pc_toolbar__next__text:"下一页",pc_toolbar__last__text:"尾页",pc_toolbar__search__page__text:"页",pc_toolbar__search__Retrieval:"搜索中",pc_toolbar__search__piece:"条",pc_toolbar__search__failed:"搜索失败",pc_toolbar__search__result:"搜索结果",pc_right_sidebar__share__text:"分享",pc_right_sidebar__full_srceen__text:"全屏",pc_right_sidebar__print__text:"打印",pc_bottom_Choice_print_left:"左页",pc_bottom_Choice_print_right:"右页",pc_bottom_Choice_print_double:"两页",pc_bottom_Choice_print_whole:"所有页面",pc_bottom_Choice_print_current:"当前页面",pc_print_title_text:"请选择打印区域",pc_print_Popup_title_left_top:"包含不能打印的页面",pc_print_Popup_title_left_bottom:"左页不存在",pc_print_Popup_title_right_bottom:"右页不存在",pc_print_single_option:"单页打印",pc_ptint_double_option:"双页打印",pc_share_dialog__title__text:"分享该内容",pc_share_dialog__copy_button__text:"复制",pc_embed_share_dialog__title__text:"分享该内容",pc_embed_share_dialog__copy_button__text:"复制URL",pad_sidebar__search__placeholder:"搜索内容中的文字",pad_sidebar__search_clean_button__text:"清除",pad_footer__back_button__text:"返回",pad_footer__larger_button__text:"扩大",pad_footer__normal_button__text:"普通",pad_share_content__title__text:"分享",pad_share_content__copy_button__text:"复制URL",pad_share_content__content_url_title__text:"已复制URL",sd_sidebar__search__placeholder:"搜索内容中的文字",sd_sidebar__search_clean_button__text:"清除",sd_footer__back_button__text:"返回",sd_footer__larger_button__text:"扩大",sd_footer__normal_button__text:"普通",sd_toolbar__search__result:"搜索结果 ： ",sd_share_content__title__text:"分享",sd_share_content__copy_button__text:"复制URL",sd_share_content__content_url_title__text:"已复制URL",embedded_sd_share_content__app_button__text:"在应用中查看",embedded_sd_share_content__browser_button__text:"查看内容",embedded_sd_share_content__qrcode_contents_text__1:"您可以通过扫描二维码进行分享。",memo_cleanLinkInfo_text:"确定要消除已设定的链接吗？",memo_cleanLinkMemo_text:"确定要删除此便签吗？",memo_inlink_content_joint_text:"第{N}页",memo_button_yes_text:"是",memo_button_no_text:"否",memo_select_template_title_text:"请选择便签颜色",memo_select_template_option_yellow_text:"黄色",memo_select_template_option_red_text:"红色",memo_select_template_option_blue_text:"蓝色",memo_select_template_option_selected_text:"点击页面，选择粘贴便签的位置。",memo_select_template_option_selected_button:"查看已作成便签一览",memo_template_title_text:"便签",memo_template_control_close_title_text:"删除便签",memo_template_control_clean_link_title_text:"消除已设定的连接",memo_template_control_text_placeholder_text:"点击此处输入文字。",memo_template_control_unfold_text:"链接地址",memo_template_control_button_edit_text:"编辑",memo_template_control_type_radio_1_text:"内容中的页面",memo_template_control_type_radio_2_text:"网址",memo_template_control_outlink_placeholder_text:"请输入网址",memo_template_control_inlink_title_1_text:"请选择页码",memo_template_control_inlink_title_2_text:"页",memo_add_overstep_maxNum_10_text:"每页最多创建10个便签。",memo_add_overstep_maxNum_20_text:"双页表示时，两页合计最多可以创建20个便签。",painter_clear_painter_text:"确定要删除所有绘制的内容吗？",painter_mobile_clear_painter_text:"删除所有绘制的内容。<br>确定吗？",painter_curve_title_text:"手绘工具",painter_straightline_title_text:"直线工具",painter_lineWidth_title_text:"选择\n画笔类型/粗细",painter_color_title_text:"选择颜色",painter_back_title_text:"撤销上一个\n绘制内容",painter_clear_title_text:"删除全部\n绘制内容",checkContentNum_error_text:"当前浏览页面已被禁用，因为已打开其他内容。",mobile_memo_create_text_1:"点击页面粘贴便签",mobile_memo_create_text_2:"请选择位置。",mobile_memo_create_button_text:"取消",mobile_memo_text_dialog_text_title:"编辑便签内容",mobile_memo_text_dialog_text_placeholder:"点击此处输入文字。",mobile_memo_text_dialog_outlink_title:"编辑链接",mobile_memo_text_dialog_outlink_placeholder:"请输入网址",mobile_memo_text_dialog_save:"保存",mobile_memo_text_dialog_cancel:"取消",mobile_memo_text_save_dialog_text:"保存已编辑的内容。<br> 确定吗？",mobile_memo_text_cancel_dialog_text:"放弃已编辑的内容。<br> 确定吗？"},tw:{pc_sidewrap__thumbnail__text:"縮略圖",pc_sidewrap__contents__text:"目錄",pc_sidewrap__mome__text:"便簽一覽",pc_toolbar__search__placeholder:"搜索內容中的文字",pc_toolbar__zoom_in__text:"放大",pc_toolbar__zoom_out__text:"縮小",pc_toolbar__pen__text:"畫筆",pc_toolbar__memo__text:"便簽",pc_toolbar__cut__text:"裁剪",pc_toolbar__cut__save:"存儲",pc_toolbar__cut__cancel:"取消",pc_toolbar__print__text:"打印",pc_toolbar__first__text:"首頁",pc_toolbar__previous__text:"上一頁",pc_toolbar__next__text:"下一頁",pc_toolbar__last__text:"尾頁",pc_toolbar__search__page__text:"頁",pc_toolbar__search__Retrieval:"搜索中",pc_toolbar__search__piece:"條",pc_toolbar__search__failed:"搜索失敗。",pc_toolbar__search__result:"搜索結果 ： ",pc_right_sidebar__share__text:"分享",pc_right_sidebar__full_srceen__text:"全屏",pc_right_sidebar__print__text:"打印",pc_bottom_Choice_print_left:"左頁",pc_bottom_Choice_print_right:"右頁",pc_bottom_Choice_print_double:"雙頁",pc_bottom_Choice_print_whole:"全頁",pc_bottom_Choice_print_current:"當前頁",pc_print_title_text:"請選擇打印區域",pc_print_Popup_title_left_top:"包含不能打印的页面",pc_print_Popup_title_left_bottom:"左頁不存在",pc_print_Popup_title_right_bottom:"右頁不存在",pc_print_single_option:"單頁打印",pc_ptint_double_option:"雙頁打印",pc_share_dialog__title__text:"分享該內容",pc_share_dialog__copy_button__text:"複製",pc_embed_share_dialog__title__text:"分享該內容",pc_embed_share_dialog__copy_button__text:"複製URL",pad_sidebar__search__placeholder:"搜索內容中的文字",pad_sidebar__search_clean_button__text:"清除",pad_footer__back_button__text:"返回",pad_footer__larger_button__text:"擴大",pad_footer__normal_button__text:"普通",pad_share_content__title__text:"分享",pad_share_content__copy_button__text:"複製URL",pad_share_content__content_url_title__text:"已複製URL",sd_sidebar__search__placeholder:"搜索內容中的文字",sd_sidebar__search_clean_button__text:"清除",sd_footer__back_button__text:"返回",sd_footer__larger_button__text:"擴大",sd_footer__normal_button__text:"普通",sd_toolbar__search__result:"搜索結果 ： ",sd_share_content__title__text:"分享",sd_share_content__copy_button__text:"複製URL",sd_share_content__content_url_title__text:"已複製URL",embedded_sd_share_content__app_button__text:"在應用中查看",embedded_sd_share_content__browser_button__text:"查看內容",embedded_sd_share_content__qrcode_contents_text__1:"您可以通過掃描二維碼進行分享。",memo_cleanLinkInfo_text:"確定要消除已設定的鏈接嗎？",memo_cleanLinkMemo_text:"確定要刪除此便簽嗎？",memo_inlink_content_joint_text:"第{N}頁",memo_button_yes_text:"是",memo_button_no_text:"否",memo_select_template_title_text:"請選擇便簽顏色",memo_select_template_option_yellow_text:"黃色",memo_select_template_option_red_text:"紅色",memo_select_template_option_blue_text:"藍色",memo_select_template_option_selected_text:"點擊頁面，選擇粘貼便簽的位置。",memo_select_template_option_selected_button:"查看已作成便簽一覽",memo_template_title_text:"便簽",memo_template_control_close_title_text:"刪除便簽",memo_template_control_clean_link_title_text:"消除已設定的連接",memo_template_control_text_placeholder_text:"點擊此處輸入文字。",memo_template_control_unfold_text:"鏈接地址",memo_template_control_button_edit_text:"編輯",memo_template_control_type_radio_1_text:"內容中的頁面",memo_template_control_type_radio_2_text:"網址",memo_template_control_outlink_placeholder_text:"請輸入網址",memo_template_control_inlink_title_1_text:"請選擇頁碼",memo_template_control_inlink_title_2_text:"頁",memo_add_overstep_maxNum_10_text:"每頁做多創建10個便簽。",memo_add_overstep_maxNum_20_text:"雙頁表示時，兩頁合計最多可以創建20個便簽。",painter_clear_painter_text:"確定要刪除所有繪制的內容嗎？",painter_mobile_clear_painter_text:"刪除所以繪制的內容。<br>確定嗎？",painter_curve_title_text:"手繪工具",painter_straightline_title_text:"直線工具",painter_lineWidth_title_text:"選擇\n畫筆類型/粗細",painter_color_title_text:"選擇顏色",painter_back_title_text:"撤銷上一個\n繪製內容",painter_clear_title_text:"刪除全部\n繪製內容",checkContentNum_error_text:"當前瀏覽頁面已被禁用，因為已打開其他內容。",mobile_memo_create_text_1:"點擊頁面粘貼便簽",mobile_memo_create_text_2:"請選擇位置。",mobile_memo_create_button_text:"取消",mobile_memo_text_dialog_text_title:"編輯便簽內容",mobile_memo_text_dialog_text_placeholder:"點擊此處輸入文字。",mobile_memo_text_dialog_outlink_title:"編輯鏈接",mobile_memo_text_dialog_outlink_placeholder:"請輸入網址",mobile_memo_text_dialog_save:"保存",mobile_memo_text_dialog_cancel:"取消",mobile_memo_text_save_dialog_text:"保存已編輯的內容。<br> 確定嗎？",mobile_memo_text_cancel_dialog_text:"放棄已編輯的內容。<br> 確定嗎？"}},App.i18n=App.i18nConfig.en;var n=App.pdfInfo.get("dispLanguage");"1"==n?(App.i18n=App.i18nConfig.ja,$("body").addClass("one-lane-ja")):"2"==n?(App.i18n=App.i18nConfig.en,$("body").addClass("one-lane-en")):"3"==n?(App.i18n=App.i18nConfig.cn,$("body").addClass("one-lane-cn")):"4"==n&&(App.i18n=App.i18nConfig.tw,$("body").addClass("one-lane-tw")),App.i18n.getMemoInlinkContentJointText=function(e){var t=App.pdfInfo.get("totalPageNo");e>t&&(e=t),e=App.TurnUtilController.updateTurnCurrPage(e);return App.i18n.memo_inlink_content_joint_text.indexOf("{N}")>-1?App.i18n.memo_inlink_content_joint_text.replace("{N}",e):e+App.i18n.memo_inlink_content_joint_text}}),define("one-book/configInfo/page-config",["exports","ember"],function(e,t){App.pageConfig=t.default.Object.create({ActiBookOne_version:"6.8.0",ActiBookOne_Flg:"1",API_Domain:"",share_facebook:"http://www.facebook.com/sharer.php?u=",share_twitter:"http://twitter.com/share?url=",share_LINE:"http://line.me/R/msg/text/?",prefixDivText_Page:"page_divText_",prefixCanvas_Page:"page_canvasView_",prefixCanvas_Toc:"toc_canvas_",filesPath:"attachments/",pdfsPath:"encrypt.pdf",thumbnailPath:"thumbnails/",jsonsPath:"jsons-",pageImgPath:"images/1/",compatiblePageImgPath:"images/3/",pageImgType:".png",Link_Type_Video:"1",Link_Type_Audio:"2",Link_Type_File:"3",Link_Type_Goto:"4",Link_Type_URL:"5",File_Type_Video:"mp4",File_Type_Audio:"mp3",divLink_Main:"main_divLink_id",prefixDivLink_Page:"page_divLink_",ADD:"ADD",UPDATE:"UPDATE",mediaFormatLimit:["mp3","mp4"],fileFormatLimit:["mp3","mp4","jpg","jpeg","pdf","gif","png","txt","doc","xls","ppt","docx","pptx","xlsx"],terminalOs_others:0,terminalOs_windows:1,terminalOs_mac:2,terminalOs_iOS:3,terminalOs_Android:4,terminalType_others:0,terminalType_pc_browser:1,terminalType_phone_browser:2,terminalType_pad_browser:3,terminalType_phone_app:4,terminalType_pad_app:5,readFrom_noWire:0,readFrom_direct:1,readFrom_site:2,readFrom_siteOther:3,readFrom_LINE:4,readFrom_Twitter:5,readFrom_Facebook:6,readFrom_QRcode:7,readFrom_download:8,readFrom_browsingHistory:9,readType_DL:0,readType_Site:1,readType_embedded:2,kinesis_log_viewer_type_H5:1,kinesis_log_device_type_pc:1,kinesis_log_device_type_phone:2,kinesis_log_device_type_tablet:3,kinesis_log_browser_type:["others","chrome","firefox","ie","edge","safari"],kinesis_log_os_type:["others","windows","mac os","ios","android"],kinesis_log_actionType_open:1,kinesis_log_actionType_paging:2,kinesis_log_actionType_link_click:3,kinesis_log_actionType_search:4,kinesis_log_actionType_dwell_time:5,kinesis_log_actionType_paging_reissue:99,memo_link_type_inlink:1,memo_link_type_outlink:2,memo_init_parameter:{id:"",x:0,y:0,layer:1,color:"",text:"",linkType:"",linkDetail:"",width:"300px",height:"320px",foldStatus:"0"}})}),define("one-book/configInfo/pdf-info",["exports","ember","one-book/models/pdf-model"],function(e,t,n){App.pdfInfo=n.default.create({init:function(){try{App.CommonUtilController.ActiBookOneLocalData=JSON.parse(localStorage.getItem("ActiBookOneLocalData")||"{}")}catch(e){App.CommonUtilController.ActiBookOneLocalData={}}if(window.parent&&window.parent.initViewer){App.CommonUtilController.log("Site !!!");var e=window.parent.initViewer();"1"==e.embedFlg?($("body").addClass("embed_flg"),this.set("embed_flg",e.embedFlg),this.set("readType",App.pageConfig.get("readType_embedded"))):this.set("readType",e.readType),App.pageConfig.set("API_Domain",e.apiUrl),e.callAppUrl&&this.set("callAppUrl",App.CommonUtilController.htmlSpecialChars_decode(e.callAppUrl)),this.set("contentDetailUrl",e.contentDetailUrl);var t=e.keyword||"";t&&(t=App.CommonUtilController.htmlSpecialChars_decode(e.keyword),this.set("searchValueArr",t.split(/[ |　]+/g))),this.set("imgType","."+e.imgType),this.set("printableFlg",e.printableFlg),this.set("shareableFlg",e.shareableFlg),this.set("contentTitle",e.contentTitle),this.set("contentInfoDispFlg",e.contentInfoDispFlg),this.set("initViewerAttr",e),this.set("totalPageNo",parseInt(e.totalPageTime)),this.set("totalPageTime",parseInt(e.totalPageTime));var n="l"===e.direction?"ltr":"rtl";this.set("direction",n);var i="1"==e.cover;this.set("hasCover",i);var o="0"===e.speadMode?"single":"double";this.set("spread_mode",o),this.set("spread_mode_init",o);var a=e.userNum,l=e.contentNum,r=a+"_"+l;this.set("readProgressKey",r);var s=this.getProgressNew(r);(!s||"NaN"===s.toString()||s<=1||s>parseInt(e.totalPageTime))&&(s=1),this.set("readProgress",s);var c="One"+e.contentNum+"Content";this.set("password",c),this.set("contentNum",e.contentNum),this.set("link_color",e.linkColor),this.set("link_twinkle",e.linkTwinkle),this.set("link_alpha",e.link_alpha),this.set("contentUpdateDate",e.contentUpdateDate),this.set("contentType",e.contentType),this.set("userNum",e.userNum),this.set("readFrom",e.readFrom),this.set("clientNum",e.clientNum),this.set("appButtonDispFlg",e.appButtonDispFlg),this.set("dispLanguage",e.dispLanguage),this.set("envType",e.envType);var p=e.baseUrl,d=e.urlSignature,m=e.customizeDate;this.set("url_Prefix",p),this.set("url_Suffix",d),
this.set("customize_date",m),this.set("shareBaseUrl",e.shareBaseUrl);for(var _=e.enlargeSizes||"300",u=_.split(","),g=[1,2],h=1,f=0;f<u.length;f++){var v=parseInt(u[f])/100;v>h&&(h=v),g.push(v)}g.sort(function(e,t){return e-t}),this.set("zoomScale_max",h),this.set("zoomScale_list",g),this.set("cutFlg",e.cutFlg);App.pageConfig.get("jsonsPath");return this.setChapterJsons(),this.setContentinfoJsons(),this.set("compatibleFlg",e.compatibleFlg),this.setCustomizeJsons(),this.set("siteNum",e.clientNum||""),this.set("siteTitle",e.siteTitle||""),!1}var b=null;try{$.ajax({type:"GET",url:"../jsons/configinfo.json",async:!1,dataType:"json",success:function(e){b=e,$("title").text(b.contentTitle)},error:function(e){}})}catch(e){}if(b){App.pageConfig.set("API_Domain",b.apiUrl),this.set("initViewerAttr",b),this.set("viewerType","DL"),this.set("totalPageNo",parseInt(b.totalPageTime)),this.set("totalPageTime",parseInt(b.totalPageTime)),this.set("imgType","."+b.imgType||"png"),this.set("readProgress",1),this.set("contentTitle",b.contentTitle),this.set("printableFlg",b.printableFlg),this.set("shareableFlg",b.shareableFlg);var c="One"+b.contentNum+"Content";this.set("password",c),this.set("contentNum",b.contentNum),this.set("contentUpdateDate",b.contentUpdateDate),this.set("contentType",b.contentType),this.set("clientNum",b.clientNum);var x="",A=null,C=null;window.parent.getParams?(A=window.parent,C=A.getParams()):window.opener&&window.opener.getParams&&(A=window.opener,C=A.getParams()),this.set("readType",App.pageConfig.get("readType_DL"));var s=null,k=null;A&&C?(k=C.readFrom,x=C.shareBaseUrl||"",C.callAppUrl&&this.set("callAppUrl",App.CommonUtilController.htmlSpecialChars_decode(C.callAppUrl)),this.set("indexUrl",C.indexUrl),this.set("contentInfoDispFlg",C.contentInfoDispFlg)):(x=window.location.href.split("?")[0],x.indexOf("pdfViewer/#/pc")>0?x=x.replace("pdfViewer/#/pc",""):x.indexOf("pdfViewer/#/sd")>0?x=x.replace("pdfViewer/#/sd",""):x.indexOf("pdfViewer/")>0&&(x=x.replace("pdfViewer/",""))),this.set("shareBaseUrl",x);var a="0",l=b.contentNum,r=a+"_"+l;this.set("readProgressKey",r),s=this.getProgressNew(r),(!s||"NaN"===s.toString()||s<=1||s>parseInt(b.totalPageTime))&&(s=1),this.set("readProgress",s),this.set("readFrom",k),this.set("userNum","0"),this.set("isMatchByPage",!1);var w=b.configJson;"string"==typeof b.configJson&&(w=JSON.parse(b.configJson));var n="l"===w.direction?"ltr":"rtl";this.set("direction",n);var i="1"==w.cover;this.set("hasCover",i);var o="0"===w.spead_mode?"single":"double";this.set("spread_mode",o),this.set("spread_mode_init",o),this.set("link_color",w.link_color),this.set("link_twinkle",w.link_twinkle),this.set("link_alpha",w.link_alpha),this.set("appButtonDispFlg",b.appButtonDispFlg),this.set("dispLanguage",b.dispLanguage),this.set("envType",b.envType);var p="../",d="",m="";this.set("url_Prefix",p),this.set("url_Suffix",d),this.set("customize_date",m);for(var _=b.enlargeSizes||"300",u=_.split(","),g=[1,2],h=1,f=0;f<u.length;f++){var v=parseInt(u[f])/100;v>h&&(h=v),g.push(v)}g.sort(function(e,t){return e-t}),this.set("zoomScale_max",h),this.set("zoomScale_list",g),this.set("cutFlg",b.cutFlg);return this.setChapterJsons(),this.setContentinfoJsons(),this.set("compatibleFlg",b.compatibleFlg),this.setCustomizeJsons(),this.set("siteNum",b.clientNum||""),this.set("siteTitle",b.siteTitle||""),!1}return alert("Content Load Error!"),!1},setLinkJsons:function(){var e=this,t=this.url_Prefix,n=this.url_Suffix,i="jsons";this.customize_date&&(i=App.pageConfig.get("jsonsPath")+this.customize_date),$.ajax({type:"GET",url:t+i+"/links.json"+n,async:!1,dataType:"json",success:function(t){e.set("linkJsons",t)},error:function(e){}})},setChapterJsons:function(){var e=this,t=this.url_Prefix,n=this.url_Suffix,i="jsons";this.customize_date&&(i=App.pageConfig.get("jsonsPath")+this.customize_date),$.ajax({type:"GET",url:t+i+"/contentlist.json"+n,async:!1,dataType:"json",success:function(t){e.set("chapterJsons",t||[])},error:function(t){e.set("chapterJsons",[])}})},setContentinfoJsons:function(){var e=this,t=this.url_Prefix,n=this.url_Suffix,i="jsons";this.customize_date&&(i=App.pageConfig.get("jsonsPath")+this.customize_date);var o={size:[]};$.ajax({type:"GET",url:t+i+"/contentinfo.json"+n,async:!1,dataType:"json",success:function(t){o=t;var n=o.size[0].p1.x,i=o.size[0].p1.y;e.set("first_width",n),e.set("first_height",i),e.set("pdfSize",o.pdfSize),"0"==o.hasText||(o.hasText="1"),e.set("hasText",o.hasText)},error:function(e){}})},getProgressNew:function(e){var t=this,n=void 0,i=void 0,o="";if($(window.document).parents("iframe").prevObject.each(function(){var e=t.geturl(this.referrer);null!==o&&void 0!==o&&""!==o||(o=e.pNo)}),null===o||void 0===o||""===o){"1"!=this.get("embed_flg")&&(i=App.PublicUtilController.getUrlParam("pNo"));var a=localStorage.getItem(e);(!(n=i||a||1)||parseInt(n)>this.get("totalPageNo"))&&(n=1)}else n=o;return parseInt(n)},geturl:function(e){var t={pNo:""};if(null!==e&&void 0!==e){var n=e.split("?");if(n.length>1)for(var i=n[1].split("&"),o=0;o<i.length;o++){var a=i[o].split("=");t[a[0]]=a[1]}}return t},getProgress:function(e){var t=void 0,n=void 0;"1"!=this.get("embed_flg")&&(n=App.PublicUtilController.getUrlParam("pNo"));var i=localStorage.getItem(e);return t=n||(i||1),(!t||parseInt(t)>this.get("totalPageNo"))&&(t=1),parseInt(t)},setCustomizeJsons:function(){var e=this,t=this.url_Prefix,n=this.url_Suffix,i="jsons";this.customize_date&&(i=App.pageConfig.get("jsonsPath")+this.customize_date),$.ajax({type:"GET",url:t+i+"/customize.json"+n,async:!1,dataType:"json",success:function(t){if(t&&t.length>0)e.set("customizeJsons",t);else{var n=e.setMockCustomizeJson();e.set("customizeJsons",n)}e.setPageStart()},error:function(){var t=e.setMockCustomizeJson();e.set("customizeJsons",t),e.setPageStart()}})},setMockCustomizeJson:function(){var e=this.get("totalPageNo"),t=[];if(e&&e>0)for(var n=0;n<e;n++){var i={};i.show=String(n+1),i.target=Number(n+1),i.isContent=!0,t.push(i)}return t},setPageStart:function(){for(var e=this,t=e.get("customizeJsons"),n=1,i=0;i<t.length;i++)if(!0===t[i].isContent){n=t[i].target;break}e.set("pageStart",n)}})}),define("one-book/controllers/embedded-sd",["exports","ember"],function(e,t){e.default=t.default.Controller.extend({share_content__app_button__text:App.i18n.embedded_sd_share_content__app_button__text,share_content__browser_button__text:App.i18n.embedded_sd_share_content__browser_button__text,share_content__qrcode_contents_text__1:App.i18n.embedded_sd_share_content__qrcode_contents_text__1,share_content__qrcode_contents_text__2:App.i18n.embedded_sd_share_content__qrcode_contents_text__2})}),define("one-book/controllers/pad",["exports","ember"],function(e,t){e.default=t.default.Controller.extend({bookTitle:App.pdfInfo.get("contentTitle"),bookTotalPageNo:App.pdfInfo.get("totalPageNo"),sidewrap__thumbnail__text:App.i18n.pad_sidebar__search__placeholder,sidebar__search_clean_button__text:App.i18n.pad_sidebar__search_clean_button__text,footer__back_button__text:App.i18n.pad_footer__back_button__text,footer__larger_button__text:App.i18n.pad_footer__larger_button__text,footer__normal_button__text:App.i18n.pad_footer__normal_button__text,share_content__title__text:App.i18n.pad_share_content__title__text,share_content__copy_button__text:App.i18n.pad_share_content__copy_button__text,share_content__content_url_title__text:App.i18n.pad_share_content__content_url_title__text,mobile_memo_create_text_1:App.i18n.mobile_memo_create_text_1,mobile_memo_create_text_2:App.i18n.mobile_memo_create_text_2,mobile_memo_create_button_text:App.i18n.mobile_memo_create_button_text,mobile_memo_text_dialog_save:App.i18n.mobile_memo_text_dialog_save,mobile_memo_text_dialog_cancel:App.i18n.mobile_memo_text_dialog_cancel,compatibleSeaching:!1,init:function(){var e=this;App.KinesisLogUtilController.isApp=!0;var t=$(window).width(),n=$(window).height();setInterval(function(){t==$(window).width()&&n==$(window).height()||(t=$(window).width(),n=$(window).height(),clearTimeout(window.windowResize_page),window.windowResize_page=setTimeout(function(){if(!App.MemoUtilController.isChangeMemoLinkInfo){App.PainterUtilController&&App.PainterUtilController.getCanvasImgAndSaveStorage(!0),App.TurnUtilController.changeSpreadMode(),App.PublicUtilController.window_resize(),App.PainterUtilController&&App.PainterUtilController.resetPagePainterLayer();var e=App.TurnUtilController.getCurrentPagenos()[0],t=App.TurnUtilController.updateTurnCurrPage(e);$("#acti-header-container .acti_book_pageno").html(t),App.LinkUtilController.resetPageLinkFun(),App.KinesisLogUtilController.sendLogByActionTpye(App.pageConfig.get("kinesis_log_actionType_paging_reissue"))}},100))},100),device.iphone()?$(document).on("tap","#acti-search-content-view > li",function(t){t.preventDefault();$(this).attr("pageno");App.PublicUtilController.click_searchResult_event(this),e.closeContentDiv()}):$(document).on("click","#acti-search-content-view > li",function(t){t.preventDefault();$(this).attr("pageno");App.PublicUtilController.click_searchResult_event(this),e.closeContentDiv()}),$(document).on("click","#book_main div.link-layer div.linkBlock",function(e){e.preventDefault(),App.PublicUtilController.click_link_event(this)}),$(document).on("keyup.search clickSearch","#sidebar_search_input",function(t){var n=document.all?window.event:t;if((13==n.keyCode||"clickSearch"==n.type)&&$(this).val()){$(this).blur(),App.CommonUtilController.gotoTop_parent();var i=$(this).val(),o=$(this).val().split(/[ |　]+/g),a=App.pdfInfo.get("searchValueArr"),l=App.pdfInfo.get("isMatchByPage"),r=App.pdfInfo.get("compatibleFlg");if("1"==r){if(o.join(",")==a.join(","))return!1}else if(l&&o.join(",")==a.join(","))return!1;if(App.PdfUtilController.cleanPhraseMatch(!0),$("#acti-search-content-view").html(""),"1"==r){App.PdfUtilController.clearBtnFlg=!1;var s=parseInt(App.pdfInfo.get("totalPageNo"));$("#search_dialog").css({"z-index":Number(s+5250),display:"block"}),App.PdfUtilController.showCanvasFlg=!0,App.PdfUtilController.searchFromXml(),App.PdfUtilController.highlightSearchResult(),e.compatibleSeaching=!0}else{App.pdfInfo.set("searchValueArr",o);var c=App.TurnUtilController.getCurrentPagenos();$.each(c,function(){App.PdfUtilController.calcFindPhraseMatch(this)}),App.searchViewerController.pdfSearching()}App.KinesisLogUtilController.searchKeyword=i,App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("search",""),App.KinesisLogUtilController.sendReadingProcessAwsKinesisLog_Add("","search","","",""),$("#sidebar_clean_button").removeClass("disabled")}}),$(document).on("openSearchContent","#sidebar_search_input",function(t){e.get("actions").openMenu_mobile_content(),e.get("actions").toggleMenu_mobile_content("acti-mobile-search-content","acti-mobile-search-button")}),window.showShareContent=function(){e.get("actions").toggleMenu_mobile_content("acti-mobile-share-content","acti-mobile-share-button")},window.openApp=function(){e.get("actions").openApp()},App.PublicUtilController.memoEventBind_mobile(),$(window).on("orientationchange",function(){0==window.orientation||180==window.orientation?(App.KinesisLogUtilController.appDirection="vertical",1==e.compatibleSeaching&&setTimeout(function(){App.PdfUtilController.changeCanvasRect()},1e3)):90!=window.orientation&&-90!=window.orientation||(App.KinesisLogUtilController.appDirection="horizontal",1==e.compatibleSeaching&&setTimeout(function(){App.PdfUtilController.changeCanvasRect()},1e3));var t=App.LogUtilController.reading_json.accessLogSortkeyId;null!==t&&void 0!==t&&function(){App.KinesisLogUtilController.isCompleteTurn=!1;var e=setInterval(function(){if(App.KinesisLogUtilController.isCompleteTurn){clearInterval(e);var t=App.TurnUtilController.getCurrentPagenos();null!==t&&t.length>0&&t.forEach(function(e,t){App.KinesisLogUtilController.startPage=e}),App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("rotate",""),App.KinesisLogUtilController.sendReadingProcessAwsKinesisLog_Add("","rotate","","",""),App.TurnUtilController.sendReadLog()}},100)}()})},closeContentDiv:function(){$("#acti-header-container a").removeClass("active"),$("#acti-mobile-menu-content div.content").hide()},mousewheel_loadToc_mobile:function(e){clearTimeout(window.mousewheel_preloadingToc),window.mousewheel_preloadingToc=setTimeout(function(){var t=e.find("div.page_group:first").width(),n=e.scrollLeft()-2*t,i=e.scrollLeft()+$("#acti-mobile-toc-content").width()+t,o=[];if($("> div.page_group",e).each(function(){var t=$(this).position().left+e.scrollLeft();t>n&&t<i&&$("div.thumbnail:not(.loaded)",this).each(function(){var e=this,t=parseInt($(this).attr("pageno"));if(0!=t){var n=App.pdfInfo.url_Prefix,i=App.pdfInfo.url_Suffix,o=App.pageConfig.get("thumbnailPath"),a=App.pdfInfo.get("imgType")||App.pageConfig.pageImgType,l=encodeURI(n+o+t+a+i);$("img",e)[0].onload=function(){$(e).addClass("loaded")},$("img",e)[0].onerror=function(){$(e).addClass("render_error").addClass("loaded"),$(e).html("<i class='oneviewer oneviewer-times-circle'></i>")},$("img",e).attr("src",l)}else $(e).addClass("loaded"),$(e).css("height","auto")})}),"rtl"===App.pdfInfo.get("direction")){for(var a=[],l=o.length-1;l>=0;l--)a.push(o[l]);o=a}},500)},actions:{goBack_mobile:function(){var e=window;try{for(var t=0;t<5;t++)if(e=e.parent,$("body",e.document).hasClass("topPage")){e.history.go(-1);break}}catch(e){}window.history.go(-1)},resizeParentSize:function(e){window.parent&&window.parent.resizeParentSize&&window.parent.resizeParentSize(e),"in"==e?(App.CommonUtilController.gotoTop_parent(),$(".resetParentPageSize_button_in").hide(),$(".resetParentPageSize_button_out").show()):($(".resetParentPageSize_button_in").show(),$(".resetParentPageSize_button_out").hide())},mobile_copy_url:function(){},cancelMemoCreateState:function(){$("div.memo-create-title-box").hide(),$("#main_divLink_id").off("click.createMemo"),App.TurnUtilController.resetBookTurn_disable(!1),$("#main_divLink_id > div.link_layer > div").removeClass("acti-disable"),App.JspanelUtilController.showMemoSelectJspanel_mobile()},toggleMenu_mobile_content:function(e,n){var i=this;if(!($("#confirm_dialog, #alert_dialog").length>0)){var o=$("#acti-header-container a.active"),a=o.attr("id"),l=$("#acti-mobile-painter-button").hasClass("active");if("acti-mobile-memo-button"!==a&&$("#acti-header-container a").removeClass("active"),$("#acti-header-container a").removeClass("active"),$("#acti-mobile-menu-content > div.content, #acti-mobile-share-content").hide(),$(".acti-mobile-share-content-url-title").hide(),$("div.memo-create-title-box").hide(),$("#main_divLink_id").off("click.createMemo"),App.TurnUtilController.resetBookTurn_disable(!1),a&&a===n);else{if($("#acti-header-container a").removeClass("active"),$("#"+n).addClass("active"),"acti-mobile-memo-content"!=e&&$("#"+e).show(),"acti-mobile-search-button"==n){var r=App.pdfInfo.get("searchValueArr");r.length>0&&$("#sidebar_search_input").val(r.join(" "))}"acti-mobile-toc-button"==n&&App.TurnUtilController.binkSelectedAndPosition()}var s=$("#"+e);if("acti-mobile-hamburger-content"==e&&!s.hasClass("loaded")){s.addClass("loaded");var c=App.pdfInfo.get("chapterJsons");c||(App.pdfInfo.setChapterJsons(),c=App.pdfInfo.get("chapterJsons"));for(var p=s.find("div.list:first"),d=0;d<c.length;d++){var m=c[d],_=15*parseInt(m.level)+4,u=m.chapterTarget,g=m.target;u?"0"===u||!0===m.isShowPage||Number(u)<0?g="":u&&!1===m.isShowPage&&(g=u):g=0==m.target?"":m.target;var h=$("<div class='chapter'></div>").append($('<span class="chapter_text"></span>').text(m.title)).css("padding-left",_+"px").data("target",m.target);h.append($('<span class="chapter_target"></span>').text(g)),0===parseInt(m.level)&&h.css("font-weight","bold"),p.append(h)}p.find("> div").on("click",function(){var e=parseInt(App.pdfInfo.get("totalPageNo")),t=parseInt($(this).data("target"));if(0==t)return!1;t=App.CommonUtilController.checkNumber(t,1,1/0),t&&t>e&&(t=1),t&&(App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_content",t),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(t)},0)),i.closeContentDiv()})}if("acti-mobile-search-content"!=e||s.hasClass("loaded")||(s.addClass("loaded"),$("#sidebar_empty_icon").on("click",function(){$("#sidebar_search_input").val("")}),$("#sidebar_clean_button").on("click",function(e){if(e.preventDefault(),$(this).hasClass("disabled"))return!1;App.PdfUtilController.cleanPhraseMatch(!0),1==App.pdfInfo.get("compatibleFlg")&&(App.PdfUtilController.clearCanvasRect(),App.PdfUtilController.showCanvasFlg=!1,App.PdfUtilController.keywordsArr=[],App.PdfUtilController.keywordsArr.length=0,App.PdfUtilController.rectArr=[],App.PdfUtilController.rectArr.length=0,App.PdfUtilController.clearRectFlg=!0,App.PdfUtilController.clearBtnFlg=!0,i.compatibleSeaching=!1),$("#acti-search-content-view").html(""),$("#sidebar_search_input").val(""),App.pdfInfo.set("searchValueArr",t.default.A()),App.searchViewerController.set("searchValueArr",t.default.A()),$(this).addClass("disabled"),$("#acti_search_resultNum_div").text(""),App.searchViewerController.cleanupQueue()}),$("#acti-mobile-search-content div.acti-search-result").on("scroll",function(){var e=$(this).height();$(this).scrollTop()>.5*($("#acti-search-content-view").height()-e)&&function(){var e=function(){for(var e=$("#acti-search-content-view > li").length,t=App.searchViewerController.get("matchResultArray"),n=e;n<e+20;n++)t[n]&&$("#acti-search-content-view").append(t[n])};clearTimeout(window.search_content_sroll),window.search_content_sroll=setTimeout(function(){e()},200)}()})),"acti-mobile-toc-content"==e&&!s.hasClass("loaded")){s.addClass("loaded");var f=App.pdfInfo.get("totalPageNo"),v=App.pdfInfo.get("direction"),b=App.pdfInfo.get("spread_mode"),x=App.pdfInfo.get("hasCover"),A=App.pageConfig.get("prefixCanvas_Toc"),C=$("#acti-mobile-toc-content > div");C.addClass("spread_mode_"+b);var k;k=x&&"rtl"==v||!x&&"ltr"==v?1:0;for(var d=1;d<=f;d++){var h=$("<div class='page_group'></div>").attr("pageno",d);d%2===k?h.addClass("page-left"):h.addClass("page-right");var w=$('<div class="thumbnail" id="'+A+d+'" pageno="'+d+'"><img class=""/></div>')[0];h.append(w),"ltr"===v?C.append(h):C.prepend(h)}var P=App.pdfInfo.get("first_width"),y=App.pdfInfo.get("first_height"),U=Math.floor(P*(92/y));$("#acti-mobile-toc-content div.thumbnail").width(U),$("#acti-mobile-toc-content div.page_group").on("click",function(){var e=parseInt($(this).attr("pageno"));e||(e=1),$("#acti-mobile-toc-content div.page_group.active").removeClass("active");var t=App.TurnUtilController.getCurrentPagenos();$.each(t,function(){$("#"+A+this).parents("div.page_group:first").addClass("active")}),App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_thumbnail",e),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(e)},0)}),App.TurnUtilController.binkSelectedAndPosition(),$("#acti-mobile-toc-content > div").on("touchmove.top",function(e,t){i.mousewheel_loadToc_mobile($("#acti-mobile-toc-content > div"))}),i.mousewheel_loadToc_mobile($("#acti-mobile-toc-content > div"))}if("acti-mobile-share-content"==e){if(!$(".acti-mobile-share-content-url-button").hasClass("loaded")){$(".acti-mobile-share-content-url-button").addClass("loaded");new Clipboard(".acti-mobile-share-content-url-button").on("success",function(){$(".acti-mobile-share-content-url-title").fadeOut(500,function(){$(".acti-mobile-share-content-url-title").fadeIn()})})}var I=App.pdfInfo.get("shareUrl_Facebook");$("div.share_button_facebook").data("current-share-url",I);var T=App.pdfInfo.get("shareUrl_twitter");$("div.share_button_twitter").data("current-share-url",T);var S=App.pdfInfo.get("shareUrl_LINE"),L=$('<div><div data-type="share-d" data-lang="ja" class="line-it-button" data-url="'+S+'"></div></div>');$("#share_line_div_sd_id").append(L),$("div.line-it-button").data("current-share-url",S);try{LineIt.loadButton()}catch(e){}L.prevAll("div").remove();var M=App.pdfInfo.get("shareUrl_QRcode");$(".acti-mobile-share-content-url-button").attr("data-clipboard-text",M),$("div.QRcode_img_mobile",N).html("");var N=$("#acti-mobile-share-content");new QRCode($("div.QRcode_img_mobile",N)[0],{width:111,height:111,correctLevel:QRCode.CorrectLevel.L}).makeCode(M)}"acti-mobile-painter-content"==e?(s.hasClass("loaded")||(s.addClass("loaded"),App.PainterUtilController.resetPainterPenType(App.PainterUtilController.painterControl.penType),$("#acti-mobile-painter-content input.colorpicker").spectrum({showPaletteOnly:!0,hideAfterPaletteSelect:!0,color:App.PainterUtilController.painterControl.lineColor,maxSelectionSize:8,theme:"acti-sd-pen-color",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]],change:function(e){App.PainterUtilController.painterControl.lineColor=e.toHexString()},show:function(e){$("#acti-mobile-painter-content .acti-mobile-painter-content-color-box").addClass("acti-color-active")},hide:function(e){$("#acti-mobile-painter-content .acti-mobile-painter-content-color-box").removeClass("acti-color-active")}}),$("#acti-mobile-painter-content input.colorpicker").off("reflow.spectrum"),$("#acti-mobile-painter-content input.colorpicker").on("reflow.spectrum",function(){$("div.sp-palette-container").removeClass("sp-palette-container-border-top").addClass("sp-palette-container-border-bottom")}),App.CommonUtilController.setTapEvent("#acti-mobile-painter-content div.acti-mobile-painter-content-curve"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-curve").on("tapOne",function(){$("#acti-mobile-painter-content div.acti-mobile-painter-content-straightline").removeClass("acti-active"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-curve").addClass("acti-active"),App.PainterUtilController.painterControl.mode=Painter.MODE_PAINTER}),App.CommonUtilController.setTapEvent("#acti-mobile-painter-content div.acti-mobile-painter-content-straightline"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-straightline").on("tapOne",function(){$("#acti-mobile-painter-content div.acti-mobile-painter-content-curve").removeClass("acti-active"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-straightline").addClass("acti-active"),App.PainterUtilController.painterControl.mode=Painter.MODE_STRAIGHT}),App.CommonUtilController.setTapEvent("#acti-mobile-painter-content div.acti-mobile-painter-content-back"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-back").on("tapOne",function(){App.PainterUtilController.painterControl.undo();var e=App.PainterUtilController.painterControl.getCurrentTunnel();e&&e.length>0?$("#acti-mobile-painter-content div.acti-mobile-painter-content-back").removeClass("acti-inactive"):$("#acti-mobile-painter-content div.acti-mobile-painter-content-back").addClass("acti-inactive")}),App.CommonUtilController.setTapEvent("#acti-mobile-painter-content div.acti-mobile-painter-content-lineWidth"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-lineWidth").on("tapOne",function(){if($("input.colorpicker").spectrum("hide"),$("div.acti-painter-lineWidth-dialog").length>0)return $(this).removeClass("acti-lineWidth-active"),void $("div.acti-painter-lineWidth-dialog").remove();$(this).addClass("acti-lineWidth-active");var e=$("<div></div>");e.append('<div type="1" class="acti-painter-sd-lineWidth-option acti-painter-sd-lineWidth-option-1"></div>'),e.append('<div type="2" class="acti-painter-sd-lineWidth-option acti-painter-sd-lineWidth-option-2"></div>'),e.append('<div type="3" class="acti-painter-sd-lineWidth-option acti-painter-sd-lineWidth-option-3"></div>'),e.append('<div type="4" class="acti-painter-sd-lineWidth-option acti-painter-sd-lineWidth-option-4"></div>');var t=App.PainterUtilController.painterControl.penType;$("div.acti-painter-sd-lineWidth-option-"+t,e).addClass("acti-active");var n=$('<div class="acti-painter-lineWidth-dialog acti-painter-sd-lineWidth-dialog"></div>');n.append(e),e.addClass("acti-painter-lineWidth-box-border-bottom");var i=$("#acti-mobile-painter-content .acti-painter-lineWidth-icon").offset();n.css({left:i.left-8+"px",top:i.top-196+"px"}),$("body").append(n),$(document).off("touchstart.selectLineWidth touchend.selectLineWidth"),$(document).on("touchstart.selectLineWidth touchend.selectLineWidth",function(e){if("touchend"==e.type){if($(e.target).hasClass("acti-painter-sd-lineWidth-option")){var t=$(e.target).attr("type");App.PainterUtilController.resetPainterPenType(t)}$("#acti-mobile-painter-content div.acti-mobile-painter-content-lineWidth").removeClass("acti-lineWidth-active"),$("div.acti-painter-lineWidth-dialog").remove(),$(document).off("touchstart.selectLineWidth touchend.selectLineWidth")}else $(e.target).hasClass("acti-painter-sd-lineWidth-option")||0!=$(e.target).closest("div.acti-mobile-painter-content-lineWidth").length||($("#acti-mobile-painter-content div.acti-mobile-painter-content-lineWidth").removeClass("acti-lineWidth-active"),$("div.acti-painter-lineWidth-dialog").remove(),$(document).off("touchstart.selectLineWidth touchend.selectLineWidth"))})}),App.CommonUtilController.setTapEvent("#acti-mobile-painter-content div.acti-mobile-painter-content-clear"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-clear").on("tapOne",function(){var e=function(){App.PainterUtilController.painterControl.clearHistory();for(var e=App.TurnUtilController.getCurrentPagenos(),t=0;t<e.length;t++)App.StorageUtilController.setPenByPageno(e[t],""),App.PainterUtilController.resetDrawPagePen();$("#painter_dialog div.acti-painter-back").addClass("acti-inactive")};App.JspanelUtilController.showConfirmJspanel(App.i18n.painter_mobile_clear_painter_text,e)})),a&&a===n?App.PainterUtilController.penIsActive&&(App.PainterUtilController&&App.PainterUtilController.getCanvasImgAndSaveStorage(!0),"acti-mobile-painter-button"===n&&l?App.PainterUtilController.setPainterLayer_activeState(!1,"refreshMemo"):App.PainterUtilController.setPainterLayer_activeState(!1)):App.PainterUtilController.setPainterLayer_activeState(!0),App.PublicUtilController.setColorBoxPosition()):(App.PainterUtilController&&App.PainterUtilController.getCanvasImgAndSaveStorage(!0),App.PainterUtilController.setPainterLayer_activeState(!1,"refreshMemo")),"acti-mobile-memo-content"==e?0!=$("div.jsPanel-theme-mobile-memo-select-list").length?$("div.jsPanel-theme-mobile-memo-select-list .jsPanel-btn-close").trigger("click"):(App.MemoUtilController.memoIsCreateState&&$("#"+n).addClass("active"),App.JspanelUtilController.showMemoSelectJspanel_mobile()):$("div.jsPanel-theme-mobile-memo-select-list .jsPanel-btn-close").trigger("click")}},closeMenu_mobile_content:function(){$(".acti-mobile-menu-button").show(),$("#acti-mobile-menu-content").hide(),App.PainterUtilController.penIsActive&&(App.PainterUtilController&&App.PainterUtilController.getCanvasImgAndSaveStorage(!0),App.PainterUtilController.setPainterLayer_activeState(!1,"refreshMemo")),$("#memo_select_dialog").length>0&&$("#memo_select_dialog .jsPanel-btn-close").trigger("click")},openMenu_mobile_content:function(){$("#acti-header-container a").removeClass("active"),$("#acti-mobile-toc-content, #acti-mobile-hamburger-content, #acti-mobile-search-content, #acti-mobile-share-content, #acti-mobile-painter-content, #acti-mobile-memo-content").hide(),$("#acti-mobile-menu-content").show(),$(".acti-mobile-menu-button").hide(),$("div.memo-create-title-box").is(":visible")&&$("#acti-mobile-memo-button").addClass("active")},openApp:function(){var e=App.pdfInfo.get("callAppUrl");if(e){e+="&isAndSearch="+App.PublicUtilController.getSearchType(),e=App.PublicUtilController.updateCallAppKeyword(e),e=e+"&siteNum="+App.pdfInfo.get("siteNum")+"&siteTitle="+App.pdfInfo.get("siteTitle");var t=window.top.location.hostname,n="https://"+t+"/content/call_app?callAppUrl="+BASE64.encoder(encodeURI(e));window.top.open(n)}},openTwitter:function(){var e=$("div.share_button_twitter").data("current-share-url");window.open(e)},openFacebook:function(){var e=$("div.share_button_facebook").data("current-share-url");window.open(e)},copy_url:function(){device.ios()},hideShareContent:function(){$("#acti-mobile-share-content").hide()}}})}),define("one-book/controllers/pc",["exports","ember"],function(e,t){e.default=t.default.Controller.extend({bookTitle:App.pdfInfo.get("contentTitle"),bookTotalPageNo:App.pdfInfo.get("totalPageNo"),sidewrap__thumbnail__text:App.i18n.pc_sidewrap__thumbnail__text,sidewrap__contents__text:App.i18n.pc_sidewrap__contents__text,sidewrap__mome__text:App.i18n.pc_sidewrap__mome__text,toolbar__search__placeholder:App.i18n.pc_toolbar__search__placeholder,toolbar__zoom_in__text:App.i18n.pc_toolbar__zoom_in__text,toolbar__zoom_out__text:App.i18n.pc_toolbar__zoom_out__text,toolbar__pen__text:App.i18n.pc_toolbar__pen__text,toolbar__memo__text:App.i18n.pc_toolbar__memo__text,toolbar__cut__text:App.i18n.pc_toolbar__cut__text,toolbar__cut__save:App.i18n.pc_toolbar__cut__save,toolbar__cut__cancel:App.i18n.pc_toolbar__cut__cancel,toolbar__print__text:App.i18n.pc_toolbar__print__text,right_sidebar__share__text:App.i18n.pc_right_sidebar__share__text,right_sidebar__full_srceen__text:App.i18n.pc_right_sidebar__full_srceen__text,right_sidebar__print__text:App.i18n.pc_right_sidebar__print__text,share_dialog__title__text:App.i18n.pc_share_dialog__title__text,share_dialog__copy_button__text:App.i18n.pc_share_dialog__copy_button__text,embed_share_dialog__title__text:App.i18n.pc_embed_share_dialog__title__text,embed_share_dialog__copy_button__text:App.i18n.pc_embed_share_dialog__copy_button__text,footer__normal_button__text:App.i18n.pad_footer__normal_button__text,bottom_Choice_print_left:App.i18n.pc_bottom_Choice_print_left,bottom_Choice_print_right:App.i18n.pc_bottom_Choice_print_right,bottom_Choice_print_double:App.i18n.pc_bottom_Choice_print_double,bottom_Choice_print_whole:App.i18n.pc_bottom_Choice_print_whole,bottom_Choice_print_current:App.i18n.pc_bottom_Choice_print_current,print_title_text:App.i18n.pc_print_title_text,tab_toc:!0,tab_hamburger:!1,tab_mome:!1,treeObj:null,treeData:[],expendTreeNode:[],init:function(){function e(){App.PdfUtilController.cleanPhraseMatch(!0),1==App.pdfInfo.get("compatibleFlg")&&(App.PdfUtilController.clearCanvasRect(),App.PdfUtilController.showCanvasFlg=!1,App.PdfUtilController.keywordsArr=[],App.PdfUtilController.keywordsArr.length=0,App.PdfUtilController.rectArr=[],App.PdfUtilController.rectArr.length=0,App.PdfUtilController.clearRectFlg=!0),$("#search_dialog").hide(),$("#acti-search-content-view").html(""),$("#sidebar_search_input").val(""),App.pdfInfo.set("searchValueArr",t.default.A()),App.searchViewerController.set("searchValueArr",t.default.A()),$("#acti_search_resultNum_div").text(""),$("#acti_search_value").text(""),$("#acti-sidebar-search-content-title div").hide(),App.searchViewerController.cleanupQueue()}App.KinesisLogUtilController.isApp=!1;var n=this,i=$(window).width(),o=$(window).height();setInterval(function(){i==$(window).width()&&o==$(window).height()||(i=$(window).width(),o=$(window).height(),clearTimeout(window.windowResize_page),window.windowResize_page=setTimeout(function(){if(App.CommonUtilController.isFullscreenForNoScroll()?($("body").addClass("fullScreen_extend"),$("#fullScreen_extend_out").show()):($("body").removeClass("fullScreen_extend"),$("#fullScreen_extend_out").hide(),
$("#sidebar_full_srceen .oneviewer-viewer_right_minimize").removeClass("oneviewer-viewer_right_minimize").addClass("oneviewer-viewer_right_maximize")),App.PublicUtilController.window_resize(),$(".extend_sidebar_buttons_larger.extend_sidebar_buttons_active").length>0&&window.parent&&window.parent.resizeParentSize&&window.parent.resizeParentSize("in"),$("#capture_img").length>0){var e,t,n=$("#capture_img").width(),i=$("#capture_img").height(),o=$("#capture_div_box .capture-div-box-bg").width()-166,a=$("#capture_div_box .capture-div-box-bg").height(),l=1,r=n,s=i;t=o/r,e=a/s,l=t<=e?t:e,r*=l,s*=l,$("#capture_div_box .capture_div").css({width:r,height:s,top:(a-s)/2+"px",left:(o-r+166)/2+"px"}),$("#capture_div_box .capture_div").css("transform",""),window.cropper_img_obj.destroy();var c=new Cropper($("#capture_img")[0],{viewMode:1,scalable:!1,zoomable:!1,toggleDragModeOnDblclick:!1});window.cropper_img_obj=c}},100))},100),$(window).resize(function(e){clearTimeout(window.windowResize_page),window.windowResize_page=setTimeout(function(){if(App.CommonUtilController.isFullscreenForNoScroll()?($("body").addClass("fullScreen_extend"),$("#fullScreen_extend_out").show()):($("body").removeClass("fullScreen_extend"),$("#fullScreen_extend_out").hide(),$("#sidebar_full_srceen .oneviewer-viewer_right_minimize").removeClass("oneviewer-viewer_right_minimize").addClass("oneviewer-viewer_right_maximize")),App.PublicUtilController.window_resize(),$(".extend_sidebar_buttons_larger.extend_sidebar_buttons_active").length>0&&window.parent&&window.parent.resizeParentSize&&window.parent.resizeParentSize("in"),$("#capture_img").length>0){var e,t,n=$("#capture_img").width(),i=$("#capture_img").height(),o=$("#capture_div_box .capture-div-box-bg").width()-166,a=$("#capture_div_box .capture-div-box-bg").height(),l=1,r=n,s=i;t=o/r,e=a/s,l=t<=e?t:e,r*=l,s*=l,$("#capture_div_box .capture_div").css({width:r,height:s,top:(a-s)/2+"px",left:(o-r+166)/2+"px"}),$("#capture_div_box .capture_div").css("transform",""),window.cropper_img_obj.destroy();var c=new Cropper($("#capture_img")[0],{viewMode:1,scalable:!1,zoomable:!1,toggleDragModeOnDblclick:!1});window.cropper_img_obj=c}},100)}),$(document).on("click","#acti-search-content-view > li",function(e){e.preventDefault(),App.PublicUtilController.click_searchResult_event(this)}),$(document).on("click","#book_main div.link-layer div.linkBlock",function(e){e.preventDefault(),App.PublicUtilController.click_link_event(this)}),$(document).on("keydown.gotoPage","#goto_page_input",function(e){if(13==(document.all?window.event:e).keyCode){var t=$.trim($(this).val()),n=t.replace(/(^\s*)|(\s*$)/g,"");if(n=n.replace(/　/g,""),!t||!n)return;var i=App.TurnUtilController.setTargetByPage(t);App.TurnUtilController.gotoPageByTarget(i);for(var o=App.TurnUtilController.getCurrentPagenos(),a=0;a<o.length;a++)if(Number(i)===Number(o[a])){var l=App.TurnUtilController.updateTurnCurrPage(o[0]);$(this).val(l)}$(this).blur(),App.CommonUtilController.gotoTop_parent()}}),$(document).on("keyup.search clickSearch","#sidebar_search_input",function(t){var i=document.all?window.event:t;if(13!=i.keyCode&&"clickSearch"!=i.type||!$(this).val())13!=i.keyCode&&"clickSearch"!=i.type||$(this).val()||e();else{$(this).blur(),App.CommonUtilController.gotoTop_parent();var o=$(this).val(),a=$(this).val().split(/[ |　]+/g),l=App.pdfInfo.get("searchValueArr");if(App.pdfInfo.get("isMatchByPage")&&a.join(",")==l.join(","))return App.PublicUtilController.closeOtherDialog_pc("search"),$("#search_dialog").show(),!1;App.pdfInfo.set("searchValueArr",a);if("1"==App.pdfInfo.get("compatibleFlg")){var r=parseInt(App.pdfInfo.get("totalPageNo"));$("#search_dialog").css({"z-index":Number(r+5250),display:"block"}),App.PdfUtilController.showCanvasFlg=!0,App.PdfUtilController.searchFromXml(),App.PdfUtilController.highlightSearchResult()}else{n.toggleSearchContentDiv(),App.PdfUtilController.cleanPhraseMatch(!0),$("#acti-search-content-view").html("");var s=App.TurnUtilController.getCurrentPagenos();$.each(s,function(){App.PdfUtilController.calcFindPhraseMatch(this)}),App.searchViewerController.pdfSearching()}App.KinesisLogUtilController.searchKeyword=o,App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("search",""),App.KinesisLogUtilController.sendReadingProcessAwsKinesisLog_Add("","search","","",""),$("#sidebar_clean_button").removeClass("disabled")}}),$(document).on("openSearchContent","#sidebar_search_input",function(e){n.toggleSearchContentDiv()}),$(document).on("click","#sidebar_circle_button",function(t){e()}),$(document).on("keydown",function(e){var e=e||window.event||arguments.callee.caller.arguments[0];if(e&&122==e.keyCode)return e.preventDefault(),!1}),$(document).on("click","#sidebar_zoom_in, #sidebar_zoom_out",function(e){if(window.pageTurning)return!1;var t=$(this).data("type"),n=Math.round(App.pdfInfo.get("currentZoomScale"))||1,i=App.pdfInfo.get("zoomScale_max"),o=App.pdfInfo.get("zoomScale_list");if("out"===t){if(1===n)return!1;for(var a=o.length-1;a>=0;a--)if(o[a]<n){n=o[a];break}}else if(n>=i||n<=0)n=1;else for(var a=0;a<o.length;a++)if(o[a]>n){n=o[a];break}App.PdfUtilController.pdfViewZoomFun(e,n),App.PdfUtilController.changeCanvasRect()});var a=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);$(document).on("mouseenter","div.sidebar-button",function(){device.desktop()&&!a&&$(".tooltips_left",this).show()}),$(document).on("mouseleave","div.sidebar-button",function(){$(".tooltips_left",this).hide()}),$(document).on("mouseenter","div.toolbar_button",function(){var e="",t=App.pdfInfo.get("direction"),n=$(this);"ltr"===t?n.hasClass("toolbar-first")?e=App.i18n.pc_toolbar__first__text:n.hasClass("toolbar-previous")?e=App.i18n.pc_toolbar__previous__text:n.hasClass("toolbar-next")?e=App.i18n.pc_toolbar__next__text:n.hasClass("toolbar-last")&&(e=App.i18n.pc_toolbar__last__text):n.hasClass("toolbar-first")?e=App.i18n.pc_toolbar__last__text:n.hasClass("toolbar-previous")?e=App.i18n.pc_toolbar__next__text:n.hasClass("toolbar-next")?e=App.i18n.pc_toolbar__previous__text:n.hasClass("toolbar-last")&&(e=App.i18n.pc_toolbar__first__text),device.desktop()&&(e&&$(".tooltips_top",this).text(e),$(".tooltips_top",this).show())}),$(document).on("mouseleave","div.toolbar_button",function(){$(".tooltips_top",this).hide()}),window.showShareContent=function(){n.get("actions").showSharedialog()},window.triggerFullScreenFun=function(e){n.get("actions").fullScreenFun_extend(e)},window.showPrintDialogContent=function(){n.get("actions").showPrintDialog()},window.openApp=function(){n.get("actions").openApp()},window.initSidebar_mome_pc=function(){n.initSidebar_mome()},this.memoEventBind(),setTimeout(function(){n.initSidebar_toc(),n.initSidebar_hamburger(),n.initSidebar_mome()},500)},actions:{momeListOpenFun:function(e){var t=$("div.acti-sideblock");if(t.hasClass("sidebar-unfold"));else{t.addClass("sidebar-unfold"),t.animate({marginLeft:0});var n=$("#acti-sidebar-toc-content");n.hasClass("loaded")||n.addClass("loaded")}e.get("actions").toggle_sidebar_content("acti-sidebar-mome-button",e)},unfold_toggle_sidebar:function(){var e=this,t=$("div.acti-sideblock");if(t.hasClass("sidebar-unfold"))t.animate({marginLeft:-t.width()},function(){t.removeClass("sidebar-unfold")});else{t.addClass("sidebar-unfold"),t.animate({marginLeft:0});for(var n=$(".acti-sidebar_toggle_button > div"),i="",o=0;o<n.length;o++)if($(n[o]).hasClass("toggle_button_selected")){i=$(n[o]).attr("id");break}if($("div.acti-sidewrap-inner div.content_div").css("opacity",0).css("z-index",1).removeClass("loaded"),"acti-sidebar-toc-button"==i||""==i){var a=$("#acti-sidebar-toc-content");a.css("opacity",1).css("z-index",2),a.hasClass("loaded")||a.addClass("loaded")}else if("acti-sidebar-hamburger-button"==i){var l=$("#acti-sidebar-hamburger-content");l.css("opacity",1).css("z-index",2),l.hasClass("loaded")||l.addClass("loaded"),e.initSidebar_hamburger()}else if("acti-sidebar-mome-button"==i){var a=$("#acti-sidebar-mome-content");a.css("opacity",1).css("z-index",2),a.hasClass("loaded")||a.addClass("loaded")}}},toggle_sidebar_content:function(e,t){t=t||this;var n=$("#"+e);if(n.hasClass("toggle_button_selected"));else if($(".acti-sidebar_toggle_button > div").removeClass("toggle_button_selected"),n.addClass("toggle_button_selected"),$("div.acti-sidewrap-inner div.content_div").css("opacity",0).css("z-index",1).removeClass("loaded"),"acti-sidebar-toc-button"==e){$("#acti-sidebar-toc-content").css("opacity",1).css("z-index",2);var i=$("#acti-sidebar-toc-content");i.hasClass("loaded")||i.addClass("loaded")}else if("acti-sidebar-hamburger-button"==e){var o=$("#acti-sidebar-hamburger-content");o.css("opacity",1).css("z-index",2),o.hasClass("loaded")||o.addClass("loaded")}else if("acti-sidebar-mome-button"==e){var i=$("#acti-sidebar-mome-content");i.css("opacity",1).css("z-index",2),i.hasClass("loaded")||i.addClass("loaded")}},gotoPageByTarget:function(e){if("rtl"==App.pdfInfo.get("direction"))switch(e){case"first":e="last";break;case"last":e="first";break;case"next":e="previous";break;case"previous":e="next"}App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_page",e),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(e)},0)},fullScreenFun:function(){if("1"==App.pdfInfo.get("embed_flg")){var e=App.pdfInfo.get("contentDetailUrl");e&&window.open(e)}else if($("#sidebar_full_srceen .oneviewer-viewer_right_maximize").length>0){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen(),$("#sidebar_full_srceen .oneviewer-viewer_right_maximize").removeClass("oneviewer-viewer_right_maximize").addClass("oneviewer-viewer_right_minimize")}else $("#sidebar_full_srceen .oneviewer-viewer_right_minimize").length>0&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),$("#sidebar_full_srceen .oneviewer-viewer_right_minimize").removeClass("oneviewer-viewer_right_minimize").addClass("oneviewer-viewer_right_maximize"))},fullScreenFun_extend:function(e){if(App.CommonUtilController.isFirefox())"in"==e?$("#fullScreen_extend_out").show():($("#fullScreen_extend_out").hide(),window.parent.triggerFullScreenFun&&window.parent.triggerFullScreenFun());else if("in"==e){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen(),$("body").addClass("fullScreen_extend"),$("#fullScreen_extend_out").show()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),$("body").removeClass("fullScreen_extend"),$("#fullScreen_extend_out").hide()},showSharedialog:function(){if(!($("#confirm_dialog, #alert_dialog").length>0)){var e=$("#share_dialog"),t=134,n=134,i=App.pdfInfo.get("embed_flg");if("1"==i&&(e=$("#embed_share_dialog"),t=111,n=111),!$(".copy_button",e).hasClass("loaded")){new Clipboard(".copy_button").on("success",function(){var t=$("input",e);t.length>0&&($("input",e).select(),t[0].focus(),t[0].selectionStart=0,t[0].selectionEnd=t[0].value.length)}),$(".copy_button",e).addClass("loaded")}var o=parseInt(App.pdfInfo.get("totalPageNo"));App.PublicUtilController.closeOtherDialog_pc("share"),e.css("z-index",o+5250).show();var a=App.pdfInfo.get("shareUrl_Facebook");$("div.share_button_facebook",e).off("click"),$("div.share_button_facebook",e).on("click",function(e){e.preventDefault(),window.open(a,"popup","width=692,height=536,location=yes,resizable=yes,toolbar=no,menubar=no,scrollbars=no,status=no")});var l=App.pdfInfo.get("shareUrl_twitter");$("div.share_button_twitter").off("click"),$("div.share_button_twitter",e).on("click",function(e){e.preventDefault(),window.open(l,"twitter","width=550,height=420,location=yes,resizable=yes,toolbar=no,menubar=no,scrollbars=yes,status=no")});var r=App.pdfInfo.get("shareUrl_LINE"),s=$('<div><div data-type="share-c" data-lang="ja" class="line-it-button" data-url="'+r+'"></div></div>');$("#share_line_div_id",e).append(s);try{LineIt.loadButton()}catch(e){}s.prevAll("div").remove();var c=App.pdfInfo.get("shareUrl_QRcode");if($("div.QRcode_img",e).html(""),"1"==i){var p=new QRCode($("div.QRcode_img",e)[0],{width:111,height:111,correctLevel:QRCode.CorrectLevel.L});p.makeCode(c)}else{var p=new QRCode($("div.QRcode_img",e)[0],{width:t,height:n,correctLevel:QRCode.CorrectLevel.L});p.makeCode(c)}$("input",e).val(c),$(".copy_button",e).attr("data-clipboard-text",c)}},hideShareDialog:function(){$("#share_dialog").hide()},embedHideShareDialog:function(){$("#embed_share_dialog").hide()},clickPrintChoiceNone:function(){$("#SelectingPrintingDirection").hide()},showPenDialog:function(){App.PublicUtilController.closeOtherDialog_pc("pen"),App.JspanelUtilController.showPainterJspanel()},showMemoDialog:function(){App.PublicUtilController.closeOtherDialog_pc("memo"),App.JspanelUtilController.showMemoSelectJspanel_pc(this),App.MemoUtilController.isCurrentBookHasMemo()?$("#jumpToMemoList").show():$("#jumpToMemoList").hide()},showCutDialog:function(){var e;if(this,window.pageTurning)return void(window.sidebar_Cutting=!0);if(1==App.pdfInfo.get("currentZoomScale")){var n=App.TurnUtilController.getCurrentPagenos();$.each(n,function(){var e=$("#book_page_"+this).css("background-image"),t=e.substring(5,e.length-2),n=$("<img src='"+t+"'>");n.css("height","100%"),$("#book_page_"+this).append(n),$("#book_page_"+this).addClass("background-none")})}else window.sidebar_Cutting_loadimg=0;if(!window.bookCutting){window.bookCutting=!0,window.sidebar_Cutting=!1,$("video:visible").each(function(){var e,t,n,i,o,a,l;try{return e=document.createElement("canvas"),t=e.getContext("2d"),i=$(this).width(),n=$(this).height(),$(this)[0].videoWidth&&$(this)[0].videoHeight&&(i/n>$(this)[0].videoWidth/$(this)[0].videoHeight?i=n*$(this)[0].videoWidth/$(this)[0].videoHeight:i/n<$(this)[0].videoWidth/$(this)[0].videoHeight&&(n=i*$(this)[0].videoHeight/$(this)[0].videoWidth)),l=($(this).parent().height()-n)/2,a=($(this).parent().width()-i)/2,e.width=i,e.height=n,t.drawImage(this,0,0,i,n),o=e.toDataURL("image/png"),$(this).parent().append($("<img class='capture_video_img'/>").attr("src",o).css({"margin-top":l+"px","margin-left":a+"px"})),$(this).parent().css({background:"rgb(0, 0, 0)"}),$(this).addClass("video_hide").hide()}catch(e){console.info(e)}}),e=document.createElement("canvas"),t.default.$("#book_main").turn("stop");var n=App.TurnUtilController.getCurrentPagenos();html2canvas($("body")[0],{useCORS:!0,canvas:e,logging:!1,width:$(window).width(),height:$(window).height()-43,ignoreElements:function(e){if($(e).hasClass("page-wrapper")){var t=$(e).attr("page");if(!(n.indexOf(+t)>-1))return!0}else if("VIDEO"===e.nodeName||"AUDIO"===e.nodeName||"search_dialog"===$(e).attr("id")||"share_dialog"===$(e).attr("id")||"embed_share_dialog"===$(e).attr("id")||"load_pdf_progress"===$(e).attr("id")||"sidebar_main"===$(e).attr("id")||"toolbar_main"===$(e).attr("id")||"right_sidebar_main"===$(e).attr("id")||$(e).hasClass("jsPanel-theme-pc-painter")||$(e).hasClass("jsPanel-theme-pc-memo-select-list"))return!0}}).then(function(e){var t,n,i,o,a,l,r,s,c,p;o=e.width,i=e.height,n=Math.min($("#book_main").width(),$("#index_main > div.pack_book_div").width()),t=Math.min($("#book_main").height(),$("#index_main > div.pack_book_div").height()),l=0,r=0,n<$(window).width()?(s=n*(window.devicePixelRatio||1),o>n&&(l=(o-s)/2)):s=$(window).width()*(window.devicePixelRatio||1),t<$(window).height()?(a=t*(window.devicePixelRatio||1),i>t&&(r=(i-a)/2)):a=$(window).height()*(window.devicePixelRatio||1);var d=$("<div id='capture_div_box'></div>").css({position:"absolute",width:"100%",height:"100%","z-index":99999,top:"1px",left:0,"box-sizing":"border-box","background-color":"rgb(204 204 204 / 50%)"});$("#book_main").width(),$("#index_main > div.pack_book_div").width(),d.append($("<div class='cropper-bg capture-div-box-bg'></div>").css({position:"relative",width:"100%",height:"calc(100% - 43px)",top:0,left:0})),$("body").append(d),$(".capture-div-box-bg",d).append($("<div class='capture_div'></div>").css({position:"absolute",width:s/(window.devicePixelRatio||1),height:a/(window.devicePixelRatio||1),top:Math.max($("#book_main")[0].offsetTop||0,$(".pack_book_div")[0].offsetTop||0),left:($(".capture-div-box-bg",d).width()-s/(window.devicePixelRatio||1))/2,margin:"auto","z-index":"2"}).append("<img id='capture_img'>")),c=document.createElement("canvas"),p=c.getContext("2d"),c.width=s,c.height=a,p.drawImage(e,l,r,s,a,0,0,s,a),$("#capture_img").width(s),$("#capture_img").height(a),$("#capture_img")[0].onload=function(){var e;e=new Cropper($("#capture_img")[0],{viewMode:1,scalable:!1,zoomable:!1,toggleDragModeOnDblclick:!1}),window.cropper_img_obj=e,$("#capture_div_box").append("<div class='capture_button'></div>"),$(".capture_button").append("<button class='capture_save'>"+App.i18n.pc_toolbar__cut__save+"</button>").append("<button class='capture_remove'>"+App.i18n.pc_toolbar__cut__cancel+"</button>"),$(".capture_save").on("click",function(e){if(!$(this).hasClass("cut-save-disable")){$(this).addClass("cut-save-disable");var t,n,i;n=window.cropper_img_obj.getCroppedCanvas(),t=n.toDataURL("image/png"),i=$("<img style=''/>")[0],i.onload=function(){i.width=this.width,i.height=this.height},i.src=t;var o=document.createElement("a");o.style.display="none",o.setAttribute("target","_blank"),o.setAttribute("download","actibookone_capture"),o.href=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),$(".capture_remove").trigger("click")}}),$(".capture_remove").on("click",function(){setTimeout(function(){$(".capture_video_img").remove(),$(".video_hide").removeClass("video_hide").show(),$("#capture_div_box").remove(),$(".background-none img").remove(),$(".background-none").removeClass("background-none"),window.cropper_img_obj&&window.cropper_img_obj.destroy(),window.cropper_img_obj=null,App.MemoUtilController.resetPageMemoList()},100)})},$("#capture_img")[0].src=c.toDataURL("image/png"),window.bookCutting=!1})}},showPrintDialog:function(){$("#confirm_dialog, #alert_dialog").length>0||(App.PublicUtilController.closeOtherDialog_pc("print"),App.JspanelUtilController.showPrintSelectJspanel())},hideSearchDialog:function(){$("#search_dialog").hide()},clickSearch:function(){$("#sidebar_search_input").trigger("clickSearch")},openApp:function(){var e=App.pdfInfo.get("callAppUrl");if(e){e+="&isAndSearch="+App.PublicUtilController.getSearchType(),e=App.PublicUtilController.updateCallAppKeyword(e),e=e+"&siteNum="+App.pdfInfo.get("siteNum")+"&siteTitle="+App.pdfInfo.get("siteTitle");var t=window.top.location.hostname,n="https://"+t+"/content/call_app?callAppUrl="+BASE64.encoder(encodeURI(e));window.top.open(n)}},resizeParentSize:function(e){if(window.parent&&window.parent.resizeParentSize){if(0==window.parent.resizeParentSize(e))return!1}$(".extend_sidebar_buttons_active").removeClass("extend_sidebar_buttons_active"),"in"==e?(App.CommonUtilController.gotoTop_parent(),$(".extend_sidebar_buttons_larger").addClass("extend_sidebar_buttons_active")):$(".extend_sidebar_buttons_normal").addClass("extend_sidebar_buttons_active")}},mousewheel_loadToc:function(e,t){clearTimeout(window.mousewheel_preloadingToc),window.mousewheel_preloadingToc=setTimeout(function(){var n=$("div.toc-page-group:first").height()+10,i=Math.abs(t)-2*n,o=Math.abs(t)+e.height()+2*n;$("div.toc-page-group").each(function(){var e=$(this).position().top;e>i&&e<o&&$("div.thumbnail:not(.loaded)",this).each(function(){var e=this,t=parseInt($(this).attr("pageno"));if(0!=t){var n=App.pdfInfo.url_Prefix,i=App.pdfInfo.url_Suffix,o=App.pageConfig.get("thumbnailPath"),a=App.pdfInfo.get("imgType")||App.pageConfig.pageImgType,l=encodeURI(n+o+t+a+i);$("img",e)[0].onload=function(){$(e).addClass("loaded"),device.mobile()||$(e).css("height","auto")},$("img",e)[0].onerror=function(){$(e).addClass("render_error").addClass("loaded"),$(e).html("<i class='oneviewer oneviewer-times-circle'></i>")},$("img",e).attr("src",l)}else $(e).addClass("loaded"),device.mobile()||$(e).css("height","auto")})})},500)},toggleSearchContentDiv:function(){var e=$("#acti-sidebar-search-content-list"),t=parseInt(App.pdfInfo.get("totalPageNo"));App.PublicUtilController.closeOtherDialog_pc("search"),$("#search_dialog").css("z-index",t+5250).show(),e.hasClass("loaded")||(e.addClass("loaded"),e.mCustomScrollbar({callbacks:{onScroll:function(){var t=e.height();Math.abs(this.mcs.top)>.5*($("#acti-search-content-view").height()-t)&&function(){var e=function(){for(var e=$("#acti-search-content-view > li").length,t=App.searchViewerController.get("matchResultArray"),n=e;n<e+20;n++)t[n]&&$("#acti-search-content-view").append(t[n])};clearTimeout(window.search_content_sroll),window.search_content_sroll=setTimeout(function(){e()},1e3)}()}}}))},initSidebar_mome:function(){var e=this,t=$("#acti-sidebar-mome-content"),n=t.find("div[class^='mCSB_container']");0!==n.length&&(t=n),t.empty();for(var i=parseInt(App.pdfInfo.get("totalPageNo")),o=[],a=0;a<i;a++)!function(e){var n=e+1,i=App.StorageUtilController.getMemoByPageno(n);(i||i.updateDate)&&$.each(i.memoData,function(){var e=(this.text||"").replaceAll("\n","&#13;"),i=this.text||"",a=App.TurnUtilController.getActualPageNumber(n),l=$("<div class='chapter' data='"+this.id+"' ></div>").append($('<textarea class="chapter_text memo-text-more text-book" disabled title="'+e+'" ></textarea>').val(i)).data("target",n).data("id",this.id);l.append($('<span class="chapter_target"></span>').text(a)),t.append(l),o.push(this)})}(a);$("#acti-sidebar-toc-button").show(),0===o.length?(e.tab_mome=!1,$("#acti-sidebar-mome-button").hide(),e.tab_hamburger||$("#acti-sidebar-toc-button").hide()):(e.tab_mome=!0,$("#acti-sidebar-mome-button").show()),t.find("> div").on("click",function(){var e=$(this).attr("data"),t=parseInt($(this).data("target"));if(0==t)return!1;(t=App.CommonUtilController.checkNumber(t,1,1/0))&&function(){var n=App.StorageUtilController.getMemoByPagenoAndId(t,e),i=App.MemoUtilController.getCurrentMemoListMaxLayer();n.foldStatus=0,n.layer=i+1,App.StorageUtilController.pushMemoData(t,n),App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_taglist",t),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(t,n)},0)}()}),t.mCustomScrollbar({callbacks:{onScroll:function(){e.mousewheel_loadToc(t,this.mcs.top)}}}),$("div.mCSB_scrollTools",t).is(":hidden")?$("div.mCSB_container",t).css("margin-right","0"):$("div.mCSB_container",t).css("margin-right","16px")},initSidebar_hamburger:function(){var e=this,t=$("#acti-sidebar-hamburger-content"),n=parseInt(App.pdfInfo.get("totalPageNo")),i=App.pdfInfo.get("chapterJsons"),o=[];t.empty();for(var a=0;a<i.length;a++){var l=i[a],r=13*parseInt(l.level),s=l.chapterTarget,c=l.target;s?"0"===s||!0===l.isShowPage||Number(s)<0?c="":s&&!1===l.isShowPage&&(c=s):c=0==l.target?"":l.target;var p=$("<div class='chapter'></div>").append($('<span class="chapter_text"></span>').text(l.title)).css("padding-left",r+"px").data("target",l.target);p.append($('<span class="chapter_target"></span>').text(c)),0===parseInt(l.level)&&p.css("font-weight","bold"),t.append(p),o.push(l)}$("#acti-sidebar-toc-button").show(),0===o.length?(e.tab_hamburger=!1,$("#acti-sidebar-hamburger-button").hide(),e.tab_mome||$("#acti-sidebar-toc-button").hide()):(e.tab_hamburger=!0,$("#acti-sidebar-hamburger-button").show()),t.find("> div").on("click",function(){var e=parseInt($(this).data("target"));if(0==e)return!1;e=App.CommonUtilController.checkNumber(e,1,1/0),e&&e>n&&(e=1),e&&(App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_content",e),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(e)},0))}),t.mCustomScrollbar({}),$("div.mCSB_scrollTools",t).is(":hidden")?$("div.mCSB_container",t).css("margin-right","0"):$("div.mCSB_container",t).css("margin-right","16px")},initSidebar_toc:function(){var e=this,t=$("#acti-sidebar-toc-content"),n=App.pdfInfo.get("totalPageNo"),i=App.pdfInfo.get("spread_mode"),o=App.pdfInfo.get("direction"),a=App.pdfInfo.get("hasCover"),l=App.pageConfig.get("prefixCanvas_Toc"),r="pageUp-left",s="pageDown-right";"rtl"==o&&(r="pageUp-right",s="pageDown-left"),t.empty();for(var c=0;c<=n;c++){var p=$("<div class='toc-page-group'></div>");if("single"==i){0==c&&c++;var d=$('<div class="thumbnail" id="'+l+c+'" pageno="'+c+'"><img class="thumbnailImage"/></div>')[0];p.append(d)}else{0==a&&0==c&&c++;var d=$('<div class="thumbnail '+r+'" id="'+l+c+'" pageno="'+c+'"><img class="thumbnailImage"/></div>')[0];if(p.append(d),n!==c){c++;var d=$('<div class="thumbnail '+s+'" id="'+l+c+'" pageno="'+c+'"><img class="thumbnailImage"/></div>')[0];p.append(d)}}t.append(p)}var m=App.pdfInfo.get("first_width"),_=App.pdfInfo.get("first_height"),u=$("#acti-sidebar-toc-content div.thumbnail:first").width()-8,g=Math.floor(_*(u/m));$("#acti-sidebar-toc-content div.thumbnail").height(g),t.mCustomScrollbar({callbacks:{onScroll:function(){e.mousewheel_loadToc($("#acti-sidebar-toc-content"),this.mcs.top)}}}),$("div.mCSB_scrollTools",t).is(":hidden")?$("div.mCSB_container",t).css("margin-right","0"):$("div.mCSB_container",t).css("margin-right","16px"),$("#acti-sidebar-toc-content div.thumbnail").on("click",function(){var e=parseInt($(this).attr("pageno"));e||(e=1),$("#acti-sidebar-toc-content div.thumbnail.active").removeClass("active"),$(this).parents(".toc-page-group:first").find("div.thumbnail[pageno!='0']").addClass("active"),App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_thumbnail",e),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(e)},0)}),App.TurnUtilController.binkSelectedAndPosition(),e.mousewheel_loadToc($("#acti-sidebar-toc-content"),0)},showTabContent:function(e){$("div.acti-sidewrap-inner div.content_div").css("opacity",0).css("z-index",1),$("#"+e).css("opacity",1).css("z-index",2)},memoEventBind:function(){$(document).on("click.changeEditMode","i.acti-memo-link-button-unfold-icon, div.acti-memo-link-button-edit",function(){var t=$(this).parents("div.jsPanel:first");if(t&&t.length){var n=$(t).attr("pageno"),i=$(t).attr("id"),o=App.StorageUtilController.getMemoByPagenoAndId(n,i);$(t).hasClass("link-state-edit")?(o&&o.linkDetail?(o.linkType==App.pageConfig.memo_link_type_outlink?($(t).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-outlink"),$("div.acti-memo-link-content-text",t).text(o.linkDetail)):($(t).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-inlink"),$("div.acti-memo-link-content-text",t).text(App.i18n.getMemoInlinkContentJointText(o.linkDetail))),$("div.acti-memo-link-content-text",t).data({"link-type":o.linkType,"link-detail":o.linkDetail})):($(t).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-notset"),$("div.acti-memo-link-content-text",t).text("")),$("div.acti-memo-link-content-inlink",t).hide(),$("div.acti-memo-link-content-outlink",t).hide()):($(t).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-edit"),$("div.acti-memo-link-content-button-radio",t).removeClass("checked"),o&&o.linkType==App.pageConfig.memo_link_type_outlink?($("div.acti-memo-link-content-inlink",t).hide(),$("div.acti-memo-link-content-outlink",t).show(),$("div.acti-memo-link-content-button-radio:eq(1)",t).addClass("checked"),$("div.acti-memo-link-content-outlink > textarea",t).val(o.linkDetail)):($("div.acti-memo-link-content-outlink",t).hide(),$("div.acti-memo-link-content-inlink",t).show(),$("div.acti-memo-link-content-button-radio:eq(0)",t).addClass("checked"),$("select.acti-memo-link-content-inlink-page-num",t).val(o.linkDetail),e(t,o.linkDetail)))}}),$(document).on("click.changeLinkType","div.acti-memo-link-content-button-radio",function(){var e=$(this).parents("div.jsPanel:first");if(e&&e.length){$("div.acti-memo-link-content-button-radio",e).removeClass("checked"),$(this).addClass("checked");$(this).attr("type")==App.pageConfig.memo_link_type_inlink?($("div.acti-memo-link-content-outlink",e).hide(),$("div.acti-memo-link-content-inlink",e).show()):($("div.acti-memo-link-content-inlink",e).hide(),$("div.acti-memo-link-content-outlink",e).show())}});var e=function(e,t){if(t){var n=App.pdfInfo.url_Prefix,i=App.pdfInfo.url_Suffix,o=App.pageConfig.get("thumbnailPath"),a=App.pdfInfo.get("imgType")||App.pageConfig.pageImgType,l=encodeURI(n+o+t+a+i);$("div.acti-memo-link-content-inlink-img",e).css("background-image","url("+l+")")}};$(document).on("change",".acti-memo-link-content-inlink-page-num",function(){var t=$(this).parents("div.jsPanel:first");if(t&&t.length){var n=$(this).val();e(t,n);var i=$(t).attr("pageno"),o=$(t).attr("id"),a=App.StorageUtilController.getMemoByPagenoAndId(i,o);a.linkType=App.pageConfig.memo_link_type_inlink,a.linkDetail=n,App.StorageUtilController.pushMemoData(i,a),$("div.acti-memo-link-content-outlink > textarea",t).val("")}}),$(document).on("click.changeInlinkMinus","div.acti-memo-link-content-text",function(e){var t=parseInt(App.pdfInfo.get("totalPageNo")),n=$(this).parents("div.jsPanel:first");if(n&&n.length){var i=$(this).data("link-type"),o=$(this).data("link-detail");if(i==App.pageConfig.memo_link_type_inlink)Number(o)>t&&(o=t,$(this).data("link-detail",o)),App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_tag",t),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(o)},0);else if(i==App.pageConfig.memo_link_type_outlink){if(o.match(/^(http|https):\/\//i)||o.match(/^(tel|mailto):/i))window.open(o);else try{window.open("http://"+o)}catch(e){window.open(o)}}}}),$(document).on("blur.changeOutlink","div.acti-memo-link-content-outlink > textarea",function(e){var t=$(this).parents("div.jsPanel:first");if(t&&t.length){var n=$(this).val(),i=$(t).attr("pageno"),o=$(t).attr("id"),a=App.StorageUtilController.getMemoByPagenoAndId(i,o);a.linkType=App.pageConfig.memo_link_type_outlink,a.linkDetail=n,App.StorageUtilController.pushMemoData(i,a),$("select.acti-memo-link-content-inlink-page-num",t).val(""),$("div.acti-memo-link-content-inlink-img",t).css("background-image","")}}),$(document).on("click.cleanLinkInfo","div.acti-memo-link-button-clean",function(e){var t=$(this).parents("div.jsPanel:first");if(t&&t.length){var n=$(t).attr("id"),i=function(){var e=$("#"+n),t=$(e).attr("pageno"),i=App.StorageUtilController.getMemoByPagenoAndId(t,n);i.linkType="",i.linkDetail="",App.StorageUtilController.pushMemoData(t,i),$("select.acti-memo-link-content-inlink-page-num",e).val(""),$("div.acti-memo-link-content-inlink-img",e).css("background-image",""),$("div.acti-memo-link-content-outlink > textarea",e).val(""),$("div.acti-memo-link-content-button-radio",e).removeClass("checked"),$("div.acti-memo-link-content-button-radio:eq(0)",e).addClass("checked"),$("div.acti-memo-link-content-outlink",e).hide(),$("div.acti-memo-link-content-inlink",e).show(),$("div.acti-memo-link-content-text",e).is(":visible")&&($("div.acti-memo-link-content-text",e).text(""),$(e).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-notset"))};App.JspanelUtilController.showConfirmJspanel(App.i18n.memo_cleanLinkInfo_text,i)}}),$(document).on("blur.changeOutlink","div.acti-memo-text-box > textarea",function(e){
var t=$(this).parents("div.jsPanel:first");if(t&&t.length){var n=$(this).val(),i=$(t).attr("pageno"),o=$(t).attr("id"),a=App.StorageUtilController.getMemoByPagenoAndId(i,o);a.text=n,App.StorageUtilController.pushMemoData(i,a)}}),$(document).on("mousedown.resizeMemo",".jsPanel-btn-resize",function(e){var t=$(this).parents("div.jsPanel:first");if(t&&t.length){var n=App.pdfInfo.get("spread_mode"),i=$(t).attr("pageno"),o=$(t).attr("id"),a=App.StorageUtilController.getMemoByPagenoAndId(i,o),l=App.TurnUtilController.getBookSize(),r=$(t).position(),s=App.TurnUtilController.getCurrentPagenos(),c=0,p=l.height-r.top;c=1==s.length&&"double"==n?l.width/2-r.left:l.width-r.left,$(document).off("mousemove.resizeMemo"),$(document).on("mousemove.resizeMemo",function(n){$(t).addClass("resizeMemo-changing");var i=n.clientX-e.clientX,o=n.clientY-e.clientY,l=parseInt(a.width)+i,r=parseInt(a.height)+o;l>c&&(l=c),r>p&&(r=p),$(t).css({width:l+"px",height:r+"px"})}),$(document).off("mouseup.resizeMemo"),$(document).on("mouseup.resizeMemo",function(e){if($(t).hasClass("resizeMemo-changing")){var n=App.MemoUtilController.calcMemoSavePosition($(t).position()),o=$(t).width(),l=$(t).height();a.width=o+"px",a.height=l+"px",a.x=n.x,a.y=n.y,App.StorageUtilController.pushMemoData(i,a);var r=App.MemoUtilController.calcMemoShowAttribute(a,i);$(t).removeClass("link-animate"),$(t).css({left:r.left,top:r.top,transform:"",width:r.width,height:r.height})}$(t).removeClass("resizeMemo-changing"),$(document).off("mousemove.resizeMemo"),$(document).off("mouseup.resizeMemo")})}})}})}),define("one-book/controllers/pdf-core/book-viewer-controller",["exports","ember","one-book/models/pdf-page-view"],function(e,t,n){App.bookViewerController=t.default.Object.create({totalPageNo:0,pdfPageViewList:t.default.A(),renderingPages:{},renderingTime:null,renderingQueue:null,init:function(){this.renderingQueue=App.PdfMainController.renderingQueue,this.renderingQueue.pdfViewer=this,this.renderingPages={},this.totalPageNo=+App.pdfInfo.get("totalPageNo");for(var e=1;e<=this.totalPageNo;e++){var t={};t.id=e;var i=n.default.create(t);i.onBeforeDraw=function(){App.PdfCacheController.push(i)},this.renderingPages["p"+e]=i}},pdfPagesRendering:function(){var e=this;$.each(this.viewPagenos||[],function(){var t=this,n=e.renderingPages["p"+t];n&&(n.reset(),n._resetZoomLayer(!0))});for(var t=this.viewPagenos=App.TurnUtilController.getCurrentPagenos(),i=App.pdfInfo.get("currentZoomScale"),o=App.TurnUtilController.getPageSize(),a=0;a<t.length;a++){var l=t[a],r=this.renderingPages["p"+l];if(r);else{var s={};s.id=l,r=n.default.create(s)}r.div=$("#book_page_"+l)[0],r.page_rendering_scale=i,r.renderingState!=RenderingStates.FINISHED||r.div&&!r.div.getAttribute("data-loaded")?(r.reset(),r.renderingState=RenderingStates.INITIAL):o.width!=r.maxWidth||o.height!=r.maxHeight?(r.reset(),r.renderingState=RenderingStates.INITIAL):App.PdfUtilController.calcFindPhraseMatch(l),this.renderingPages["p"+l]=r}this.renderingQueue.renderHighestPriority()},pdfPagesZooming:function(){this.zoom_reset(),this.renderingQueue.renderHighestPriority()},zoom_reset:function(){for(var e=App.TurnUtilController.getCurrentPagenos(),t=App.pdfInfo.get("currentZoomScale"),n=0;n<e.length;n++){var i=e[n],o=this.renderingPages["p"+i];t!=o.page_zoom_scale?(o.page_rendering_scale=t,o.reset(),o.renderingState=RenderingStates.INITIAL):App.PdfUtilController.calcFindPhraseMatch(i),this.renderingPages["p"+i]=o}},forceRendering:function(){var e=this.renderingQueue.getHighestPriority(this.renderingPages,this.viewPagenos);return!!e&&(App.PdfMainController.forceRendering(e),!0)},rerenderFun_back:function(e){if(App.TurnUtilController.getCurrentPagenos()[0]!=e)return!1;var t=$("div.p-temporal > div");if(0==t.length)return!1;t.empty();var n=document.createElement("img");n.src=App.TurnUtilController.getPageImgByPageno(e),t.append(n).attr("pageno",e)}})}),define("one-book/controllers/pdf-core/pdf-cache-controller",["exports","ember"],function(e,t){App.PdfCacheController=t.default.Object.create({dataIndex:[],data:[],size:6,push:function(e){var t=e.id,n=this.dataIndex.indexOf(t);n>=0&&(this.data.splice(n,1),this.dataIndex.splice(n,1)),this.data.push(e),this.dataIndex.push(t),this.data.length>this.size&&(this.data.shift().cleanup(),this.dataIndex.shift())}})}),define("one-book/controllers/pdf-core/pdf-main-controller",["exports","ember"],function(e,t){App.PdfMainController=t.default.Object.create({pdfDocument:null,pdfWorker_search:null,pdfWorker_book_page:[],pdfWorker_thumbnail:null,renderingQueue:null,password:"",url_Prefix:"",url_Suffix:"",pdfsPath:"",errorReason:null,isLoaded:!1,init:function(){this.password=this.resetPassword(App.pdfInfo.password),this.url_Prefix=App.pdfInfo.url_Prefix,this.url_Suffix=App.pdfInfo.url_Suffix,this.pdfsPath=App.pageConfig.get("pdfsPath"),this.renderingQueue=App.renderingQueueController,this._pagesRequests=new WeakMap},loadPageLoadObj:function(e){function t(e){if(e){e.name;n.errorReason=e}}var n=this;if("1"==App.pdfInfo.get("compatibleFlg"))return!1;var i=AppOptions.getAll(OptionKind.WORKER);i.workerSrc="assets/js/pdf/build/pdf.worker-20230316190742.js";for(var o in i)pdfjsLib.GlobalWorkerOptions[o]=i[o];var a=Object.create(null);a.url=encodeURI(n.get("url_Prefix")+n.get("pdfsPath")+n.get("url_Suffix"));var l=AppOptions.getAll(OptionKind.API);l.cMapUrl="assets/js/pdf/web/cmaps/";for(var r in l){var s=l[r];a[r]=s}var c=pdfjsLib.getDocument(a);c.onPassword=function(e,t){if(t==pdfjsLib.PasswordResponses.NEED_PASSWORD)e(n.password);else if(t==pdfjsLib.PasswordResponses.INCORRECT_PASSWORD)return alert("Viewer Error!"),!1};var p=+App.pdfInfo.pdfSize;c.onProgress=function(e){if(p&&p>0){var t=(e.loaded/p*100).toFixed(2);$("#load_pdf_progress > div").css("width",t+"%")}},$("#load_pdf_progress").show(),c.promise.then(function(e){n.pdfDocument=e,n.isLoaded=!0,$("#load_pdf_progress > div").css("width","100%"),setTimeout(function(){$("#load_pdf_progress").hide()},500),App.bookViewerController.pdfPagesRendering();var t=App.pdfInfo.get("searchValueArr");t&&t.length&&$("#sidebar_search_input").trigger("loadedPdfSearch")},function(e){t(e)})},forceRendering:function(e){function t(){n.renderingQueue.renderView(e)}var n=this;if(!e||!this.pdfDocument)return!1;this._ensurePdfPageLoaded(e).then(function(n){e.pdfPage||e.setPdfPage(n),t()},function(n){e.error="load_error",t()})},_ensurePdfPageLoaded:function(e){var t=this;if(e.pdfPage)return Promise.resolve(e.pdfPage);if(this._pagesRequests.has(e))return this._pagesRequests.get(e);var n=this.pdfDocument.getPage(e.id).then(function(n){return e.pdfPage||e.setPdfPage(n),t._pagesRequests.delete(e),n}).catch(function(n){console.error("Unable to get page for page view",n),t._pagesRequests.delete(e)});return this._pagesRequests.set(e,n),n},resetPassword:function(e){return e=md5(e),e=md5(e),e=e.toLowerCase()}})}),define("one-book/controllers/pdf-core/pdf_rendering_queue",["exports","ember"],function(e,t){App.renderingQueueController=t.default.Object.create({pdfViewer:null,pdfSearchViewer:null,onIdle:null,highestPriorityPage:null,idleTimeout:null,printing:!1,viewPagenos:[],currentPagenos:[],setViewer:function(e){this.pdfViewer=e},isHighestPriority:function(e){return this.highestPriorityPage===e.renderingId},renderHighestPriority:function(){this.printing=!0,this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering()||this.pdfSearchViewer.forceRendering()||(App.PdfMainController.pdfWorker_search&&App.PdfMainController.pdfWorker_search.destroy(),App.PdfMainController.pdfWorker_thumbnail&&App.PdfMainController.pdfWorker_thumbnail.destroy(),this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT)),this.printing=!1)},getHighestPriority:function(e,t){if(!t)return!1;for(var n=0;n<t.length;n++){var i=t[n],o=e["p"+i];if(o&&!this.isViewFinished(o))return o}return null},isViewFinished:function(e){return e.renderingState===RenderingStates.FINISHED},renderView:function(e){var t=this,n=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),i=function(){if(t.printing=!1,t.renderHighestPriority(),"search"==e.loadType&&e.id==App.searchViewerController.totalPageNo){var i="";i=device.mobile()?App.i18n.sd_toolbar__search__result:App.i18n.pc_toolbar__search__result;var o=App.searchViewerController.get("matchResultArray"),a="";(device.mobile()||device.tablet()||n)&&(a="「"+App.pdfInfo.get("searchValueArr").join(" ")+"」"),$("#acti_search_resultNum_div").text(a+i+o.length+App.i18n.pc_toolbar__search__piece)}};if(e.error)return e.errorFun&&e.errorFun(),i(),!1;switch(e.renderingState){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=e.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=e.renderingId;try{e.draw().then(i,i)}catch(e){i()}}return!0}})}),define("one-book/controllers/pdf-core/search-viewer-controller",["exports","ember","one-book/models/pdf-search-view"],function(e,t,n){App.searchViewerController=t.default.Object.create({renderingPages_sreach:{},totalPageNo:0,renderingQueue:null,matchResultArray:t.default.A(),searchValueArr:t.default.A(),viewPagenos:[],searchPageNum:0,init:function(){this.renderingQueue=App.PdfMainController.renderingQueue,this.renderingQueue.pdfSearchViewer=this,this.totalPageNo=App.pdfInfo.get("totalPageNo");for(var e=1;e<=this.totalPageNo;e++)this.viewPagenos.push(e)},pdfSearching:function(e){var t=this;if(t.searchValueArr=App.pdfInfo.get("searchValueArr"),$("#acti_search_value").text(t.searchValueArr.join(" ")),$("#acti-sidebar-search-content-title div").show(),$("#acti_search_resultNum_div").text(App.i18n.pc_toolbar__search__Retrieval),!App.PdfMainController.isLoaded)return!1;this.renderingPages_sreach={};for(var i=0;i<this.totalPageNo;i++){var o=n.default.create({id:i+1});o.searchValueArr=t.searchValueArr,o.renderingState=RenderingStates.INITIAL,this.renderingPages_sreach["p"+o.id]=o}t.set("matchResultArray",[]),App.KinesisLogUtilController.sendLogByActionTpye(App.pageConfig.get("kinesis_log_actionType_search")),this.renderingQueue.renderHighestPriority()},forceRendering:function(){if(this.searchValueArr!=App.pdfInfo.get("searchValueArr"))return this.cleanupQueue(),!1;var e=this.renderingQueue.getHighestPriority(this.renderingPages_sreach,this.viewPagenos);return!!e&&(App.PdfMainController.forceRendering(e),!0)},cleanupQueue:function(){this.renderingPages_sreach={},this.searchValueArr=[],this.matchResultArray=[];for(var e in this.renderingPages_sreach)if(e&&this.renderingPages_sreach[e]){var t=this.renderingPages_sreach[e];t&&t.cleanup()}}})}),define("one-book/controllers/sd",["exports","ember"],function(e,t){e.default=t.default.Controller.extend({bookTitle:App.pdfInfo.get("contentTitle"),bookTotalPageNo:App.pdfInfo.get("totalPageNo"),sidewrap__thumbnail__text:App.i18n.sd_sidebar__search__placeholder,sidebar__search_clean_button__text:App.i18n.sd_sidebar__search_clean_button__text,footer__back_button__text:App.i18n.sd_footer__back_button__text,footer__larger_button__text:App.i18n.sd_footer__larger_button__text,footer__normal_button__text:App.i18n.sd_footer__normal_button__text,share_content__title__text:App.i18n.sd_share_content__title__text,share_content__copy_button__text:App.i18n.sd_share_content__copy_button__text,share_content__content_url_title__text:App.i18n.sd_share_content__content_url_title__text,mobile_memo_create_text_1:App.i18n.mobile_memo_create_text_1,mobile_memo_create_text_2:App.i18n.mobile_memo_create_text_2,mobile_memo_create_button_text:App.i18n.mobile_memo_create_button_text,mobile_memo_text_dialog_save:App.i18n.mobile_memo_text_dialog_save,mobile_memo_text_dialog_cancel:App.i18n.mobile_memo_text_dialog_cancel,compatibleSeaching:!1,treeObj:null,treeData:[],expendTreeNode:[],init:function(){var e=this;App.KinesisLogUtilController.isApp=!0;var t=$(window).width(),n=$(window).height();setInterval(function(){t==$(window).width()&&n==$(window).height()||(t=$(window).width(),n=$(window).height(),clearTimeout(window.windowResize_page),window.windowResize_page=setTimeout(function(){if(!App.MemoUtilController.isChangeMemoLinkInfo){App.PainterUtilController&&App.PainterUtilController.getCanvasImgAndSaveStorage(!0),App.TurnUtilController.changeSpreadMode(),App.PublicUtilController.window_resize(),App.PainterUtilController&&App.PainterUtilController.resetPagePainterLayer();var e=App.TurnUtilController.getCurrentPagenos()[0],t=App.TurnUtilController.updateTurnCurrPage(e);$("#acti-header-container .acti_book_pageno").html(t),App.LinkUtilController.resetPageLinkFun(),App.KinesisLogUtilController.sendLogByActionTpye(App.pageConfig.get("kinesis_log_actionType_paging_reissue"))}},100))},100),device.iphone(),$(document).on("click","#acti-search-content-view > li",function(t){t.preventDefault();$(this).attr("pageno");App.PublicUtilController.click_searchResult_event(this),e.closeContentDiv()}),$(document).on("click","#book_main div.link-layer div.linkBlock",function(e){e.preventDefault(),App.PublicUtilController.click_link_event(this)}),$(document).on("keyup.search clickSearch","#sidebar_search_input",function(t){var n=document.all?window.event:t;if((13==n.keyCode||"clickSearch"==n.type)&&$(this).val()){$(this).blur(),App.CommonUtilController.gotoTop_parent();var i=$(this).val(),o=$(this).val().split(/[ |　]+/g),a=App.pdfInfo.get("searchValueArr"),l=App.pdfInfo.get("isMatchByPage"),r=App.pdfInfo.get("compatibleFlg");if("1"==r){if(o.join(",")==a.join(","))return!1}else if(l&&o.join(",")==a.join(","))return!1;if(App.PdfUtilController.cleanPhraseMatch(!0),$("#acti-search-content-view").html(""),App.pdfInfo.set("searchValueArr",o),"1"==r){App.PdfUtilController.clearBtnFlg=!1;var s=parseInt(App.pdfInfo.get("totalPageNo"));$("#search_dialog").css({"z-index":Number(s+5250),display:"block"}),App.PdfUtilController.showCanvasFlg=!0,App.PdfUtilController.searchFromXml(),App.PdfUtilController.highlightSearchResult(),e.compatibleSeaching=!0}else{var c=App.TurnUtilController.getCurrentPagenos();$.each(c,function(){App.PdfUtilController.calcFindPhraseMatch(this)}),App.searchViewerController.pdfSearching()}App.KinesisLogUtilController.searchKeyword=i,App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("search",""),App.KinesisLogUtilController.sendReadingProcessAwsKinesisLog_Add("","search","","",""),$("#sidebar_clean_button").removeClass("disabled")}}),$(document).on("openSearchContent","#sidebar_search_input",function(t){e.get("actions").openMenu_mobile_content(),e.get("actions").toggleMenu_mobile_content("acti-mobile-search-content","acti-mobile-search-button")}),window.showShareContent=function(){e.get("actions").toggleMenu_mobile_content("acti-mobile-share-content","acti-mobile-share-button")},window.openApp=function(){e.get("actions").openApp()},App.PublicUtilController.memoEventBind_mobile(),$(window).on("orientationchange",function(){0==window.orientation||180==window.orientation?(App.KinesisLogUtilController.appDirection="vertical",1==e.compatibleSeaching&&setTimeout(function(){App.PdfUtilController.changeCanvasRect()},1e3)):90!=window.orientation&&-90!=window.orientation||(App.KinesisLogUtilController.appDirection="horizontal",1==e.compatibleSeaching&&setTimeout(function(){App.PdfUtilController.changeCanvasRect()},1e3));var t=App.LogUtilController.reading_json.accessLogSortkeyId;null!==t&&void 0!==t&&function(){App.KinesisLogUtilController.isCompleteTurn=!1;var e=setInterval(function(){if(App.KinesisLogUtilController.isCompleteTurn){clearInterval(e);var t=App.TurnUtilController.getCurrentPagenos();null!==t&&t.length>0&&t.forEach(function(e,t){App.KinesisLogUtilController.startPage=e}),App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("rotate",""),App.KinesisLogUtilController.sendReadingProcessAwsKinesisLog_Add("","rotate","","",""),App.TurnUtilController.sendReadLog()}},100)}()})},getTreeData:function(e,t,n){var i=this,o=JSON.parse(JSON.stringify(i.treeData)),a=[];if("init"===n)a=o.filter(function(t){return t.level==e});else{var l=o.findIndex(function(n,i,o){return n.id==t&&n.level==e})+1;o.splice(0,l);for(var r=Number(e)+1,s=0;s<o.length&&o[s].level==r;s++)a.push(o[s])}return null!=a&&a.length>0?a.forEach(function(e){return e.pId=t,0===e.pId?e.isParent=!0:e.isParent=!1,e}):a=[],a},getUUID:function(e,t){var n,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||i.length,e)for(n=0;n<e;n++)o[n]=i[0|Math.random()*t];else{var a;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;n<36;n++)o[n]||(a=0|16*Math.random(),o[n]=i[19==n?3&a|8:a])}return o.join("")+"_"+(new Date).getTime()},closeContentDiv:function(){$("#acti-header-container a").removeClass("active"),$("#acti-mobile-menu-content div.content").hide()},mousewheel_loadToc_mobile:function(e){clearTimeout(window.mousewheel_preloadingToc),window.mousewheel_preloadingToc=setTimeout(function(){var t=e.find("div.page_group:first").width(),n=e.scrollLeft()-2*t,i=e.scrollLeft()+$("#acti-mobile-toc-content").width()+t,o=[];if($("> div.page_group",e).each(function(){var t=$(this).position().left+e.scrollLeft();t>n&&t<i&&$("div.thumbnail:not(.loaded)",this).each(function(){var e=this,t=parseInt($(this).attr("pageno"));if(0!=t){var n=App.pdfInfo.url_Prefix,i=App.pdfInfo.url_Suffix,o=App.pageConfig.get("thumbnailPath"),a=App.pdfInfo.get("imgType")||App.pageConfig.pageImgType,l=encodeURI(n+o+t+a+i);$("img",e)[0].onload=function(){$(e).addClass("loaded")},$("img",e)[0].onerror=function(){$(e).addClass("render_error").addClass("loaded"),$(e).html("<i class='oneviewer oneviewer-times-circle'></i>")},$("img",e).attr("src",l)}else $(e).addClass("loaded"),$(e).css("height","auto")})}),"rtl"===App.pdfInfo.get("direction")){for(var a=[],l=o.length-1;l>=0;l--)a.push(o[l]);o=a}},500)},actions:{goBack_mobile:function(){var e=window;try{for(var t=0;t<5;t++)if(e=e.parent,$("body",e.document).hasClass("topPage")){e.history.go(-1);break}}catch(e){}window.history.go(-1)},resizeParentSize:function(e){window.parent&&window.parent.resizeParentSize&&window.parent.resizeParentSize(e),"in"==e?(App.CommonUtilController.gotoTop_parent(),$(".resetParentPageSize_button_in").hide(),$(".resetParentPageSize_button_out").show()):($(".resetParentPageSize_button_in").show(),$(".resetParentPageSize_button_out").hide())},mobile_copy_url:function(){},cancelMemoCreateState:function(){$("div.memo-create-title-box").hide(),$("#main_divLink_id").off("click.createMemo"),App.TurnUtilController.resetBookTurn_disable(!1),$("#main_divLink_id > div.link_layer > div").removeClass("acti-disable"),App.JspanelUtilController.showMemoSelectJspanel_mobile()},toggleMenu_mobile_content:function(e,n){var i=this;if(!($("#confirm_dialog, #alert_dialog").length>0)){var o=$("#acti-header-container a.active"),a=o.attr("id"),l=$("#acti-mobile-painter-button").hasClass("active");if("acti-mobile-memo-button"!==a&&$("#acti-header-container a").removeClass("active"),$("#acti-mobile-menu-content > div.content").hide(),$("#acti-mobile-share-content").hide(),$(".acti-mobile-share-content-url-title").hide(),$("div.memo-create-title-box").hide(),$("#main_divLink_id").off("click.createMemo"),App.TurnUtilController.resetBookTurn_disable(!1),a&&a===n);else{if($("#acti-header-container a").removeClass("active"),$("#"+n).addClass("active"),"acti-mobile-memo-content"!=e&&$("#"+e).show(),"acti-mobile-search-button"==n){var r=App.pdfInfo.get("searchValueArr");r.length>0&&$("#sidebar_search_input").val(r.join(" "))}"acti-mobile-toc-button"==n&&App.TurnUtilController.binkSelectedAndPosition()}var s=$("#"+e);if("acti-mobile-hamburger-content"==e&&!s.hasClass("loaded")){$("#acti-mobile-hamburger-content").addClass("loaded");var c=App.pdfInfo.get("chapterJsons");c||(App.pdfInfo.setChapterJsons(),c=App.pdfInfo.get("chapterJsons"));for(var p=s.find("div.list:first"),d=0;d<c.length;d++){var m=c[d],_=15*parseInt(m.level)+4,u=m.chapterTarget,g=m.target;u?"0"===u||!0===m.isShowPage||Number(u)<0?g="":u&&!1===m.isShowPage&&(g=u):g=0==m.target?"":m.target;var h=$("<div class='chapter'></div>").append($('<span class="chapter_text"></span>').text(m.title)).css("padding-left",_+"px").data("target",m.target);h.append($('<span class="chapter_target"></span>').text(g)),0===parseInt(m.level)&&h.css("font-weight","bold"),p.append(h)}p.find("> div").on("click",function(){var e=parseInt(App.pdfInfo.get("totalPageNo")),t=parseInt($(this).data("target"));$(this).attr("data");if(0==t)return!1;t=App.CommonUtilController.checkNumber(t,1,1/0),t&&t>e&&(t=1),t&&(App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_content",t),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(t)},0)),i.closeContentDiv()})}if("acti-mobile-search-content"!=e||s.hasClass("loaded")||(s.addClass("loaded"),$("#sidebar_empty_icon").on("click",function(){$("#sidebar_search_input").val("")}),$("#sidebar_clean_button").on("click",function(e){if(e.preventDefault(),$(this).hasClass("disabled"))return!1;App.PdfUtilController.cleanPhraseMatch(!0),1==App.pdfInfo.get("compatibleFlg")&&(App.PdfUtilController.clearCanvasRect(),App.PdfUtilController.showCanvasFlg=!1,App.PdfUtilController.keywordsArr=[],App.PdfUtilController.keywordsArr.length=0,App.PdfUtilController.rectArr=[],App.PdfUtilController.rectArr.length=0,App.PdfUtilController.clearRectFlg=!0,App.PdfUtilController.clearBtnFlg=!0,i.compatibleSeaching=!1),$("#acti-search-content-view").html(""),$("#sidebar_search_input").val(""),App.pdfInfo.set("searchValueArr",t.default.A()),App.searchViewerController.set("searchValueArr",t.default.A()),$(this).addClass("disabled"),$("#acti_search_resultNum_div").text(""),App.searchViewerController.cleanupQueue()}),$("#acti-mobile-search-content div.acti-search-result").on("scroll",function(){var e=$(this).height();$(this).scrollTop()>.5*($("#acti-search-content-view").height()-e)&&function(){var e=function(){for(var e=$("#acti-search-content-view > li").length,t=App.searchViewerController.get("matchResultArray"),n=e;n<e+20;n++)t[n]&&$("#acti-search-content-view").append(t[n])};clearTimeout(window.search_content_sroll),window.search_content_sroll=setTimeout(function(){e()},200)}()})),"acti-mobile-toc-content"==e&&!s.hasClass("loaded")){s.addClass("loaded");var f=App.pdfInfo.get("totalPageNo"),v=App.pdfInfo.get("direction"),b=App.pdfInfo.get("spread_mode"),x=App.pdfInfo.get("hasCover"),A=App.pageConfig.get("prefixCanvas_Toc"),C=$("#acti-mobile-toc-content > div");C.addClass("spread_mode_"+b);var k;k=x&&"rtl"==v||!x&&"ltr"==v?1:0;for(var d=1;d<=f;d++){var h=$("<div class='page_group'></div>").attr("pageno",d);d%2===k?h.addClass("page-left"):h.addClass("page-right");var w=$('<div class="thumbnail" id="'+A+d+'" pageno="'+d+'"><img class=""/></div>')[0];h.append(w),"ltr"===v?C.append(h):C.prepend(h)}var P=App.pdfInfo.get("first_width"),y=App.pdfInfo.get("first_height"),U=Math.floor(P*(92/y));$("#acti-mobile-toc-content div.thumbnail").width(U),$("#acti-mobile-toc-content div.page_group").on("click",function(){var e=parseInt($(this).attr("pageno"));e||(e=1),$("#acti-mobile-toc-content div.page_group.active").removeClass("active");var t=App.TurnUtilController.getCurrentPagenos();$.each(t,function(){$("#"+A+this).parents("div.page_group:first").addClass("active")}),App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_thumbnail",e),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(e)},0)}),App.TurnUtilController.binkSelectedAndPosition(),$("#acti-mobile-toc-content > div").on("touchmove.top",function(e,t){i.mousewheel_loadToc_mobile($("#acti-mobile-toc-content > div"))}),i.mousewheel_loadToc_mobile($("#acti-mobile-toc-content > div"))}if("acti-mobile-share-content"==e){if(!$(".acti-mobile-share-content-url-button").hasClass("loaded")){$(".acti-mobile-share-content-url-button").addClass("loaded");new Clipboard(".acti-mobile-share-content-url-button").on("success",function(){$(".acti-mobile-share-content-url-title").fadeOut(500,function(){$(".acti-mobile-share-content-url-title").fadeIn()})})}var I=App.pdfInfo.get("shareUrl_Facebook");$("div.share_button_facebook").data("current-share-url",I);var T=App.pdfInfo.get("shareUrl_twitter");$("div.share_button_twitter").data("current-share-url",T);var S=App.pdfInfo.get("shareUrl_LINE"),L=$('<div><div data-type="share-d" data-lang="ja" class="line-it-button" data-url="'+S+'"></div></div>');$("#share_line_div_sd_id").append(L),$("div.line-it-button").data("current-share-url",S);try{LineIt.loadButton()}catch(e){}L.prevAll("div").remove();var M=App.pdfInfo.get("shareUrl_QRcode");$(".acti-mobile-share-content-url-button").attr("data-clipboard-text",M),$("div.QRcode_img_mobile_sd",N).html("");var N=$("#acti-mobile-share-content");new QRCode($("div.QRcode_img_mobile_sd",N)[0],{width:91,height:91,correctLevel:QRCode.CorrectLevel.L}).makeCode(M)}"acti-mobile-painter-content"==e?(s.hasClass("loaded")||(s.addClass("loaded"),App.PainterUtilController.resetPainterPenType(App.PainterUtilController.painterControl.penType),$("#acti-mobile-painter-content input.colorpicker").spectrum({showPaletteOnly:!0,hideAfterPaletteSelect:!0,color:App.PainterUtilController.painterControl.lineColor,maxSelectionSize:8,theme:"acti-sd-pen-color",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]],change:function(e){App.PainterUtilController.painterControl.lineColor=e.toHexString()},show:function(e){$("#acti-mobile-painter-content .acti-mobile-painter-content-color-box").addClass("acti-color-active")},hide:function(e){$("#acti-mobile-painter-content .acti-mobile-painter-content-color-box").removeClass("acti-color-active")}}),$("#acti-mobile-painter-content input.colorpicker").off("reflow.spectrum"),$("#acti-mobile-painter-content input.colorpicker").on("reflow.spectrum",function(){$("div.sp-palette-container").removeClass("sp-palette-container-border-top").addClass("sp-palette-container-border-bottom")}),App.CommonUtilController.setTapEvent("#acti-mobile-painter-content div.acti-mobile-painter-content-curve"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-curve").on("tapOne",function(){$("input.colorpicker").spectrum("hide"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-straightline").removeClass("acti-active"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-curve").addClass("acti-active"),App.PainterUtilController.painterControl.mode=Painter.MODE_PAINTER}),App.CommonUtilController.setTapEvent("#acti-mobile-painter-content div.acti-mobile-painter-content-straightline"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-straightline").on("tapOne",function(){$("input.colorpicker").spectrum("hide"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-curve").removeClass("acti-active"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-straightline").addClass("acti-active"),App.PainterUtilController.painterControl.mode=Painter.MODE_STRAIGHT}),App.CommonUtilController.setTapEvent("#acti-mobile-painter-content div.acti-mobile-painter-content-back"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-back").on("tapOne",function(){$("input.colorpicker").spectrum("hide"),App.PainterUtilController.painterControl.undo();var e=App.PainterUtilController.painterControl.getCurrentTunnel();e&&e.length>0?$("#acti-mobile-painter-content div.acti-mobile-painter-content-back").removeClass("acti-inactive"):$("#acti-mobile-painter-content div.acti-mobile-painter-content-back").addClass("acti-inactive")}),App.CommonUtilController.setTapEvent("#acti-mobile-painter-content div.acti-mobile-painter-content-lineWidth"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-lineWidth").on("tapOne",function(){if($("input.colorpicker").spectrum("hide"),$("div.acti-painter-lineWidth-dialog").length>0)return $(this).removeClass("acti-lineWidth-active"),void $("div.acti-painter-lineWidth-dialog").remove();$(this).addClass("acti-lineWidth-active");var e=$("<div></div>");e.append('<div type="1" class="acti-painter-sd-lineWidth-option acti-painter-sd-lineWidth-option-1"></div>'),e.append('<div type="2" class="acti-painter-sd-lineWidth-option acti-painter-sd-lineWidth-option-2"></div>'),e.append('<div type="3" class="acti-painter-sd-lineWidth-option acti-painter-sd-lineWidth-option-3"></div>'),e.append('<div type="4" class="acti-painter-sd-lineWidth-option acti-painter-sd-lineWidth-option-4"></div>');var t=App.PainterUtilController.painterControl.penType;$("div.acti-painter-sd-lineWidth-option-"+t,e).addClass("acti-active");var n=$('<div class="acti-painter-lineWidth-dialog acti-painter-sd-lineWidth-dialog"></div>');n.append(e),e.addClass("acti-painter-lineWidth-box-border-bottom");var i=$("#acti-mobile-painter-content .acti-painter-lineWidth-icon").offset();n.css({left:i.left-8+"px",top:i.top-196+"px"}),$("body").append(n),$(document).off("touchstart.selectLineWidth touchend.selectLineWidth"),$(document).on("touchstart.selectLineWidth touchend.selectLineWidth",function(e){if("touchend"==e.type){if($(e.target).hasClass("acti-painter-sd-lineWidth-option")){var t=$(e.target).attr("type");App.PainterUtilController.resetPainterPenType(t)}$("#acti-mobile-painter-content div.acti-mobile-painter-content-lineWidth").removeClass("acti-lineWidth-active"),$("div.acti-painter-lineWidth-dialog").remove(),$(document).off("touchstart.selectLineWidth touchend.selectLineWidth")}else $(e.target).hasClass("acti-painter-sd-lineWidth-option")||0!=$(e.target).closest("div.acti-mobile-painter-content-lineWidth").length||($("#acti-mobile-painter-content div.acti-mobile-painter-content-lineWidth").removeClass("acti-lineWidth-active"),$("div.acti-painter-lineWidth-dialog").remove(),$(document).off("touchstart.selectLineWidth touchend.selectLineWidth"))})}),App.CommonUtilController.setTapEvent("#acti-mobile-painter-content div.acti-mobile-painter-content-clear"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-clear").on("tapOne",function(){$("input.colorpicker").spectrum("hide");var e=function(){App.PainterUtilController.painterControl.clearHistory();for(var e=App.TurnUtilController.getCurrentPagenos(),t=0;t<e.length;t++)App.StorageUtilController.setPenByPageno(e[t],""),App.PainterUtilController.resetDrawPagePen();$("#painter_dialog div.acti-painter-back").addClass("acti-inactive")};App.JspanelUtilController.showConfirmJspanel(App.i18n.painter_mobile_clear_painter_text,e)})),a&&a===n?App.PainterUtilController.penIsActive&&(App.PainterUtilController&&App.PainterUtilController.getCanvasImgAndSaveStorage(!0),"acti-mobile-painter-button"===n&&l?App.PainterUtilController.setPainterLayer_activeState(!1,"refreshMemo"):App.PainterUtilController.setPainterLayer_activeState(!1)):App.PainterUtilController.setPainterLayer_activeState(!0),App.PublicUtilController.setColorBoxPosition()):(App.PainterUtilController&&App.PainterUtilController.getCanvasImgAndSaveStorage(!0),App.PainterUtilController.setPainterLayer_activeState(!1,"refreshMemo")),"acti-mobile-memo-content"==e?0!=$("div.jsPanel-theme-mobile-memo-select-list").length?$("div.jsPanel-theme-mobile-memo-select-list .jsPanel-btn-close").trigger("click"):(App.MemoUtilController.memoIsCreateState&&$("#"+n).addClass("active"),
App.JspanelUtilController.showMemoSelectJspanel_mobile()):$("div.jsPanel-theme-mobile-memo-select-list .jsPanel-btn-close").trigger("click")}},closeMenu_mobile_content:function(){$(".acti-mobile-menu-button").show(),$("#acti-mobile-menu-content").hide(),App.PainterUtilController.penIsActive&&(App.PainterUtilController&&App.PainterUtilController.getCanvasImgAndSaveStorage(!0),App.PainterUtilController.setPainterLayer_activeState(!1,"refreshMemo")),$("#memo_select_dialog").length>0&&$("#memo_select_dialog .jsPanel-btn-close").trigger("click")},openMenu_mobile_content:function(){$("#acti-header-container a").removeClass("active"),$("#acti-mobile-toc-content, #acti-mobile-hamburger-content, #acti-mobile-search-content, #acti-mobile-share-content, #acti-mobile-painter-content, #acti-mobile-memo-content").hide(),$("#acti-mobile-menu-content").show(),$(".acti-mobile-menu-button").hide(),$("div.memo-create-title-box").is(":visible")&&$("#acti-mobile-memo-button").addClass("active")},openApp:function(){var e=App.pdfInfo.get("callAppUrl");if(e){e+="&isAndSearch="+App.PublicUtilController.getSearchType(),e=App.PublicUtilController.updateCallAppKeyword(e),e=e+"&siteNum="+App.pdfInfo.get("siteNum")+"&siteTitle="+App.pdfInfo.get("siteTitle");var t=window.top.location.hostname,n="https://"+t+"/content/call_app?callAppUrl="+BASE64.encoder(encodeURI(e));window.top.open(n)}},openTwitter:function(){var e=$("div.share_button_twitter").data("current-share-url");window.open(e)},openFacebook:function(){var e=$("div.share_button_facebook").data("current-share-url");window.open(e)},copy_url:function(){device.ios()&&$(".acti-mobile-share-content-url-button").trigger("click")},hideShareContent:function(){$("#acti-mobile-share-content").hide()}}})}),define("one-book/controllers/utils/common-util-controller",["exports","ember"],function(e,t){App.CommonUtilController=t.default.Object.create({isDebug:!1,ActiBookOneLocalData:{},getLocalData:function(e){return e?this.ActiBookOneLocalData[e]:null},setLocalData:function(e,t){this.ActiBookOneLocalData||(this.ActiBookOneLocalData={}),this.ActiBookOneLocalData[e]=t,localStorage.setItem("ActiBookOneLocalData",JSON.stringify(this.ActiBookOneLocalData))},checkNumber:function(e,t,n){return e=parseInt(e),!e||"NaN"===e.toString()||e<=t?e=t:e>n&&(e=n),e},log:function(e){this.get("isDebug")&&console.info(e)},log_local:function(e,t,n,i){if(this.get("isDebug")){var o=JSON.parse(window.localStorage.getItem("ActibookOne_video")||"{}");o[e]||(o[e]={},o[e].error=[],o[e].success=[]),t?o[e].error.push([n,i]):o[e].success.push([n,i]),window.localStorage.setItem("ActibookOne_video",JSON.stringify(o))}},isFullscreenForNoScroll:function(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("chrome")>0||e.indexOf("applewebkit")>0?$("#index_main").height()===window.screen.height&&$("#index_main").width()===window.screen.width:window.outerHeight===window.screen.height&&window.outerWidth===window.screen.width},isChrome:function(){return window.navigator.userAgent.toLowerCase().indexOf("chrome")>0},isFirefox:function(){return window.navigator.userAgent.toLowerCase().indexOf("firefox")>0},formatNumber:function(e,t,n){var i;return!isNaN(parseFloat(e))&&isFinite(e)?(e=Number(e),e=(void 0!==t?e.toFixed(t):e).toString(),i=e.split("."),i[0]=i[0].toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+(n||",")),i.join(".")):NaN},htmlSpecialChars_decode:function(e){return $("<a></a>").html(e).text()},gotoTop_parent:function(){window.parent.gotoTop_poste&&window.parent.gotoTop_poste()},HTMLEncode:function(e){var t=document.createElement("div");null!=t.textContent?t.textContent=e:t.innerText=e;var n=t.innerHTML;return t=null,n},setTapEvent:function(e){$(e);$(document).on("touchstart",e,function(e){$(this).data("isMoved",0)}),$(document).on("touchmove",e,function(e){$(this).data("isMoved",1)}),$(document).on("touchend",e,function(e){0==$(this).data("isMoved")&&(e.preventDefault(),$(this).trigger("tapOne",[e]))})},forbiddenContextmenu:function(){$("video").on("contextmenu",function(){return!1})},checkHorizentalMobile:function(){var e=window.top,t=!1;return device.mobile()&&$(e).width()>$(e).height()&&(t=!0),t}}),Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e}}),define("one-book/controllers/utils/hammer-util-controller",["exports","ember"],function(e,t){App.HammerUtilController=t.default.Object.create({bookMain_hammer_pan:null,getBookMain_hammer_pan:function(){return this.bookMain_hammer_pan||(this.bookMain_hammer_pan=new Hammer.Manager(document.getElementById("book_main"),{clearStore:!0}),this.bookMain_hammer_pan.add(new Hammer.Pan({threshold:0,pointers:0}))),this.bookMain_hammer_pan},painterDialog_hammer_pan:null,getPainterDialog_hammer_pan:function(){return this.painterDialog_hammer_pan||(this.painterDialog_hammer_pan=new Hammer.Manager($("#painter_dialog div.jsPanel-title").get(0),{clearStore:!0}),this.painterDialog_hammer_pan.add(new Hammer.Pan({threshold:0,pointers:0}))),this.painterDialog_hammer_pan},removePainterDialog_hammer_pan:function(){this.painterDialog_hammer_pan.destroy(),this.painterDialog_hammer_pan=null},memoHammerList:{},removeMemoHammerList:function(){this.memoHammerList={}},removeMemoHammerById:function(e){delete this.memoHammerList[e]},getMemoMove_hammer_pan:function(e,t){var n=null;return this.memoHammerList[t]?n=this.memoHammerList[t]:(n=new Hammer.Manager(e,{clearStore:!0}),this.memoHammerList[t]=n),n.add(new Hammer.Pan({threshold:0,pointers:0})),n},getMemoClick_hammer_tap:function(e,t){var n=null;return this.memoHammerList[t]?n=this.memoHammerList[t]:(n=new Hammer.Manager(e,{clearStore:!0}),this.memoHammerList[t]=n),n.add(new Hammer.Tap),n}})}),define("one-book/controllers/utils/jspanel-util-controller",["exports","ember"],function(e,t){App.JspanelUtilController=t.default.Object.create({showMemoSelectJspanel_pc:function(e){var t=this;$.jsPanel({config:{id:"memo_select_dialog",theme:"pc-memo-select-list",resizable:"disable",size:{width:0,height:0},draggable:null,removeHeader:!0},content:t.getMemoSelectTemplate(),onclosed:function(){$("#main_divLink_id").off("click.createMemo"),App.MemoUtilController.memoIsCreateState=!1,App.TurnUtilController.resetBookTurn_disable(!1),$("#main_divLink_id > div.link_layer > div").removeClass("acti-disable")},callback:function(t){$("#memo_select_dialog .acti-memo-selected-button").off("click.clickMemoList"),$("#memo_select_dialog .acti-memo-selected-button").on("click.clickMemoList",function(){t.close(),e&&e.get("actions").momeListOpenFun&&e.get("actions").momeListOpenFun(e)}),$("#memo_select_dialog .acti-memo-option").off("click.selectMemoType"),$("#memo_select_dialog .acti-memo-option").on("click.selectMemoType",function(){$("#main_divLink_id > div.link_layer > div").addClass("acti-disable"),$("#memo_select_dialog .acti-memo-option-selected").removeClass("acti-memo-option-selected"),$(this).addClass("acti-memo-option-selected");var e=$(this).attr("type");App.MemoUtilController.memoIsCreateState=!0,App.TurnUtilController.resetBookTurn_disable(!0),$("#memo_select_dialog .acti-memo-selected-title").show(),$("#main_divLink_id").off("click.createMemo"),$("#main_divLink_id").on("click.createMemo",function(n){var i=$(n.target).attr("pageno"),o=$(n.target).width(),a=$(n.target).height(),l=n.offsetX,r=n.offsetY;if(i&&$(n.target).hasClass("link_layer")){if($("#book_main > div.jsPanel-theme-memo[pageno='"+i+"']").length>=10)return App.JspanelUtilController.showAlertJspanel(App.i18n.memo_add_overstep_maxNum_10_text),void t.close();var s=App.TurnUtilController.getCurrentPagenos(),c=10*s.length;if($("#book_main > div.jsPanel-theme-memo").length>=c)return 20==c?App.JspanelUtilController.showAlertJspanel(App.i18n.memo_add_overstep_maxNum_20_text):App.JspanelUtilController.showAlertJspanel(App.i18n.memo_add_overstep_maxNum_10_text),void t.close();var p=App.MemoUtilController.getCurrentMemoListMaxLayer(),d=$.extend(!0,{},App.pageConfig.memo_init_parameter);l>o-54&&(l=o-54),r>a-54&&(r=a-54),d.id=+new Date+"_"+Math.ceil(1e8*Math.random()),d.x=l/o,d.y=r/a,d.layer=p+1,d.color=e,App.JspanelUtilController.createMemoJspanel_pc(d,i),App.StorageUtilController.pushMemoData(i,d),t.close()}})})}})},showMemoSelectJspanel_mobile:function(){var e=this;$.jsPanel({config:{id:"memo_select_dialog",theme:"mobile-memo-select-list",resizable:"disable",size:{width:0,height:0},draggable:null,removeHeader:!0},content:e.getMemoSelectTemplate(),onclosed:function(){$("div.memo-create-title-box").is(":hidden")&&($("#acti-mobile-memo-button").removeClass("active"),$("#main_divLink_id > div.link_layer > div").removeClass("acti-disable"))},callback:function(e){App.MemoUtilController.memoIsCreateState=!1,App.TurnUtilController.resetBookTurn_disable(!1),App.CommonUtilController.setTapEvent("#memo_select_dialog .acti-memo-option"),$("#memo_select_dialog .acti-memo-option").on("tapOne.selectMemoType",function(){var t=$(this).attr("type");App.MemoUtilController.memoIsCreateState=!0,App.TurnUtilController.resetBookTurn_disable(!0),$("div.memo-create-title-box").show(),e.close(),$("#main_divLink_id > div.link_layer > div").addClass("acti-disable"),$("#main_divLink_id").off("click.createMemo"),$("#main_divLink_id").on("click.createMemo",function(e){$("#main_divLink_id > div.link_layer > div").removeClass("acti-disable");var n=$(e.target).attr("pageno");if(!n)return!1;var i=$(e.target).width(),o=$(e.target).height(),a=e.offsetX,l=e.offsetY;if($("#book_main > div.jsPanel-theme-sd-memo[pageno='"+n+"']").length>=10)return App.JspanelUtilController.showAlertJspanel(App.i18n.memo_add_overstep_maxNum_10_text),$("#main_divLink_id").off("click.createMemo"),App.MemoUtilController.memoIsCreateState=!1,App.TurnUtilController.resetBookTurn_disable(!1),$("div.memo-create-title-box").hide(),void $("#acti-mobile-memo-button").removeClass("active");var r=App.TurnUtilController.getCurrentPagenos(),s=10*r.length;if($("#book_main > div.jsPanel-theme-sd-memo").length>=s)return 20==s?App.JspanelUtilController.showAlertJspanel(App.i18n.memo_add_overstep_maxNum_20_text):App.JspanelUtilController.showAlertJspanel(App.i18n.memo_add_overstep_maxNum_10_text),$("#main_divLink_id").off("click.createMemo"),App.MemoUtilController.memoIsCreateState=!1,App.TurnUtilController.resetBookTurn_disable(!1),$("div.memo-create-title-box").hide(),void $("#acti-mobile-memo-button").removeClass("active");var c=App.MemoUtilController.getCurrentMemoListMaxLayer(),p=$.extend(!0,{},App.pageConfig.memo_init_parameter);a>i-54&&(a=i-54),l>o-54&&(l=o-54),p.id=+new Date+"_"+Math.ceil(1e8*Math.random()),p.x=a/i,p.y=l/o,p.layer=c+1,p.color=t,p.foldStatus=1,App.JspanelUtilController.createMemoJspanel_sd(p,n,!0),App.StorageUtilController.pushMemoData(n,p),$("#main_divLink_id").off("click.createMemo"),App.MemoUtilController.memoIsCreateState=!1,App.TurnUtilController.resetBookTurn_disable(!1)})}),$(".acti-memo-selected-button").off("click.showMemoList"),$(".acti-memo-selected-button").on("click.showMemoList",function(t){$("#acti-mobile-memo-content").show(),e.close(),$("#acti-mobile-memo-button").addClass("active");var n=$("#acti-mobile-memo-content").find("div.list:first");n.html("");for(var i=parseInt(App.pdfInfo.get("totalPageNo")),o=0;o<i;o++)!function(e){var t=e+1,i=App.StorageUtilController.getMemoByPageno(t);(i||i.updateDate)&&$.each(i.memoData,function(){var e=this.text||"",i=App.TurnUtilController.getActualPageNumber(t),o=$("<div class='chapter' data='"+this.id+"'></div>").append($('<textarea class="chapter_text memo-text-more text-book" disabled></textarea>').val(e)).data("target",t).data("id",this.id);o.append($('<span class="chapter_target"></span>').text(i)),n.append(o)})}(o);n.find("> div").on("click",function(){var e=this,t=parseInt($(this).data("target")),n=$(this).attr("data");if(0==t)return!1;t=App.CommonUtilController.checkNumber(t,1,1/0),-1==App.TurnUtilController.getCurrentPagenos().indexOf(t)?(window.openMomeID=$(this).data("id"),App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_taglist",t),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(t)},0)):function(){window.openMomeID=$(e).data("id");var i=App.StorageUtilController.getMemoByPagenoAndId(t,n),o=App.MemoUtilController.getCurrentMemoListMaxLayer();i.layer=o+1,App.StorageUtilController.pushMemoData(t,i),App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_taglist",t),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(t,i)},0)}(),$("#acti-header-container a").removeClass("active"),$("#acti-mobile-menu-content div.content").hide()})}),$("#memo_select_dialog .acti-memo-option").on("tapOne.selectMemoType",function(){var t=$(this).attr("type");App.MemoUtilController.memoIsCreateState=!0,App.TurnUtilController.resetBookTurn_disable(!0),$("div.memo-create-title-box").show(),e.close(),$("#main_divLink_id > div.link_layer > div").addClass("acti-disable"),$("#main_divLink_id").off("click.createMemo"),$("#main_divLink_id").on("click.createMemo",function(e){$("#main_divLink_id > div.link_layer > div").removeClass("acti-disable");var n=$(e.target).attr("pageno");if(!n)return!1;var i=$(e.target).width(),o=$(e.target).height(),a=e.offsetX,l=e.offsetY;if($("#book_main > div.jsPanel-theme-sd-memo[pageno='"+n+"']").length>=10)return App.JspanelUtilController.showAlertJspanel(App.i18n.memo_add_overstep_maxNum_10_text),$("#main_divLink_id").off("click.createMemo"),App.MemoUtilController.memoIsCreateState=!1,App.TurnUtilController.resetBookTurn_disable(!1),$("div.memo-create-title-box").hide(),void $("#acti-mobile-memo-button").removeClass("active");var r=App.TurnUtilController.getCurrentPagenos(),s=10*r.length;if($("#book_main > div.jsPanel-theme-sd-memo").length>=s)return 20==s?App.JspanelUtilController.showAlertJspanel(App.i18n.memo_add_overstep_maxNum_20_text):App.JspanelUtilController.showAlertJspanel(App.i18n.memo_add_overstep_maxNum_10_text),$("#main_divLink_id").off("click.createMemo"),App.MemoUtilController.memoIsCreateState=!1,App.TurnUtilController.resetBookTurn_disable(!1),$("div.memo-create-title-box").hide(),void $("#acti-mobile-memo-button").removeClass("active");var c=App.MemoUtilController.getCurrentMemoListMaxLayer(),p=$.extend(!0,{},App.pageConfig.memo_init_parameter);a>i-54&&(a=i-54),l>o-54&&(l=o-54),p.id=+new Date+"_"+Math.ceil(1e8*Math.random()),p.x=a/i,p.y=l/o,p.layer=c+1,p.color=t,p.foldStatus=1,App.JspanelUtilController.createMemoJspanel_sd(p,n,!0),App.StorageUtilController.pushMemoData(n,p),$("#main_divLink_id").off("click.createMemo"),App.MemoUtilController.memoIsCreateState=!1,App.TurnUtilController.resetBookTurn_disable(!1)})}),App.MemoUtilController.isCurrentBookHasMemo()?$("#jumpToMemoList").show():$("#jumpToMemoList").hide()}})},createMemoJspanel_pc:function(e,t){e.id&&$.jsPanel({config:{id:e.id,theme:"memo",resizable:"disable",size:{width:"100%",height:"100%"},draggable:null,removeHeader:!0,selector:"#book_main",pageno:t,param:e},content:App.JspanelUtilController.getMemoTemplate(),onJspClick:function(e){App.MemoUtilController.setMemoTopest(e)},onbeforeclose:function(e){var t=function(){var t=$("#"+e.option.id).attr("pageno");if(App.StorageUtilController.removeMemoDataById(t,e.option.id),e.option.onbeforeclose=null,e.close(),$("#"+e.option.id).remove(),!App.MemoUtilController.isCurrentBookHasMemo()){for(var n=$(".acti-sidebar_toggle_button > div"),i="",o=0;o<n.length;o++)i=$(n[o]).attr("id"),"acti-sidebar-toc-button"===i?$(n[o]).addClass("toggle_button_selected"):$(n[o]).removeClass("toggle_button_selected");$("div.acti-sidewrap-inner div.content_div").css("opacity",0).css("z-index",1).removeClass("loaded");var a=$("#acti-sidebar-toc-content");a.css("opacity",1).css("z-index",2),a.hasClass("loaded")||a.addClass("loaded")}};return App.JspanelUtilController.showConfirmJspanel(App.i18n.memo_cleanLinkMemo_text,t),!1},callback:function(n){var i=parseInt(App.pdfInfo.get("totalPageNo")),o=App.MemoUtilController.calcMemoShowAttribute(e,t);n.addClass("memo-"+e.color),"1"==e.foldStatus&&$(n).addClass("link-state-fold link-animate-fold"),e.linkDetail?(e.linkType==App.pageConfig.memo_link_type_outlink?($(n).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-outlink"),$("div.acti-memo-link-content-text",n).text(e.linkDetail)):($(n).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-inlink"),$("div.acti-memo-link-content-text",n).text(App.i18n.getMemoInlinkContentJointText(e.linkDetail))),$("div.acti-memo-link-content-text",n).data({"link-type":e.linkType,"link-detail":e.linkDetail})):($(n).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-notset"),$("div.acti-memo-link-content-text",n).text("")),n.css({left:o.left,top:o.top,transform:o.transform,width:o.width,height:o.height,"z-index":i+500+parseInt(e.layer)}),n.attr({pageno:n.option.pageno}),$("div.acti-memo-text-box > textarea",n).val(e.text),$(n).show(),App.MemoUtilController.bindMemoMoveEvent(n),App.MemoUtilController.bindMemoClickEvent(n)}})},createMemoJspanel_sd:function(e,n,i,o){e.id&&$.jsPanel({config:{id:e.id,theme:"sd-memo",resizable:"disable",size:{width:"100%",height:"100%"},draggable:null,removeHeader:!0,selector:"#book_main",pageno:n,param:e},content:App.JspanelUtilController.getMemoTemplate_sd(),onJspClick:function(e){App.MemoUtilController.setMemoTopest(e)},onbeforeclose:function(e){var t=function(){var t=$("#"+e.option.id).attr("pageno");App.StorageUtilController.removeMemoDataById(t,e.option.id),e.option.onbeforeclose=null,e.close(),$("#"+e.option.id).remove()};return App.JspanelUtilController.showConfirmJspanel(App.i18n.memo_cleanLinkMemo_text,t),!1},callback:function(a){var l=parseInt(App.pdfInfo.get("totalPageNo")),r=App.MemoUtilController.calcMemoShowAttribute(e,n);if(a.addClass("memo-"+e.color),i){$(a).addClass("link-state-unfold");var s="310px",c="310px";App.CommonUtilController.checkHorizentalMobile()&&(s="210px",c="210px"),r.width=s,r.height=c,$("#acti-mobile-memo-button").removeClass("active"),$("div.memo-create-title-box").hide(),$(a).addClass("link-animate link-state-unfold"),$(a).removeClass("link-state-fold link-animate-fold")}else $(a).addClass("link-state-fold link-animate-fold"),r.width="54px",r.height="54px";e.linkDetail?(e.linkType==App.pageConfig.memo_link_type_outlink?($(a).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-outlink"),$("div.acti-memo-link-content-text",a).text(e.linkDetail)):($(a).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-inlink"),$("div.acti-memo-link-content-text",a).text(App.i18n.getMemoInlinkContentJointText(e.linkDetail))),$("div.acti-memo-link-content-text",a).data({"link-type":e.linkType,"link-detail":e.linkDetail})):($(a).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-notset"),$("div.acti-memo-link-content-text",a).text(""));var p="single",d=t.default.$("#index_main > div.pack_book_div").width();p=t.default.$("#index_main > div.pack_book_div").height()+50>d?"single":"double","resize"===o||"double"===p?a.css({left:r.left,top:r.top,transform:r.transform,width:r.width,height:r.height,"z-index":l+500+parseInt(e.layer)}):a.css({left:r.left,top:r.top,width:r.width,height:r.height,"z-index":l+500+parseInt(e.layer)}),a.attr({pageno:a.option.pageno}),$("div.acti-memo-text-box > textarea",a).val(e.text),$(a).show()}})},showPainterJspanel:function(){var e=this;$.jsPanel({config:{id:"painter_dialog",theme:"pc-painter",resizable:"disable",size:{width:0,height:0},draggable:null,removeHeader:!0},content:e.getPainterTemplate(),onbeforeclose:function(){$("input.colorpicker").spectrum("destroy")},onclosed:function(){App.PainterUtilController&&App.PainterUtilController.getCanvasImgAndSaveStorage(!0),App.PainterUtilController.setPainterLayer_activeState(!1,"refreshMemo");var e=App.HammerUtilController.getPainterDialog_hammer_pan();e.off("panstart"),e.off("panmove"),e.off("panend"),App.HammerUtilController.removePainterDialog_hammer_pan()},callback:function(e){$(e).css({top:"50%",left:"50%"}),App.PainterUtilController.setPainterLayer_activeState(!0),App.PainterUtilController.resetPainterPenType(App.PainterUtilController.painterControl.penType),$("#painter_dialog div.acti-active").removeClass("acti-active"),App.PainterUtilController.painterControl.mode==Painter.MODE_PAINTER?$("#painter_dialog div.acti-painter-curve").addClass("acti-active"):$("#painter_dialog div.acti-painter-straightline").addClass("acti-active"),$("div.sp-container").remove(),$("input.colorpicker").spectrum({showPaletteOnly:!0,hideAfterPaletteSelect:!0,color:App.PainterUtilController.painterControl.lineColor,maxSelectionSize:8,palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]],change:function(e){App.PainterUtilController.painterControl.lineColor=e.toHexString()},show:function(e){}}),$("input.colorpicker").off("reflow.spectrum"),$("input.colorpicker").on("reflow.spectrum",function(){var e=$("#painter_dialog .sp-replacer").offset(),t=$("div.sp-container").offset(),n=$("div.sp-container").position();e.top>t.top?($("div.sp-container").css({left:n.left-51+"px",top:n.top-6+"px"}),$("div.sp-palette-container").removeClass("sp-palette-container-border-top").addClass("sp-palette-container-border-bottom")):($("div.sp-container").css({left:n.left-51+"px",top:n.top+7+"px"}),$("div.sp-palette-container").removeClass("sp-palette-container-border-bottom").addClass("sp-palette-container-border-top"))}),App.PainterUtilController.bindPainterDialogMoveEvent_pc(),$("#painter_dialog div.acti-painter-curve").off("click"),$("#painter_dialog div.acti-painter-curve").on("click",function(e){$("#painter_dialog div.acti-active").removeClass("acti-active"),$(this).addClass("acti-active"),App.PainterUtilController.painterControl.mode=Painter.MODE_PAINTER}),$("#painter_dialog div.acti-painter-straightline").off("click"),$("#painter_dialog div.acti-painter-straightline").on("click",function(e){$("#painter_dialog div.acti-active").removeClass("acti-active"),$(this).addClass("acti-active"),App.PainterUtilController.painterControl.mode=Painter.MODE_STRAIGHT}),$("#painter_dialog div.acti-painter-lineWidth").off("click"),$("#painter_dialog div.acti-painter-lineWidth").on("click",function(e){if(e.stopPropagation(),e.preventDefault(),$("input.colorpicker").spectrum("hide"),$("div.acti-painter-lineWidth-dialog").length>0)return void $("div.acti-painter-lineWidth-dialog").remove();var t=$("#painter_dialog").position(),n=$("#painter_dialog .acti-painter-lineWidth").offset(),i=$(window).height(),o=$("<div></div>");o.append('<div type="1" class="acti-painter-lineWidth-option acti-painter-lineWidth-option-1"></div>'),o.append('<div type="2" class="acti-painter-lineWidth-option acti-painter-lineWidth-option-2"></div>'),o.append('<div type="3" class="acti-painter-lineWidth-option acti-painter-lineWidth-option-3"></div>'),o.append('<div type="4" class="acti-painter-lineWidth-option acti-painter-lineWidth-option-4"></div>');var a=App.PainterUtilController.painterControl.penType;$("div.acti-painter-lineWidth-option-"+a,o).addClass("acti-active");var l=$('<div class="acti-painter-lineWidth-dialog"></div>');l.append(o),t.top>.6*i?(o.addClass("acti-painter-lineWidth-box-border-bottom"),l.css({left:n.left-4+"px",top:n.top-145+"px"})):(o.addClass("acti-painter-lineWidth-box-border-top"),l.css({left:n.left-4+"px",top:n.top+37+"px"})),$("body").append(l),$(document).off("click.selectLineWidth mousedown.selectLineWidth"),$(document).on("click.selectLineWidth mousedown.selectLineWidth",function(e){if("click"==e.type){if($(e.target).hasClass("acti-painter-lineWidth-option")){var t=$(e.target).attr("type");App.PainterUtilController.resetPainterPenType(t)}l.remove(),$(document).off("click.selectLineWidth mousedown.selectLineWidth")}else $(e.target).hasClass("acti-painter-lineWidth-option")||0!=$(e.target).closest(".acti-painter-lineWidth").length||(l.remove(),$(document).off("click.selectLineWidth mousedown.selectLineWidth"))})}),$("#painter_dialog div.acti-painter-back").off("click"),$("#painter_dialog div.acti-painter-back").on("click",function(e){App.PainterUtilController.painterControl.undo();var t=App.PainterUtilController.painterControl.getCurrentTunnel();t&&t.length>0?$("#painter_dialog div.acti-painter-back").removeClass("acti-inactive"):$("#painter_dialog div.acti-painter-back").addClass("acti-inactive")}),$("#painter_dialog div.acti-painter-clear").off("click"),$("#painter_dialog div.acti-painter-clear").on("click",function(e){var t=function(){App.PainterUtilController.painterControl.clearHistory();for(var e=App.TurnUtilController.getCurrentPagenos(),t=0;t<e.length;t++)App.StorageUtilController.setPenByPageno(e[t],""),App.PainterUtilController.resetDrawPagePen();$("#painter_dialog div.acti-painter-back").addClass("acti-inactive")};App.JspanelUtilController.showConfirmJspanel(App.i18n.painter_clear_painter_text,t)})}})},showConfirmJspanel:function(e,t){var n=this;$.jsPanel({config:{id:"confirm_dialog",theme:"confirm-dialog",resizable:"disable",size:{width:0,height:0},draggable:null,removeHeader:!0},content:n.getConfirmTemplate(e),onclosed:function(){$(".jsPanel-confirm-backdrop").remove()},callback:function(e){$("body").append('<div class="jsPanel-confirm-backdrop"></div>'),$("#confirm_dialog div.confirm-button-no").on("click",function(){e.close()}),$("#confirm_dialog div.confirm-button-yes").on("click",function(){t&&$.isFunction(t)&&t(),e.close()})}})},showAlertJspanel:function(e){var t=this;$.jsPanel({config:{id:"alert_dialog",theme:"alert-dialog",resizable:"disable",size:{width:0,height:0},draggable:null,removeHeader:!0},content:t.getAlertTemplate(e),onclosed:function(){$(".jsPanel-confirm-backdrop").remove()},callback:function(e){$("body").append('<div class="jsPanel-confirm-backdrop"></div>'),$("#alert_dialog div.alert-button-yes").on("click",function(){e.close()})}})},showErrorJspanel:function(e){var t=this;$.jsPanel({config:{id:"error_dialog",theme:"error-dialog",resizable:"disable",size:{width:0,height:0},draggable:null,removeHeader:!0},content:t.getErrorTemplate(e),onclosed:function(){},callback:function(e){$("body").append('<div class="jsPanel-confirm-backdrop"></div>')}})},showPrintSelectJspanel:function(){var e=this;$.jsPanel({config:{id:"print_select_dialog",theme:"pc-print-select-list",resizable:"disable",size:{width:0,height:0},draggable:null,removeHeader:!0},content:e.getPrintSelectTemplate(),onclosed:function(){},callback:function(e){App.PrintUtilController.initPrintJspanel()}})},getErrorTemplate:function(e){return'<div class="jsPanel-title">'+e+"</div>"},getAlertTemplate:function(e){return'<div class="jsPanel-title">'+e+'</div><div class="jsPanel-btn-close"><i class="fa fa-times" aria-hidden="true"></i></div><div class="alert-button-box"><div class="alert-button-yes">'+App.i18n.memo_button_yes_text+"</div></div>"},getConfirmTemplate:function(e){return'<div class="jsPanel-title">'+e+'</div><div class="jsPanel-btn-close"><i class="fa fa-times" aria-hidden="true"></i></div><div class="confirm-button-box"><div class="confirm-button-no">'+App.i18n.memo_button_no_text+'</div><div class="confirm-button-yes">'+App.i18n.memo_button_yes_text+"</div></div>"},getPrintSelectTemplate:function(){return'<div class="jsPanel-title">'+App.i18n.pc_print_title_text+'</div><div class="jsPanel-btn-close"><i class="fa fa-times" aria-hidden="true"></i></div><div class="acti-print-select-content"><div class="selectOptions"><div class="singleMode inputRadio"><label for="singleRadio" class="singleLabel"><input id="singleRadio" type="radio" name="selectOption" class="singleLabel" />'+App.i18n.pc_print_single_option+'<i class="singleLabelI"></i></label></div><div class="doubleMode inputRadio"><label for="doubleRadio" class="doubleLabel"><input id="doubleRadio" type="radio" name="selectOption" class="doubleLabel" />'+App.i18n.pc_ptint_double_option+'<i class="doubleLabelI"></i></label></div></div><div class="allPages"><div class="singlePages"><div class="singlePagesBox"><div class="acti-print-option acti-print-option-left" type="left"><div class="acti-print-option-icon print-left"></div><div class="acti-print-option-title">'+App.i18n.pc_bottom_Choice_print_left+'</div></div><div class="acti-print-option acti-print-option-right" type="right"><div class="acti-print-option-icon print-right"></div><div class="acti-print-option-title">'+App.i18n.pc_bottom_Choice_print_right+'</div></div><div class="acti-print-option acti-print-option-double" type="double"><div class="acti-print-option-icon print-double"></div><div class="acti-print-option-title">'+App.i18n.pc_bottom_Choice_print_double+'</div></div><div class="acti-print-option acti-print-option-all" type="all"><div class="acti-print-option-icon print-all"></div><div class="acti-print-option-title">'+App.i18n.pc_bottom_Choice_print_whole+'</div></div></div></div><div class="doublePages"><div class="doublePagesBox"><div class="acti-print-option acti-print-option-left" type="left"><div class="acti-print-option-icon print-left"></div><div class="acti-print-option-title">'+App.i18n.pc_bottom_Choice_print_left+'</div></div><div class="acti-print-option acti-print-option-right" type="right"><div class="acti-print-option-icon print-right"></div><div class="acti-print-option-title">'+App.i18n.pc_bottom_Choice_print_right+'</div></div><div class="acti-print-option acti-print-option-double" type="double"><div class="acti-print-option-icon print-double"></div><div class="acti-print-option-title">'+App.i18n.pc_bottom_Choice_print_double+'</div></div><div class="acti-print-option acti-print-option-single" type="single"><div class="acti-print-option-icon print-single"></div><div class="acti-print-option-title">'+App.i18n.pc_bottom_Choice_print_current+'</div></div><div class="acti-print-option acti-print-option-all" type="all"><div class="acti-print-option-icon print-all"></div><div class="acti-print-option-title">'+App.i18n.pc_bottom_Choice_print_whole+"</div></div></div></div></div></div>"},getMemoSelectTemplate:function(){
return'<div class="jsPanel-title">'+App.i18n.memo_select_template_title_text+'</div><div class="jsPanel-btn-close"><i class="fa fa-times" aria-hidden="true"></i></div><div class="acti-memo-select-content"><div><div class="acti-memo-option" type="yellow"><div class="acti-memo-option-icon memo-yellow"></div><div class="acti-memo-option-title">'+App.i18n.memo_select_template_option_yellow_text+'</div></div><div class="acti-memo-option" type="red"><div class="acti-memo-option-icon memo-red"></div><div class="acti-memo-option-title">'+App.i18n.memo_select_template_option_red_text+'</div></div><div class="acti-memo-option" type="blue"><div class="acti-memo-option-icon memo-blue"></div><div class="acti-memo-option-title">'+App.i18n.memo_select_template_option_blue_text+'</div></div></div><div class="acti-memo-selected-title">'+App.i18n.memo_select_template_option_selected_text+'</div><button id="jumpToMemoList" class="acti-memo-selected-button">'+App.i18n.memo_select_template_option_selected_button+'<i class="oneviewer oneviewer-next"></i></button></div>'},getMemoTemplate:function(){var e='<select class="acti-memo-link-content-inlink-page-num" id="inlink-page-num-pc">',t=App.pdfInfo.get("customizeJsons");e+='<option selected="selected" disabled="disabled" value=""></option>';for(var n=0;n<t.length;n++)e+='<option value="'+t[n].target+'">'+t[n].show+"</option>";return e+="</select>",'<div class="jsPanel-title"><i class="jsPanel-title-icon"></i><span class="jsPanel-title-text">'+App.i18n.memo_template_title_text+'</span></div><div class="jsPanel-btn-close" title="'+App.i18n.memo_template_control_close_title_text+'"></div><div class="jsPanel-btn-resize"></div><div class="acti-memo-content"><div class="acti-memo-text-box"><textarea placeholder="'+App.i18n.memo_template_control_text_placeholder_text+'" tabindex="-1" maxlength="200"></textarea></div><div class="acti-memo-link-box"><div class="acti-memo-link-button-box"><div class="acti-memo-link-button-unfold"><span class="acti-memo-link-button-unfold-text">'+App.i18n.memo_template_control_unfold_text+'</span> <i class="acti-memo-link-button-unfold-icon"></i></div><div class="acti-memo-link-button-clean" title="'+App.i18n.memo_template_control_clean_link_title_text+'"></div><div class="acti-memo-link-button-edit">'+App.i18n.memo_template_control_button_edit_text+'</div></div><div class="acti-memo-link-content-box"><div class="acti-memo-link-content-text"></div><div class="acti-memo-link-content-button"><div class="acti-memo-link-content-button-radio checked" type="1"><i></i>'+App.i18n.memo_template_control_type_radio_1_text+'</div><div class="acti-memo-link-content-button-radio" type="2"><i></i>'+App.i18n.memo_template_control_type_radio_2_text+'</div></div><div class="acti-memo-link-content-outlink"><textarea placeholder="'+App.i18n.memo_template_control_outlink_placeholder_text+'" tabindex="-1" maxlength="10000"></textarea></div><div class="acti-memo-link-content-inlink"><div class="acti-memo-link-content-inlink-left"><div class="acti-memo-link-content-inlink-text">'+App.i18n.memo_template_control_inlink_title_1_text+'</div><div class="acti-memo-link-content-inlink-input">'+e+'</div><div class="acti-memo-link-content-inlink-text text-right">'+App.i18n.memo_template_control_inlink_title_2_text+'</div></div><div class="acti-memo-link-content-inlink-right"><div class="acti-memo-link-content-inlink-img"></div></div></div></div></div></div>'},getMemoTemplate_sd:function(){return'<div class="jsPanel-sd-title"><i class="jsPanel-sd-title-icon"></i><span class="jsPanel-sd-title-text">'+App.i18n.memo_template_title_text+'</span></div><div class="jsPanel-btn-close" title="'+App.i18n.memo_template_control_close_title_text+'"></div><div class="acti-memo-content"><div class="acti-memo-text-box"><textarea placeholder="'+App.i18n.memo_template_control_text_placeholder_text+'" tabindex="-1" maxlength="200" readonly="readonly"></textarea></div><div class="acti-memo-link-box"><div class="acti-memo-link-button-box"><div class="acti-memo-link-button-unfold"><span class="acti-memo-link-button-unfold-text">'+App.i18n.memo_template_control_unfold_text+'</span> <i class="acti-memo-link-button-unfold-icon"></i></div><div class="acti-memo-link-button-clean" title="'+App.i18n.memo_template_control_clean_link_title_text+'"></div><div class="acti-memo-link-button-edit">'+App.i18n.memo_template_control_button_edit_text+'</div></div><div class="acti-memo-link-content-box"><div class="acti-memo-link-content-text"></div><div class="acti-memo-link-content-button"><div class="acti-memo-link-content-button-radio checked" type="1"><i></i>'+App.i18n.memo_template_control_type_radio_1_text+'</div><div class="acti-memo-link-content-button-radio" type="2"><i></i>'+App.i18n.memo_template_control_type_radio_2_text+'</div></div><div class="acti-memo-link-content-outlink"><textarea placeholder="'+App.i18n.memo_template_control_outlink_placeholder_text+'" tabindex="-1" maxlength="10000" readonly="readonly"></textarea></div><div class="acti-memo-link-content-inlink"><div class="acti-memo-link-content-inlink-left"><div class="acti-memo-link-content-inlink-input"><select class="acti-memo-link-content-inlink-page-num"></select></div><div class="acti-memo-link-content-inlink-text text-right">'+App.i18n.memo_template_control_inlink_title_2_text+'</div></div><div class="acti-memo-link-content-inlink-right"><div class="acti-memo-link-content-inlink-img"></div></div></div></div></div></div>'},getPainterTemplate:function(){return'<div class="jsPanel-title"></div><div class="jsPanel-btn-close"><i class="fa fa-times" aria-hidden="true"></i></div><div class="acti-painter-content"><div class="acti-painter-curve" title="'+App.i18n.painter_curve_title_text+'"><div class="acti-painter-curve-icon"></div></div><div class="acti-painter-straightline" title="'+App.i18n.painter_straightline_title_text+'"><div class="acti-painter-straightline-icon"></div></div><div class="acti-painter-lineWidth acti-painter-lineWidth-1" title="'+App.i18n.painter_lineWidth_title_text+'"><div class="acti-painter-lineWidth-icon"></div><i class="acti-painter-select-icon"></i></div><div class="acti-painter-color" title="'+App.i18n.painter_color_title_text+'"><input type="color" class="colorpicker" value="#ff0000" /><i class="acti-painter-select-icon"></i></div><div class="acti-painter-back acti-inactive" title="'+App.i18n.painter_back_title_text+'"><div class="acti-painter-back-icon"></div></div><div class="acti-painter-line"></div><div class="acti-painter-clear" title="'+App.i18n.painter_clear_title_text+'"><div class="acti-painter-clear-icon"></div></div></div>'}})}),define("one-book/controllers/utils/kinesis-log-util-controller",["exports","ember"],function(e,t){App.KinesisLogUtilController=t.default.Object.create({logParam:{client_num:"",content_num:"",dl_url_key:"",dl_url:"",user_num:"",session_key:"",viewer_type:"",device_type:"",os_type:"",os_ver:"",browser_type:"",browser_ver:"",viewer_ver:"",action_type:"",page_num:"",action_value:""},fireHose:null,Kinesis:null,dwellTime:{dwell_timestamp:0,dwell_second:0},sendPage_actionType_paging_value:[],processIdList:[],turnTimeValue:1,dwellTimeValue:5,beforeReadTimeValue:1,startPage:0,changePageActionType:"",searchKeyword:"",readTimer:[],isOpen:!1,isInitRead:!1,isApp:!1,appDirection:"vertical",isCompleteTurn:!1,keys:{accessKeyId:"",secretAccessKey:""},init:function(){var e=this;this.logParam.viewer_type=App.pageConfig.get("kinesis_log_viewer_type_H5"),this.logParam.viewer_ver=App.pageConfig.get("ActiBookOne_version"),this.logParam.content_num=App.pdfInfo.get("contentNum"),this.logParam.client_num=App.pdfInfo.get("clientNum"),this.logParam.user_num=App.pdfInfo.get("userNum"),this.logParam.session_key=this.getSessionKey(),this.logParam.device_type=this.getTerminalType();var t=this.getlogParamByUa();if(this.logParam.os_type=t.os_type,this.logParam.os_ver=t.os_ver,this.logParam.browser_type=t.browser_type,this.logParam.browser_ver=t.browser_ver,"DL"==App.pdfInfo.get("viewerType")){this.logParam.dl_url=encodeURI(App.pdfInfo.get("indexUrl"));var n=$("<a></a>").attr("href",App.pdfInfo.get("shareBaseUrl"))[0],i=n.pathname.split("/");""===i[i.length-1]&&i.pop();var o=n.host+i.join("/");o.indexOf(":443")>-1?o=o.replace(":443","/"):o.indexOf(":80")>-1&&(o=o.replace(":80","/")),this.logParam.dl_url_key=md5(o),this.logParam.client_num="0"}try{console.log("1"),$.ajax({type:"get",async:!1,url:App.pageConfig.get("API_Domain")+"/api/get_kinesis_keyinfo",data:{},dataType:"json",success:function(t){console.log("2"),console.log("get_kinesis_keyinfo:",t),e.keys.accessKeyId=null===t.result.accessKeyId?"":atob(t.result.accessKeyId),e.keys.secretAccessKey=null===t.result.secretAccessKey?"":atob(t.result.secretAccessKey),console.log("get_kinesis_keyinfo:",e.keys),e.initFireHose(),e.initKinesis()},error:function(t){e.keys.accessKeyId="",e.keys.secretAccessKey="",e.initFireHose(),e.initKinesis()}})}catch(e){}var a=!0;$(window).on("blur",function(){var t=+new Date;e.dwellTime.dwell_second+=t-e.dwellTime.dwell_timestamp,e.dwellTime.dwell_timestamp=t,a=!1}),$(window).on("focus",function(){e.dwellTime.dwell_timestamp=+new Date,a=!0}),document.addEventListener("visibilitychange",function(){if("hidden"==document.visibilityState){var t=+new Date;e.dwellTime.dwell_second+=t-e.dwellTime.dwell_timestamp,e.dwellTime.dwell_timestamp=t,a=!1}else e.dwellTime.dwell_timestamp=+new Date,a=!0});var l=!0;setInterval(function(){if(a&&App.LogUtilController.reading_date){var e=+new Date;0==App.KinesisLogUtilController.dwellTime.dwell_timestamp?App.KinesisLogUtilController.dwellTime.dwell_second=0:App.KinesisLogUtilController.dwellTime.dwell_second+=e-App.KinesisLogUtilController.dwellTime.dwell_timestamp,App.KinesisLogUtilController.dwellTime.dwell_timestamp=e,App.KinesisLogUtilController.sendLogByActionTpye(App.pageConfig.get("kinesis_log_actionType_dwell_time"),l),App.LogUtilController.registerReadingLog(!1),App.KinesisLogUtilController.dwellTime.dwell_second=0,l=!1}},5e3)},resendNewLog:function(){this.logParam.session_key=this.getSessionKey(),App.KinesisLogUtilController.sendLogByActionTpye(App.pageConfig.get("kinesis_log_actionType_open")),App.KinesisLogUtilController.sendLogByActionTpye(App.pageConfig.get("kinesis_log_actionType_paging"))},initFireHose:function(e){var t=this;console.log("initFireHose:",t.keys);var n,i=(App.pdfInfo.get("envType"),t.keys.accessKeyId),o=t.keys.secretAccessKey;n=new AWS.Firehose({apiVersion:"2015-08-04",accessKeyId:i,secretAccessKey:o,region:"ap-northeast-1",httpOptions:{xhrAsync:e}}),t.set("fireHose",n)},initKinesis:function(e){var t=this;console.log("initKinesis:",t.keys);var n,i=(App.pdfInfo.get("envType"),t.keys.accessKeyId),o=t.keys.secretAccessKey;n=new AWS.Kinesis({apiVersion:"2015-08-04",accessKeyId:i,secretAccessKey:o,region:"ap-northeast-1",httpOptions:{xhrAsync:e}}),t.set("Kinesis",n)},sendLogByActionTpye:function(e,t){var n=this;if(e==App.pageConfig.get("kinesis_log_actionType_open")){n.dwellTime.dwell_timestamp=+new Date;var i=App.pdfInfo.get("readProgress"),o=App.pdfInfo.get("readFrom");this.sendAwsKinesisLog(e,i,o)}else if(e==App.pageConfig.get("kinesis_log_actionType_paging")){var a=App.pdfInfo.get("spread_mode"),o="single"==a?"1":"2",l=App.TurnUtilController.getCurrentPagenos();$.each(l,function(){var t=this;n.sendAwsKinesisLog(e,t,o)}),n.set("sendPage_actionType_paging_value",l)}else if(e==App.pageConfig.get("kinesis_log_actionType_link_click")){var r=t,s=r.type,i=r.pageno,o=r.target;o=unescape(decodeURI(o)),s!=App.pageConfig.get("Link_Type_File")&&s!=App.pageConfig.get("Link_Type_Goto")&&s!=App.pageConfig.get("Link_Type_URL")&&s!=App.pageConfig.get("Link_Type_Audio")||this.sendAwsKinesisLog(e,i,BASE64.encoder(o))}else if(e==App.pageConfig.get("kinesis_log_actionType_search")){var c=App.pdfInfo.get("searchValueArr")||[],o=c.join(" "),i="";this.sendAwsKinesisLog(e,i,BASE64.encoder(o))}else if(e==App.pageConfig.get("kinesis_log_actionType_dwell_time")){var o=Math.round(n.dwellTime.dwell_second/1e3),i=0;t||(i=-1),this.sendAwsKinesisLog(e,i,o)}else if(e==App.pageConfig.get("kinesis_log_actionType_paging_reissue")){var p=n.get("sendPage_actionType_paging_value"),a=App.pdfInfo.get("spread_mode"),o="single"==a?"1":"2",l=App.TurnUtilController.getCurrentPagenos();$.each(l,function(){var e=this;-1==p.indexOf(this)&&(n.sendAwsKinesisLog(App.pageConfig.get("kinesis_log_actionType_paging"),e,o),p.push(e))}),n.set("sendPage_actionType_paging_value",p)}},sendAwsKinesisLog:function(e,t,n){if(App.pdfInfo.get("shareBaseUrl").indexOf("://127.0.0.1")>-1||App.pdfInfo.get("shareBaseUrl").indexOf("://localhost")>-1)return!0;var i=App.pdfInfo.get("envType"),o="",a=[];a[0]=this.logParam.client_num,a[1]=this.logParam.content_num,a[2]=this.logParam.dl_url_key,a[3]=this.logParam.dl_url,a[4]=this.logParam.user_num,a[5]=this.logParam.session_key,a[6]=this.logParam.viewer_type,a[7]=this.logParam.device_type,a[8]=this.logParam.os_type,a[9]=this.logParam.os_ver,a[10]=this.logParam.browser_type,a[11]=this.logParam.browser_ver,a[12]=this.logParam.viewer_ver,a[13]=e,a[14]=t,a[15]=n,a[16]=(new Date).format("yyyyMMddhhmmssS"),o="prod"==i?"prod-actibookone-kinesis-firehose":"stage"==i?"stage-actibookone-kinesis-firehose":"dev-actibookone-kinesis-firehose";try{var l={DeliveryStreamName:o,Record:{Data:a.join(",")+"\n"}};""!==this.keys.accessKeyId&&""!==this.keys.secretAccessKey&&this.fireHose.putRecord(l,function(e,t){e||App.CommonUtilController.log_local(a[1]+"___"+a[5],!1,a.join(","))})}catch(e){}},updateAwsKinesisLog:function(e){if(App.pdfInfo.get("shareBaseUrl").indexOf("://127.0.0.1")>-1||App.pdfInfo.get("shareBaseUrl").indexOf("://localhost")>-1)return!0;var t={};if(t.appVersion=App.LogUtilController.reading_json.appVersion,t.userNum=App.LogUtilController.reading_json.userNum,t.readType=App.LogUtilController.reading_json.readType,t.readFrom=App.LogUtilController.reading_json.readFrom,t.contentNum=App.LogUtilController.reading_json.contentNum,t.terminalOs=App.LogUtilController.reading_json.terminalOs,t.terminalType=App.LogUtilController.reading_json.terminalType,t.readProgress=App.LogUtilController.reading_json.readProgress,t.historySortkeyId=App.LogUtilController.reading_json.historySortkeyId,t.accessLogSortkeyId=App.LogUtilController.reading_json.accessLogSortkeyId,t.dwellTime=App.LogUtilController.reading_json.dwellTime,-1==t.readType)return!1;t.readProgress=App.TurnUtilController.getCurrentPagenos().length>1?App.TurnUtilController.getCurrentPagenos()[1]:App.TurnUtilController.getCurrentPagenos()[0],0==t.readProgress&&(t.readProgress=1),App.PublicUtilController.updateLocalProgress(t.readProgress),t.dwellTime=e?0:Math.round(App.KinesisLogUtilController.dwellTime.dwell_second/1e3);var n=t.accessLogSortkeyId,i=App.LogUtilController.reading_date,o=App.pdfInfo.get("envType"),a="";a="prod"==o?"prod-actibookone-kinesis-data-stream":"stage"==o?"stage-actibookone-kinesis-data-stream":"dev-actibookone-kinesis-data-stream";try{var l={StreamName:a,PartitionKey:n,Data:JSON.stringify(t)};""!==this.keys.accessKeyId&&""!==this.keys.secretAccessKey&&this.Kinesis.putRecord(l,function(e,n){e||App.CommonUtilController.log_local(t.contentNum+"___"+i+"___old",!1,JSON.stringify(t))})}catch(e){}},getSessionKey:function(){var e=Math.ceil(1e6*Math.random())+"_"+ +new Date;return md5(e).substr(0,16)},getTerminalType:function(){var e=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);return device.tablet()||e?App.pageConfig.get("kinesis_log_device_type_tablet"):device.mobile()?App.pageConfig.get("kinesis_log_device_type_phone"):device.desktop()?App.pageConfig.get("kinesis_log_device_type_pc"):App.pageConfig.get("terminalType_others")},getlogParamByUa:function(){var e=new UAParser(window.navigator.userAgent),t=e.getOS(),n="",i="";t&&(i=t.version,n=App.LogUtilController.getSystem());var o=e.getBrowser(),a="",l="";if(o){l=o.version;var r=(o.name||"").toLowerCase();r=r.replace("mobile ",""),a=$.inArray(r,App.pageConfig.get("kinesis_log_browser_type"))>-1?$.inArray(r,App.pageConfig.get("kinesis_log_browser_type")):0}return{os_type:n,os_ver:i,browser_type:a,browser_ver:l}},sendReadingProcessAwsKinesisLog_Add:function(e,t,n,i,o){var a=this;console.log("55",a.keys.accessKeyId);var l=App.LogUtilController.reading_json.accessLogSortkeyId;if(null!==l&&void 0!==l&&("open"===t||App.KinesisLogUtilController.isOpen)){if("readInit"===t)t="read";else if(App.KinesisLogUtilController.isOpen&&!App.KinesisLogUtilController.isInitRead)return;var r=new Date,s={};if("read"!==t&&null!==a.readTimer&&a.readTimer.length>0){for(var c=a.readTimer,p=c.length-1;p>=0;p--)clearInterval(c[p]);a.readTimer=[]}if("read"!==t&&(a.processIdList=[]),"read"===t&&(s.is_first_log=1,o===a.dwellTimeValue&&(s.is_first_log=0)),null!==e&&void 0!==e&&""!==e)s.access_log_detail_sortkey_id=e;else{s.access_log_detail_sortkey_id=App.pdfInfo.get("clientNum")+"_"+App.pdfInfo.get("contentNum")+"_"+r.getTime()+"_"+Math.ceil(1e7*Math.random()),"read"===t&&a.processIdList.push(s.access_log_detail_sortkey_id)}var d=App.pdfInfo.get("envType"),m="";m="prod"==d?"prod-actibookone-kinesis-access-log-detail-stream":"stage"==d?"stage-actibookone-kinesis-access-log-detail-stream":"dev-actibookone-kinesis-access-log-detail-stream",s.session_key_content=App.LogUtilController.reading_json.accessLogSortkeyId,s.action_type=t,s.dwell_time="read"!==t?"":o,s.from_page="read"===t||"open"===t||"rotate"===t?"":n,s.target_page="open"===t||"rotate"===t?"":i,s.search_keyword="search"!==t?"":a.searchKeyword+"";try{var _={StreamName:m,PartitionKey:l,Data:JSON.stringify(s)};console.log("5",a.keys.accessKeyId),""!==a.keys.accessKeyId&&""!==a.keys.secretAccessKey&&this.Kinesis.putRecord(_,function(e,n){"open"===t&&function(){App.pdfInfo.get("totalPageNo");App.KinesisLogUtilController.isOpen=!0;var e=App.TurnUtilController.getCurrentPagenos();null!==e&&e.length>0&&e.forEach(function(e,t){App.KinesisLogUtilController.startPage=e}),setTimeout(function(){e.forEach(function(e,t){App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("read",""),App.KinesisLogUtilController.sendReadingProcessAwsKinesisLog_Add("","readInit","",e,App.KinesisLogUtilController.turnTimeValue)}),App.KinesisLogUtilController.isInitRead=!0;var t=setInterval(function(){e.forEach(function(e,t){App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("read",""),App.KinesisLogUtilController.sendReadingProcessAwsKinesisLog_Add(App.KinesisLogUtilController.processIdList[t]||"","read","",e,App.KinesisLogUtilController.dwellTimeValue)})},1e3*App.KinesisLogUtilController.dwellTimeValue);App.KinesisLogUtilController.readTimer.push(t)},1e3*App.KinesisLogUtilController.turnTimeValue)}()}),a.changePageActionType={actionType:"",targetPage:"",time:(new Date).getTime()}}catch(e){a.changePageActionType={actionType:"",targetPage:"",time:(new Date).getTime()}}}}})}),define("one-book/controllers/utils/link-util-controller",["exports","ember"],function(e,t){App.LinkUtilController=t.default.Object.create({resetPageLinkFun:function(){var e=this,t=App.pdfInfo.get("linkJsons");t||(App.pdfInfo.setLinkJsons(),t=App.pdfInfo.get("linkJsons")||{});var n=App.pdfInfo.get("url_Prefix"),i=App.pdfInfo.get("url_Suffix"),o=(App.pdfInfo.get("contentInfo"),App.pdfInfo.get("direction"),App.pdfInfo.get("spread_mode"),parseInt(App.pdfInfo.get("totalPageNo"))),a=App.pdfInfo.get("link_alpha"),l=App.pageConfig.get("prefixDivLink_Page");App.pageConfig.get("divLink_Main");0==$("#main_divLink_id").length&&$("#book_main").append("<div id='main_divLink_id' class='link-layer' style='z-index: "+(o+100)+";'></div>");var r=$("#main_divLink_id"),s=App.TurnUtilController.getViewPagenos(),c=s.slice(0);c=c.sort();for(var p=0;p<c.length;p++){var d=l+c[p];0==$("#"+d).length&&r.append("<div class='link_layer' pageno='"+c[p]+"' id='"+d+"'></div>")}e.reset();var m=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);$("#main_divLink_id > div.link_layer").each(function(){var e=$(this),l=parseInt(e.attr("pageno")),r=t["p"+l];return!r||r.length<=0||(App.TurnUtilController.isCurrentPagenosContainsPageno(l)?$("> div",e).length>0||void $.each(r,function(){this.pageno=l;var t={};if(t.top=100*parseFloat(this.y)+"%",t.left=100*parseFloat(this.x)+"%",t.width=100*parseFloat(this.w)+"%",t.height=100*parseFloat(this.h)+"%",this.type==App.pageConfig.get("Link_Type_Video")){var r={};r.background="#000000",r.width="100%",r.height="99%";var s={};s.src=n+"attachments/"+this.target+i,s.controls="controls",s.playsinline="playsinline",s.autobuffer="autobuffer",s.id="star-video-"+ +new Date,App.CommonUtilController.isChrome||1!=this.autoplay||(s.autoplay="autoplay");var c=null;c=(device.mobile()||device.ios())&&1==this.autoplay?$("<video class='video-js vjs-has-started' muted='muted' autoplay='autoplay' playsinline='playsinline' controlsList='nodownload'>").css(r).attr(s):$("<video class='video-js vjs-has-started' controlsList='nodownload' crossOrigin='anonymous'>").css(r).attr(s),App.CommonUtilController.isChrome&&1==this.autoplay&&(c[0].oncanplay=function(){this.play()});var p=$("<div>").addClass("linkBlockArea").css(t).css("z-index",o+150);p.append(c),e.append(p);var d=!1;(device.mobile()||device.tablet()||m||1==this.autoplay)&&(d=!0);var _=App.pdfInfo.get("dispLanguage"),u="en";"1"==_?u="ja":"2"==_?u="en":"3"==_?u="zh-CN":"4"==_&&(u="zh-TW"),videojs(s.id,{language:u,controls:!0,fluid:!1,bigPlayButton:!1,preload:"auto",autoplay:1==this.autoplay,muted:d,inactivityTimeout:6e3,sources:[{src:s.src}]},function(){if(device.ios()&&(device.tablet()||m)&&screenfull&&screenfull.raw){var e=$(".vjs-fullscreen-control").clone(!1);e.removeClass("vjs-fullscreen-control").addClass("vjs-fullscreen-control-star"),$(".vjs-fullscreen-control").after(e).remove();var t=$("video")[0];App.CommonUtilController.setTapEvent(".vjs-fullscreen-control-star"),$(".vjs-fullscreen-control-star").on("tapOne",function(){screenfull.request(t)})}this.on("play",function(){$("audio").each(function(){this.pause(),$(this).parent().hide()})})}),App.CommonUtilController.forbiddenContextmenu()}else{t.opacity=a||0==a?a:.5,t.background=App.pdfInfo.get("link_color");var p=$("<div>").addClass("linkBlockArea").addClass("linkTwinkle").css(t).css("z-index",o+150).data("info",this).attr("pageno",l);this.type!=App.pageConfig.get("Link_Type_URL")||!this.target||0!=this.target.toLowerCase().indexOf("mailto:")&&0!=this.target.toLowerCase().indexOf("tel:")?p.addClass("linkBlock"):p.html('<a class="url-link" target="_blank" href="'+this.target+'"></a>'),e.append(p)}}):($(this).empty(),!0))}),0==a||setTimeout(function(){var e=$("#book_main div.link-layer div.linkTwinkle"),t=parseFloat(App.pdfInfo.get("link_twinkle"));e.each(function(){this.style["animation-iteration-count"]=t}),e.addClass("link_twinkle")},250)},resetLinkTwinkle:function(e,t){},autoPlayAudio:function(e){var t=App.pdfInfo.get("url_Prefix"),n=App.pdfInfo.get("url_Suffix");$("#pageLink_audio_id").parent().show();var i={};i.src=t+"attachments/"+e+n,i.autoplay="autoplay",$("#pageLink_audio_id").attr(i),$("#pageLink_audio_id").on("ended",function(){$("#pageLink_audio_id").parent().hide()})},stopPlayAudio:function(e){var t={};t.src="",$("#pageLink_audio_id").attr(t),$("#pageLink_audio_id").parent().hide()},reset:function(){var e=this,t=parseInt($("#pageLink_audio_id").attr("pageno"));App.TurnUtilController.isViewPagenosContainsPageno(t)||e.stopPlayAudio();var n=App.pdfInfo.get("spread_mode");$("#main_divLink_id > div.link_layer").each(function(){var e=$(this),t=parseInt(e.attr("pageno"));$(this).removeClass("double-page single-page"),App.TurnUtilController.isViewPagenosContainsPageno(t)?("double"==n?$(this).addClass("double-page"):$(this).addClass("single-page"),"L"===App.TurnUtilController.isPositionByPageno(t)?$(this).css("float","left"):$(this).css("float","right")):$("video",this).each(function(){this.pause()})})}})}),define("one-book/controllers/utils/log-util-controller",["exports","ember"],function(e,t){App.LogUtilController=t.default.Object.create({reading_date:null,reading_json:{},registerReadingLog:function(e){var t=this;parseInt(App.pdfInfo.get("readProgress"));!t.reading_date||(new Date).getTime()-t.reading_date>36e5?(t.reading_date&&(new Date).getTime()-t.reading_date>36e5&&App.KinesisLogUtilController.resendNewLog(),t.readingLog_Add()):App.KinesisLogUtilController.updateAwsKinesisLog(e)},readingLog_Add:function(){var e=this;if(e.reading_json.appVersion=App.pageConfig.get("ActiBookOne_version"),e.reading_json.userNum=App.pdfInfo.get("userNum"),e.reading_json.readType=App.pdfInfo.get("readType"),e.reading_json.readFrom=App.pdfInfo.get("readFrom"),e.reading_json.contentNum=App.pdfInfo.get("contentNum"),e.reading_json.contentType=App.pdfInfo.get("contentType"),e.reading_json.contentUpdateDate=App.pdfInfo.get("contentUpdateDate"),e.reading_json.contentTitle=App.pdfInfo.get("contentTitle"),e.reading_json.totalPageTime=App.pdfInfo.get("totalPageTime"),e.reading_json.clientNum=App.pdfInfo.get("clientNum"),e.reading_json.terminalOs=e.getSystem(),e.reading_json.terminalType=e.getTerminalType(),-1==e.reading_json.readType)return!1;var t=App.TurnUtilController.getCurrentPagenos();device.mobile()?e.reading_json.readProgress=t[0]:e.reading_json.readProgress=t.length>1?t[1]:t[0],0==e.reading_json.readProgress&&(e.reading_json.readProgress=1),App.pageConfig.get("API_Domain")&&(App.KinesisLogUtilController.isOpen=!1,console.log("3"),$.ajax({type:"POST",async:!1,url:App.pageConfig.get("API_Domain")+"/api/create_access_log",data:{parameters:JSON.stringify(e.reading_json)},dataType:"json",success:function(t){console.log("4"),"2000"==t.result.accessStatus.code&&(e.reading_date=(new Date).getTime(),e.reading_json.historySortkeyId=t.result.resultInfo.historySortkeyId,e.reading_json.accessLogSortkeyId=t.result.resultInfo.accessLogSortkeyId,setTimeout(function(){App.KinesisLogUtilController.changePageActionType=e.getReadFlag("open",""),App.KinesisLogUtilController.sendReadingProcessAwsKinesisLog_Add("","open","","","")},1e3*App.KinesisLogUtilController.turnTimeValue))},error:function(e){}}))},readingLog_Update:function(e){var t=this;if(-1==t.reading_json.readType)return!1;t.reading_json.readProgress=App.TurnUtilController.getCurrentPagenos().length>1?App.TurnUtilController.getCurrentPagenos()[1]:App.TurnUtilController.getCurrentPagenos()[0],0==t.reading_json.readProgress&&(t.reading_json.readProgress=1),t.reading_json.dwellTime=e?0:Math.round(App.KinesisLogUtilController.dwellTime.dwell_second/1e3),$.ajax({type:"POST",url:App.pageConfig.get("API_Domain")+"/api/update_access_log",data:{parameters:JSON.stringify(t.reading_json)},dataType:"json",success:function(e){App.CommonUtilController.log_local(t.reading_json.contentNum+"___"+t.reading_date+"___old",!1,JSON.stringify(t.reading_json))},error:function(e){}})},getSystem:function(){return device.android()?App.pageConfig.get("terminalOs_Android"):device.ios()?App.pageConfig.get("terminalOs_iOS"):device.windows()?App.pageConfig.get("terminalOs_windows"):App.browser.versions.mac?App.pageConfig.get("terminalOs_mac"):App.pageConfig.get("terminalOs_others")},getTerminalType:function(){var e=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);return device.tablet()||e?App.pageConfig.get("terminalType_pad_browser"):device.mobile()?App.pageConfig.get("terminalType_phone_browser"):device.desktop()?App.pageConfig.get("terminalType_pc_browser"):App.pageConfig.get("terminalType_others")},getReadFlag:function(e,t){var n=App.KinesisLogUtilController.readTimer;if(null!==n&&n.length>0&&"read"!==e){for(var i=n.length-1;i>=0;i--)clearInterval(n[i]);App.KinesisLogUtilController.readTimer=[]}return{actionType:e,targetPage:t,time:(new Date).getTime()}}})}),define("one-book/controllers/utils/memo-util-controller",["exports","ember"],function(e,t){App.MemoUtilController=t.default.Object.create({memoIsCreateState:!1,isChangeMemoLinkInfo:!1,init:function(){},hideMemoJspanel:function(){$("#book_main .jsPanel-theme-memo").hide(),$("#book_main .jsPanel-theme-sd-memo").hide()},showMemoJspanel:function(){App.PainterUtilController.penIsActive||($("#book_main .jsPanel-theme-memo").show(),$("#book_main .jsPanel-theme-sd-memo").show())},clearMemoJspanel:function(){App.HammerUtilController.removeMemoHammerList(),$("#book_main .jsPanel-theme-memo").remove(),$("#book_main .jsPanel-theme-sd-memo").remove()},resetPageMemoList:function(e){if(this.clearMemoJspanel(),!App.PainterUtilController.penIsActive)for(var t=App.TurnUtilController.getCurrentPagenos(),n=0;n<t.length;n++)!function(n){var i=t[n],o=App.StorageUtilController.getMemoByPageno(i);(o||o.updateDate)&&$.each(o.memoData,function(){if(device.desktop()||device.windowsTablet())window.openMomeID==this.id&&(window.openMomeID="",this.foldStatus=0),App.JspanelUtilController.createMemoJspanel_pc(this,i);else{var t=!1;window.openMomeID==this.id&&(window.openMomeID="",t=!0),App.JspanelUtilController.createMemoJspanel_sd(this,i,t,e)}})}(n)},refreshMemoShow:function(e,t){App.PainterUtilController.penIsActive||(App.HammerUtilController.removeMemoHammerById(e.id),$("#"+e.id).remove(),device.desktop()||device.windowsTablet()?App.JspanelUtilController.createMemoJspanel_pc(e,t):App.JspanelUtilController.createMemoJspanel_sd(e,t,!0))},calcMemoShowAttribute:function(e,t){var n=App.TurnUtilController.isPositionByPageno(t),i=$("#main_divLink_id").width(),o=$("#main_divLink_id").height(),a=App.TurnUtilController.getCurrentPagenos().length,l=0,r=parseFloat(e.y)*o,s=App.TurnUtilController.getPageSize().width,c=i;n?"R"==n?l=(parseFloat(e.x)+1)*s:(l=parseFloat(e.x)*s,1==a&&(c=i/2)):l=parseFloat(e.x)*s;var p=0,d=0,m=parseFloat(e.width),_=parseFloat(e.height);1==e.foldStatus&&(m=54,_=54),l+m>c&&(p=c-l-m),r+_>o&&(d=o-r-_);var u="";return(p||d)&&(u="translate("+p+"px, "+d+"px)"),{left:l/i*100+"%",top:100*parseFloat(e.y)+"%",transform:u,width:m+"px",height:_+"px"}},calcMemoSavePosition:function(e){var t=App.TurnUtilController.getBookSize(),n=App.TurnUtilController.getCurrentPagenos(),i=App.pdfInfo.get("spread_mode"),o=0,a=0,l=0;if(1==n.length)a=n[0],l=n[0];else{"L"==App.TurnUtilController.isPositionByPageno(n[0])?(a=n[0],l=n[1]):(l=n[0],a=n[1])}var r=0,s=e.top/t.height,c=Math.ceil(e.left);if("double"==i){var p=t.width/2;c>=t.width/2?(r=(c-p)/p,o=l):(r=c/p,o=a)}else r=c/t.width,o=a;return{x:r,y:s,pageno:o}},calcMemoPositionLimits:function(e){var t=App.TurnUtilController.getCurrentPagenos(),n=App.TurnUtilController.getBookSize(),i=App.pdfInfo.get("spread_mode"),o=0,a=n.height-e.height,l=0;if(1==t.length&&"double"==i){"R"==App.TurnUtilController.isPositionByPageno(t[0])?(o=n.width/2,l=n.width-e.width):l=n.width/2-e.width}else l=n.width-e.width;return{top_min:0,left_min:o,top_max:a,left_max:l}},resetPageMemoListPosition:function(){$("#book_main div.jsPanel-theme-memo").each(function(){var e=$(this).attr("pageno"),t=$(this).attr("id");if(e&&t){var n=App.StorageUtilController.getMemoByPagenoAndId(e,t),i=App.MemoUtilController.calcMemoShowAttribute(n,e);$(this).removeClass("link-animate"),$(this).css({transform:i.transform})}})},getCurrentMemoListMaxLayer:function(){for(var e=App.TurnUtilController.getCurrentPagenos(),t=0,n=0;n<e.length;n++){var i=App.StorageUtilController.getMemoByPageno(e[n]);i&&i.updateDate&&$.each(i.memoData||[],function(){parseInt(this.layer)>t&&(t=parseInt(this.layer))})}return t},isCurrentBookHasMemo:function(){for(var e=parseInt(App.pdfInfo.get("totalPageNo")),t=!1,n=0;n<e;n++){var i=n+1,o=App.StorageUtilController.getMemoByPageno(i);if(void 0!==o&&void 0!==o.memoData&&o.memoData.length>0){t=!0;break}}return t},setMemoTopest:function(e){if(e){var t=$(e).attr("pageno"),n=$(e).attr("id"),i=App.StorageUtilController.getMemoByPagenoAndId(t,n),o=parseInt(App.pdfInfo.get("totalPageNo")),a=this.getCurrentMemoListMaxLayer();a!=i.layer&&(i.layer=a+1,$(e).css("z-index",o+500+parseInt(i.layer)),
App.StorageUtilController.pushMemoData(t,i))}},bindMemoMoveEvent:function(e){var t=$(e).attr("id"),n=void 0,i=void 0,o=void 0;if(e.find("div.jsPanel-title").get(0)){var a=0,l=0,r=App.HammerUtilController.getMemoMove_hammer_pan(e.find("div.jsPanel-title").get(0),t);r.on("panstart",function(t){n=App.MemoUtilController.calcMemoPositionLimits({width:$(e).width(),height:$(e).height()}),i=$(e).position(),o=$(e).attr("pageno"),a=t.srcEvent.clientX,l=t.srcEvent.clientY,e.removeClass("link-animate"),App.MemoUtilController.setMemoTopest(e)}),r.on("panmove",function(t){if(t.preventDefault(),n&&i){$(e).addClass("link-hammer-moving");var o=i.top+t.srcEvent.clientY-l,r=i.left+t.srcEvent.clientX-a;o>n.top_max?o=n.top_max:o<n.top_min&&(o=n.top_min),r>n.left_max?r=n.left_max:r<n.left_min&&(r=n.left_min),$(e).css({top:o+"px",left:r+"px",transform:""})}}),r.on("panend",function(a){if($(e).hasClass("link-hammer-moving")){var l=App.StorageUtilController.getMemoByPagenoAndId(o,t),r=App.MemoUtilController.calcMemoSavePosition($(e).position());l.x=r.x,l.y=r.y,o!=r.pageno&&App.StorageUtilController.removeMemoDataById(o,t);var s=App.MemoUtilController.calcMemoShowAttribute(l,r.pageno);$(e).css({left:s.left,top:s.top}),$(e).attr("pageno",r.pageno),App.StorageUtilController.pushMemoData(r.pageno,l)}$(e).removeClass("link-hammer-moving"),n=null,i=null})}},bindMemoClickEvent:function(e){if(e.find("div.jsPanel-title").get(0)){var t=$(e).attr("id");App.HammerUtilController.getMemoClick_hammer_tap(e.find("div.jsPanel-title").get(0),t).on("tap",function(n){var i=$(e).attr("pageno");if(e.removeClass("link-animate"),App.MemoUtilController.setMemoTopest(e),!$(e).hasClass("link-folding")){$(e).addClass("link-folding");var o=App.StorageUtilController.getMemoByPagenoAndId(i,t);$(e).hasClass("link-state-fold")?o.foldStatus=0:o.foldStatus=1,e.addClass("link-animate");var a=App.MemoUtilController.calcMemoShowAttribute(o,i),l=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);(device.desktop()||device.windowsTablet()||device.tablet()||l)&&e.css({transform:a.transform}),$(e).hasClass("link-state-fold")?($(e).removeClass("link-animate-fold"),$(e).animate({width:o.width,height:o.height},300,function(){$(e).removeClass("link-state-fold"),$(e).removeClass("link-folding")})):($(e).addClass("link-state-fold"),$(e).animate({width:"54px",height:"54px"},300,function(){$(e).addClass("link-animate-fold"),$(e).removeClass("link-folding")})),App.StorageUtilController.pushMemoData(i,o)}})}}})}),define("one-book/controllers/utils/painter-util-controller",["exports","ember"],function(e,t){App.PainterUtilController=t.default.Object.create({painterSize:{width:0,height:0,maxWidth:1228,maxHeight:1228},painterControl:null,currentPainterPageno:[],currentPainterPagenoPosition:{},penIsActive:!1,penDrawing:!1,initPainter:function(){var e=this;$("#book_main").append("<div id='main_painter_id' class='painter-layer'></div>"),e.setPainterLayer_activeState(!1),e.resetPainterSize(),this.painterControl=new Painter,this.painterControl.ready("#main_painter_id",{toolbar:!1,dragcallback:function(e){}}),this.painterControl.lineColor="#000000",this.painterControl.start(function(){e.penDrawing=!0,$("#painter_dialog").hide(),$("#acti-header-container").hide(),$("#acti-mobile-painter-content").hide(),$("div.sp-container:first").hasClass("sp-hidden")||$("input.colorpicker").spectrum("hide")}),this.painterControl.listen(function(){e.penDrawing=!1,$("#painter_dialog").show(),$("#acti-header-container").show(),$("#acti-mobile-painter-content").show();var t=App.PainterUtilController.painterControl.getCurrentTunnel();t&&t.length>0?($("#painter_dialog div.acti-painter-back").removeClass("acti-inactive"),$("#acti-mobile-painter-content .acti-mobile-painter-content-back").removeClass("acti-inactive")):($("#painter_dialog div.acti-painter-back").addClass("acti-inactive"),$("#acti-mobile-painter-content .acti-mobile-painter-content-back").addClass("acti-inactive"))})},resetPainterPenType:function(e){e=e||"1",App.PainterUtilController.painterControl.penType=e,"1"==e?(App.PainterUtilController.painterControl.lineWidth=3,App.PainterUtilController.painterControl.alpha=1):"2"==e?(App.PainterUtilController.painterControl.lineWidth=5,App.PainterUtilController.painterControl.alpha=1):"3"==e?(App.PainterUtilController.painterControl.lineWidth=8,App.PainterUtilController.painterControl.alpha=.5):"4"==e&&(App.PainterUtilController.painterControl.lineWidth=15,App.PainterUtilController.painterControl.alpha=.5),$("#painter_dialog div.acti-painter-lineWidth").removeClass("acti-painter-lineWidth-1 acti-painter-lineWidth-2 acti-painter-lineWidth-3 acti-painter-lineWidth-4"),$("#painter_dialog div.acti-painter-lineWidth").addClass("acti-painter-lineWidth-"+e),$("#acti-mobile-painter-content div.acti-mobile-painter-content-lineWidth").removeClass("acti-mobile-painter-content-lineWidth-1 acti-mobile-painter-content-lineWidth-2 acti-mobile-painter-content-lineWidth-3 acti-mobile-painter-content-lineWidth-4"),$("#acti-mobile-painter-content div.acti-mobile-painter-content-lineWidth").addClass("acti-mobile-painter-content-lineWidth-"+e)},resetPainterSize:function(){var e=App.pdfInfo.get("first_width"),t=App.pdfInfo.get("first_height"),n=0,i=0,o=this.painterSize.maxWidth,a=this.painterSize.maxHeight;o/a<=e/t?(n=o,i=o*(t/e)):(n=a*(e/t),i=a),this.painterSize.width=Math.floor(n),this.painterSize.height=Math.floor(i)},clearPainterLayer:function(){$("#book_main img.acti-page-pen-img").each(function(){$(this).attr("src",""),$(this).removeClass("acti-page-pen-img-show")}),this.painterControl.clearHistory(),$("#painter_dialog div.acti-painter-back").addClass("acti-inactive"),$("#acti-mobile-painter-content .acti-mobile-painter-content-back").addClass("acti-inactive")},hidePainterLayer:function(){$("#book_main img.acti-page-pen-img").removeClass("acti-page-pen-img-show"),$("#main_painter_id").hide()},showPainterLayer:function(){$("#book_main img.acti-page-pen-img").show(),$("#book_main img.acti-page-pen-img").each(function(){$(this).attr("src")&&$(this).addClass("acti-page-pen-img-show")}),$("#main_painter_id").show()},setPainterLayer_activeState:function(e,t){var n=parseInt(App.pdfInfo.get("totalPageNo"));this.penIsActive=e,e?($("#main_painter_id").css({"z-index":n+200}),App.TurnUtilController.resetBookTurn_disable(!0),App.MemoUtilController.hideMemoJspanel(),window.openMomeID=""):($("#main_painter_id").css({"z-index":n+80}),App.TurnUtilController.resetBookTurn_disable(!1),"refreshMemo"===t&&App.MemoUtilController.resetPageMemoList())},getCanvasImgAndSaveStorage:function(e){function t(t,o){var l=s[o],c=[],p=t.turnDataToTunnel(JSON.parse(a)),d=[];if(p&&(d=p.paths),"R"==l&&1!=r)for(var m=0;m<d.length;m++){for(var _=$.extend(!0,{},d[m]),u=_.points,g=0;g<u.length;g++)u[g]&&u[g].x&&(u[g].x=u[g].x-n.painterSize.width);c.push(_)}else for(var m=0;m<d.length;m++)c.push($.extend(!0,{},d[m]));t._tunnel.paths=c,t.repaint(t.getCurrentTunnel().length);var h=t._canvas.element.toDataURL("image/png");App.StorageUtilController.setPenByPageno(o,h),$("#save_canvas_layer-p"+o).remove(),i++,e&&r==i&&n.resetDrawPagePen()}var n=this,i=0,o=this.painterControl.getCurrentTunnel();if(o.paths&&0!=o.paths.length)for(var a=JSON.stringify(o),l=this.currentPainterPageno.slice(0),r=l.length,s=$.extend(!0,{},this.currentPainterPagenoPosition),c=0;c<r;c++)!function(e){var i=l[e],o="save_canvas_layer-p"+i,a=$('<div class="save-canvas-layer"></div>');a.css({width:0,height:0,overflow:"hidden"}),a.attr("id",o),$("body").append(a);var r=new Painter;r.ready("#"+o,{toolbar:!1,dragcallback:function(e){}}),r._canvas.width=n.painterSize.width,r._canvas.height=n.painterSize.height;var s=App.StorageUtilController.getPenByPageno(i);s&&s.penData?function(e,n){var i=e.getContext(),o=new Image;o.onload=function(){i.drawImage(o,0,0,o.width,o.height),t(e,n)},o.onerror=function(){t(e,n)},o.src=s.penData}(r,i):t(r,i)}(c)},resetPagePainterLayer:function(){var e=this,t=App.pdfInfo.get("spread_mode");e.clearPainterLayer();var n=$("#main_painter_id canvas");if(n&&1==n.length){n.css({left:"0",right:"",width:""});var i=App.TurnUtilController.getCurrentPagenos();this.currentPainterPageno=i;for(var o={},a=0;a<i.length;a++){var l=i[a],r=App.TurnUtilController.isPositionByPageno(l);o[l+""]=r}if(this.currentPainterPagenoPosition=o,1==i.length){this.painterControl._canvas.width=this.painterSize.width,this.painterControl._canvas.height=this.painterSize.height;var s=i[0],c=App.TurnUtilController.isPositionByPageno(s);"double"==t&&("R"==c?n.css({left:"",right:"0",width:"50%"}):n.css({left:"0",right:"",width:"50%"})),this.painterControl.stageWidth=this.painterSize.width,this.painterControl.stageHeight=this.painterSize.height}else this.painterControl._canvas.width=2*this.painterSize.width,this.painterControl._canvas.height=this.painterSize.height,this.painterControl.stageWidth=2*this.painterSize.width,this.painterControl.stageHeight=this.painterSize.height;e.resetPainterCanvasScale(),e.resetDrawPagePen()}},resetDrawPagePen:function(){this.clearPainterLayer();for(var e=App.TurnUtilController.getCurrentPagenos(),t=parseInt(App.pdfInfo.get("totalPageNo")),n=0;n<e.length;n++){var i=App.StorageUtilController.getPenByPageno(e[n]);if(i.penData){var o=$("#pen_img_p"+e[n])[0];o.onload=function(){$(this).addClass("acti-page-pen-img-show"),$(this).css({"z-index":t+70})},o.src=i.penData}}},resetPainterCanvasScale:function(){var e=$("#main_painter_id canvas");if(e&&1==e.length){var t=e.width(),n=e.height(),i=App.TurnUtilController.getCurrentPagenos().length;this.painterControl.setScale(t/(this.painterSize.width*i),n/this.painterSize.height)}},bindPainterDialogMoveEvent_pc:function(){var e=void 0,t=void 0,n=void 0,i=void 0,o=void 0,a=App.HammerUtilController.getPainterDialog_hammer_pan(),l=0,r=0;a.on("panstart",function(a){e=$(window).width(),t=$(window).height()-43,n=$("#painter_dialog").width(),i=$("#painter_dialog").height(),l=a.srcEvent.clientX,r=a.srcEvent.clientY,o=$("#painter_dialog").position()}),a.on("panmove",function(a){a.preventDefault(),$("input.colorpicker").spectrum("hide"),$("#painter_dialog").addClass("draggablePainter-dragging");var s=o.top+a.srcEvent.clientY-r,c=o.left+a.srcEvent.clientX-l;s<0?s=0:s>t-i&&(s=t-i),c<0?c=0:c>e-n&&(c=e-n),$("#painter_dialog").css({top:s+"px",left:c+"px",transform:"none"})}),a.on("panend",function(t){var o=$("#painter_dialog").position(),a=o.left+n/2,l=o.top+i/2,r=a/e*100,s=l/$(window).height()*100;$("#painter_dialog").css({top:"calc("+s+"%)",left:"calc("+r+"%)",transform:""}),$("#painter_dialog").removeClass("draggablePainter-dragging")})}})}),define("one-book/controllers/utils/pdf-util-controller",["exports","ember","one-book/controllers/pdf-core/pdf_rendering_queue","one-book/controllers/pdf-core/pdf-main-controller","one-book/controllers/pdf-core/book-viewer-controller","one-book/controllers/pdf-core/search-viewer-controller","one-book/controllers/pdf-core/pdf-cache-controller"],function(e,t,n,i,o,a,l){App.PdfUtilController=t.default.Object.create({pdfLoadObjects:t.default.A(),pageContentArr:t.default.A(),textDivsArr:t.default.A(),textContentArr:t.default.A(),matchesArr:t.default.A(),pagenoZoomScaleArray:t.default.A(),matchResultArray:t.default.A(),pdfView:null,keywordsArr:[],rectArr:[],xmlSizeArr:[],appendCanvasFlg:!0,showCanvasFlg:!0,oldKeyWords:"",reduceNum:0,matchStrArr:[],clearRectFlg:!1,pageHistory:[],currKeyOrder:"",currKeyText:"",currkeyPage:"",clearBtnFlg:!1,orSearchType:!1,lastKeyNum:0,lastKeyPage:[],lastKeyWord:"",resultList:[],cleanPhraseMatch:function(e){var t=this,n=t.get("matchesArr");if(!n||!n.length)return!0;for(var i=0,o=n.length;i<o;i++)if(n[i]&&n[i].length)for(var a=n[i],l=t.get("textDivsArr")[i],r=t.get("textContentArr")[i].items,s=0;s<a.length;s++){var c=l[s];c.textContent=r[s].str,c.className=""}e&&App.pdfInfo.set("selectedPagenoAndDivIndex",{}),t.set("matchesArr",[])},pdfViewZoomFun:function(e,t,n){var i=this,o=$.event.fix(e),a=$(o.target).hasClass("link_layer")?$(o.target):$(o.target).parents("div.link_layer:first"),l=$(o.target).hasClass("zoom-button")?$(o.target):$(o.target).parents(".zoom-button:first"),r=$(o.target).hasClass("painter-layer")?$(o.target):$(o.target).parents(".painter-layer:first");if(!a.length&&!l.length&&!r.length)return!1;var s=App.pdfInfo.get("currentZoomScale");App.pdfInfo.set("currentZoomScale",t);var c;if(o.clientX)c=o;else if(e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length)c=e.originalEvent.changedTouches[0];else{if(!e.changedPointers||!e.changedPointers.length)return!1;c=e.changedPointers[0]}var p=c.clientX-parseInt($("div.pack_book_div").css("margin-left")),d=c.clientY;$("#acti-header-container").length&&(d-=$("#acti-header-container").height()),l.length>0&&(p=$(window).width()/2,d=$(window).height()/2);var m=p-$("#book_main")[0].offsetLeft,_=d-$("#book_main")[0].offsetTop||0;$("#book_main").width(),$("#book_main").height();if(App.TurnUtilController.setPageMainDivSize(),App.PdfUtilController.cleanPhraseMatch(!1),clearTimeout(window.zoom_redraw),n?App.MemoUtilController.hideMemoJspanel():window.zoom_redraw=setTimeout(function(){App.bookViewerController.pdfPagesZooming(),App.MemoUtilController.resetPageMemoList()},200),device.windows()){var u=App.HammerUtilController.getBookMain_hammer_pan();u.off("panstart"),u.off("panmove"),u.off("panend")}else{var g=$.isTouch?{down:"touchstart",move:"touchmove",up:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup"};$("#book_main").off(g.down+".pageZoom"),$(document).off(g.move+".pageZoom"),$(document).off(g.up+".pageZoom")}if(1!=t){var h=(App.pdfInfo.get("hasCover"),App.pdfInfo.get("direction"),App.pdfInfo.get("spread_mode"),$("#book_main").width()),f=$("#book_main").height(),v=App.pdfInfo.get("book_max_width"),b=App.pdfInfo.get("book_max_height");m=m/s*t-p,_=_/s*t-d;var x=h-v,A=f-b;h>=v?(m<0?m=0:x<m&&(m=x),m=-m):m=(v-h)/2,f>=b?(_<0?_=0:A<_&&(_=A),_=-_):_=(b-f)/2,$("#book_main").css({left:m+"px",top:_+"px"}),i.bindPageDrag(),App.TurnUtilController.setZoomStopfun()}else App.TurnUtilController.bookPositionCenter(),App.TurnUtilController.setZoomStopfun(),App.TurnUtilController.setZoomRunfun();"1"==App.pdfInfo.get("compatibleFlg")&&App.TurnUtilController.changeBackgroundImg()},bindPageDrag:function(){function e(e){if(e.targetTouches&&e.targetTouches.length>1)return!1;if(!($(e.target).closest(".jsPanel-theme-memo").length>0||$(e.target).closest(".jsPanel-theme-sd-memo").length>0||$(e.target).closest("#main_painter_id").length>0)){var t,n=parseInt($("#book_main").css("left")),i=parseInt($("#book_main").css("top"));if(e.clientX)t=e;else if(e.originalEvent)t=e.originalEvent.changedTouches[0];else{if(!e.srcEvent)return;t=e.srcEvent}var o=t.clientX,a=t.clientY,l={x:n,y:i,clientX:o,clientY:a,droping:!0};$("#book_main").data("dev",l)}}function t(e){if(e.targetTouches&&e.targetTouches.length>1)return!1;var t=$("#book_main").data("dev");if(t&&t.droping){e.preventDefault();var n;if(e.clientX)n=e;else if(e.originalEvent)n=e.originalEvent.changedTouches[0];else{if(!e.srcEvent)return;n=e.srcEvent}var i=n.clientX,o=n.clientY,a=i-t.clientX+t.x,l=o-t.clientY+t.y,r=$("#book_main").width(),s=$("#book_main").height(),c=App.pdfInfo.get("book_max_width"),p=App.pdfInfo.get("book_max_height"),d={};r>=c&&(d.left=a+"px"),s>=p&&(d.top=l+"px"),$("#book_main").css(d)}}function n(e){var t=$("#book_main").width(),n=$("#book_main").height(),i=App.pdfInfo.get("book_max_width"),o=App.pdfInfo.get("book_max_height"),a=parseInt($("#book_main").css("left")),l=parseInt($("#book_main").css("top")),r=t-i,s=n-o,c={};t>=i&&(a>0?c.left="0px":r<-a&&(c.left=-r+"px")),n>=o&&(l>0?c.top="0px":s<-l&&(c.top=-s+"px")),$("#book_main").animate(c,100),$("#book_main").data("dev",null)}if(device.windows()){var i=App.HammerUtilController.getBookMain_hammer_pan();i.on("panstart",e),i.on("panmove",t),i.on("panend",n)}else{var o=$.isTouch?{down:"touchstart",move:"touchmove",up:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup"};$("#book_main").on(o.down+".pageZoom",e),$(document).on(o.move+".pageZoom",t),$(document).on(o.up+".pageZoom",n)}},fullTextMatch:function(){var e=this;e.set("matchResultArray",[]);for(var t=App.pdfInfo.get("totalPageNo"),n=[],i=1;i<=t;i++)n.push(i);var o=App.pdfInfo.get("searchValueArr");$("#acti_search_value").text(o.join(" ")),$("#acti-sidebar-search-content-title div").show(),$("#acti_search_resultNum_div").text(App.i18n.pc_toolbar__search__Retrieval),e.loadPDFFun_match(n,0)},loadPDFFun_match:function(e,t){function n(){i.loadPDFFun_match(e,++t)}var i=this;if(0==App.pdfInfo.get("searchValueArr").length)return!1;if(e&&!e[t]){var o="";o=device.mobile()?App.i18n.sd_toolbar__search__result:App.i18n.pc_toolbar__search__result;var a=i.get("matchResultArray");return $("#acti_search_resultNum_div").text(o+a.length+App.i18n.pc_toolbar__search__piece),!1}if(!e||e.length<=t||0===e[t])return!1;var l=i.get("pdfLoadObjects"),r=i.get("pageContentArr"),s=e[t],c=l[s],p=r[s];if(c&&p)"404"==c?n():i.renderSearchResult_match(e,t,p);else{i.getPDFTask(s).then(function(n){i.loadPDFContent_match(n,e,t),l[s]=n,i.set("pdfLoadObjects",l)},function(){n()})}},loadPDFContent_match:function(e,t,n){var i=this,o=t[n];e.getPage(1).then(function(e){e.getTextContent({normalizeWhitespace:!0}).then(function(e){for(var a=i.get("pageContentArr"),l=e.items,r=[],s=0,c=l.length;s<c;s++)r.push(l[s].str);a[o]=r.join("").replace(/\s/," "),i.set("pageContentArr",a);var p=i.get("textContentArr");p[o]=e,i.set("textContentArr",p),i.renderSearchResult_match(t,n,a[o])},function(){})},function(){})},renderSearchResult_match:function(e,t,n){var i=this,o=e[t],a=App.pdfInfo.get("searchValueArr"),l=n.toLowerCase(),r=App.pdfInfo.get("isMatchByPage"),s=!0,c=[];if($.each(a,function(){if(""===this)return!0;for(var e=this.toLowerCase(),t=!1,n=e.length,i=-n;;){if(-1===(i=l.indexOf(e,i+n)))break;for(var o=i,a=i+n;o<a;o++)c.push(o);t=!0}t||(s=!1)}),r&&!s)return i.loadPDFFun_match(e,++t),!1;c=_.uniq(c),c=_.sortBy(c);for(var p=-999,d=i.get("matchResultArray"),m=0;m<c.length;m++){var u=c[m];if(u>p){var g=n.substring(0,u),h=g.match(/[,.\s，。]/g),f=h?h[h.length-1]:" ";p=n.lastIndexOf(f,u),-1===p&&(p=0),u-p<30&&(u=p+30);var v=n.substring(u),b=v.match(/[,.\s，。]/g),x=b?b[0]:" ",A=0;A=n.indexOf(x,p+30),-1===A&&(A=n.length);for(var C=m,k=c[C],w=n.substring(p,k),P=1,y=[];C<c.length;C++)if(c[C+1]&&c[C+1]===c[C]+1)P++;else{var U=n.substr(k,P),I="<span class='highlight'>"+U+"</span>";w+=I;var T=i.convertMatches([k],o,U);if(y.push(T[0]),!(c[C+1]&&c[C+1]<A)){k+=P;break}w+=n.substring(k+P,c[C+1]),k=c[C+1],P=1}w+=n.substring(k,A);var S=w;p=A;var L="<li pageno='"+o+"' data-div-index='"+JSON.stringify(y)+"'><div class='page_num'>"+o+App.i18n.pc_toolbar__search__page__text+"</div><div class='search_result'>"+S+"</div></li>";d.length<50&&$("#acti-search-content-view").append(L),d.push(L)}}i.loadPDFFun_match(e,++t)},calcFindPhraseMatch:function(e){if("1"==App.pdfInfo.get("compatibleFlg"))return!1;var t=this;if(!App.TurnUtilController.isCurrentPagenosContainsPageno(e))return!1;var n=t.get("pageContentArr")[e];if(!n)return!1;n=n.toLowerCase();var i=[],o=!0,a=App.pdfInfo.get("isMatchByPage"),l=App.pdfInfo.get("searchValueArr");if($.each(l,function(){var l=this.toLowerCase();if(""===l)return!0;for(var r=[],s=l.length,c=-s;;){if(-1===(c=n.indexOf(l,c+s)))break;r.push(c)}if(a&&0===r.length)return o=!1,!1;var p=t.convertMatches(r,e,l);i=i.concat(p)}),!o)return!1;var r=function(e,n){var i=[],o=t.get("textContentArr")[n].items;return $.each(e,function(){var e=this.begin.divIdx,t=this.end.divIdx;if(e===t){for(var n=this.begin.offset,a=this.end.offset,l=i[e]||[],r=n,s=a;r<s;r++)l.push(r);i[e]=_.uniq(l)}else for(var c=e,p=t;c<=p;c++){var d=o[c].str,n=0,a=d.length;c===e?n=this.begin.offset:c===p&&(a=this.end.offset);for(var l=i[c]||[],r=n,s=a;r<s;r++)l.push(r);i[c]=_.uniq(l)}}),i}(i,e),s=t.get("matchesArr");s[e]=r,t.set("matchesArr",s),t.renderMatches(r,e)},renderMatches:function(e,t){var n=this;if(0!==e.length){for(var i=n.get("textContentArr")[t].items,o=n.get("textDivsArr")[t],a=0;a<e.length;a++)if(e[a]){var l=o[a],r=i[a].str,s=_.sortBy(e[a]);if(l.textContent="",r.length===s.length)!function(e,t,n,a){var l=o[e],r=i[e].str.substring(t,n),s=document.createTextNode(r);if(a){var c=document.createElement("span");return c.className=a,c.appendChild(s),void l.appendChild(c)}l.appendChild(s)}(a,0,s.length,"highlight");else{for(var c=r.substring(0,s[0]),p=s[0],d=1,m=0;m<s.length;m++)if(s[m+1]&&s[m+1]===s[m]+1)d++;else{var u=r.substr(p,d),g="<span class='highlight'>"+u+"</span>";c+=g,s[m+1]?(c+=r.substring(p+d,s[m+1]),p=s[m+1],d=1):p+=d}c+=r.substring(s[s.length-1]+1,r.length),$(l).append(c)}}n.setSelectedClassName(t)}},setSelectedClassName:function(e){var t=this,n=App.pdfInfo.get("selectedPagenoAndDivIndex"),i=t.get("textDivsArr")[e];if(!n||n.pageno!=e)return!1;$("#book_main .highlight.selected").removeClass("selected");for(var o=n.divIndex,a=0;a<o.length;a++){var l=o[a],r=l.begin.divIdx,s=l.end.divIdx,c=l.begin.offset,p=l.end.offset;if(l&&r==s)for(var d=0,m=0;m<i[r].childNodes.length;m++){var _=i[r].childNodes[m];d>=c&&d<=p&&1==_.nodeType&&$(_).hasClass("highlight")&&$(_).addClass("selected"),1==_.nodeType?d+=$(_).text().length:3==_.nodeType&&(d+=_.length)}else{$("span.highlight:last",i[r]).addClass("selected");for(var m=r+1;m<s;m++)$("span.highlight",i[m]).addClass("selected");$("span.highlight:first",i[s]).addClass("selected")}}},convertMatches:function(e,t,n,i){var o=this,a=0,l=0,r=o.get("textContentArr")[t].items,s=r.length-1,c=n.length,p=[];if(!e)return p;for(var d=0,m=e.length;d<m;d++){for(var _=e[d];a!==s&&_>=l+r[a].str.length;)l+=r[a].str.length,a++;a===r.length&&console.error("Could not find a matching mapping");var u={begin:{divIdx:a,offset:_-l}};for(_+=i?i[d]:c;a!==s&&_>l+r[a].str.length;)l+=r[a].str.length,a++;u.end={divIdx:a,offset:_-l},p.push(u)}return p},searchFromXml:function(){var e=this,t=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),n=$.trim($("#sidebar_search_input").val());n.length;App.PublicUtilController.closeOtherDialog_pc("search");var i=device.mobile()||device.tablet()||t?$(".acti-search-result"):$("#acti-sidebar-search-content-list");if(i.mCustomScrollbar({mouseWheel:{preventDefault:!0},callbacks:{onTotalScroll:function(){var t=e.resultList.length;if(e.resultList&&t>0)for(var n=$("#acti-search-content-view li").length,i=n;i<n+20;i++){if(i>t)return;$("#acti-search-content-view").append(e.resultList[i])}}}}),""===n)return $("#acti_search_value").text(n),e.oldKeyWords=n,device.mobile()||device.tablet()||t?$("#acti_search_resultNum_div").text("「 」"+App.i18n.pc_toolbar__search__result+"0"+App.i18n.pc_toolbar__search__piece):$("#acti_search_resultNum_div").text(App.i18n.pc_toolbar__search__result+"0"+App.i18n.pc_toolbar__search__piece),void $("#acti-search-content-view").empty();if(n==e.oldKeyWords&&0==e.clearRectFlg){var o=parseInt(App.pdfInfo.get("totalPageNo"));return void $("#search_dialog").css({"z-index":Number(o+5250),display:"block"})}e.clearRectFlg=!1,$("#acti_search_value").text(n),$("#acti_search_resultNum_div").text(App.i18n.pc_toolbar__search__Retrieval),e.clearSearchData(),$("#acti-search-content-view").empty();var a=App.pdfInfo.get("totalPageNo"),l=App.pdfInfo.get("viewerType"),r=App.pdfInfo.url_Prefix,s=App.pdfInfo.url_Suffix,c=0,p=n;n=n.toLocaleLowerCase();var d=[];if(1==e.orSearchType)if(n.indexOf(" ")>-1)for(var m=n.split(" "),_=0;_<m.length;_++)m[_]&&d.push(m[_]);else if(n.indexOf("　")>-1)for(var m=n.split("　"),_=0;_<m.length;_++)m[_]&&d.push(m[_]);else d.push(n);else d=[n];App.KinesisLogUtilController.sendLogByActionTpye(App.pageConfig.get("kinesis_log_actionType_search"));for(var u=0,g=d.length;u<g;u++)!function(t,n){for(var i=1;i<=a;i++){var o="";o="DL"==l?"../text/"+i+".xml":r+"text/"+i+".xml"+s,$.ajax({type:"GET",url:o,dataType:"xml",success:function(i){if(1==e.clearBtnFlg)return void e.clearSearchData();var o=new X2JS,l=o.xml2json(i),r=l.Page._num,s=l.Page._MediaBox,m=l.Page.Content.Text,_="";if(m)if(Array.isArray(m))for(var u=0,g=m.length;u<g;u++)_+=m[u]._Content;else _+=m._Content;var h=_;_=_.toLocaleLowerCase();var f=[];if(m)if(Array.isArray(m))for(var v=0;v<m.length;v++)if(Array.isArray(m[v].Tc))for(var b=0;b<m[v].Tc.length;b++)f.push(m[v].Tc[b]);else f.push(m[v].Tc);else if(Array.isArray(m.Tc))for(var x=0;x<m.Tc.length;x++)f.push(m.Tc[x]);else f.push(m.Tc);if(1==e.orSearchType){var A=0;if(_.indexOf(d[t])>-1){for(var C=_.indexOf(d[t]),k=d[t].length;C>-1;){A++;var w={};w.pageno=r,w.mediabox=s,w.keylength=k,w.keyindex=C,w.rect=f[C]._rect;for(var P=[],y=0;y<k;y++){var U=Number(C)+Number(y);P.push(f[U]._rect)}w.allPosition=P,w.keyorder=r+"_"+A,e.keywordsArr.push(w),C=_.indexOf(d[t],C+1)}e.showSearchResult(_,h,r,d[t])}}else{var I=d[0];if(1==I.split(" ").length&&1==I.split("　").length){var A=0;if(_.indexOf(I)>-1){for(var C=_.indexOf(I),k=I.length;C>-1;){A++;var w={};w.pageno=r,w.mediabox=s,w.keylength=k,w.keyindex=C,w.rect=f[C]._rect;for(var P=[],T=0;T<k;T++){var U=Number(C)+Number(T);P.push(f[U]._rect)}w.allPosition=P,w.keyorder=r+"_"+A,e.keywordsArr.push(w),C=_.indexOf(I,C+1)}e.showSearchResult(_,h,r,I)}}else if(I.split(" ").length>1||I.split("　").length>1){if(function(e,t){var n=[];t.split(" ").length>1?n=t.split(" "):t.split("　").length>1&&(n=t.split("　"));for(var i=!0,o=0,a=n.length;o<a;o++)e.indexOf(n[o])<0&&(i=!1);return i}(_,I)){var S=[];I.split(" ").length>1?S=I.split(" "):I.split("　").length>1&&(S=I.split("　"));for(var L=[],M=0,N=S.length;M<N;M++)""!=S[M]&&"　"!=S[M]&&L.push(S[M]);for(var A=0,R=0,N=L.length;R<N;R++){for(var C=_.indexOf(L[R]),k=L[R].length;C>-1;){A++;var w={};w.pageno=r,w.mediabox=s,w.keylength=k,w.keyindex=C,w.rect=f[C]._rect;for(var P=[],D=0;D<k;D++){var U=Number(C)+Number(D);P.push(f[U]._rect)}w.allPosition=P,w.keyorder=r+"_"+A,e.keywordsArr.push(w),C=_.indexOf(L[R],C+1)}e.showSearchResult(_,h,r,L[R])}}}}c++;var F=!1;if(1==e.orSearchType?c==Number(n)*Number(a)&&(F=!0):c==Number(a)&&(F=!0),F){var j=e.keywordsArr.length-e.reduceNum,z=App.i18n.pc_toolbar__search__result+j+"件";(device.mobile()||device.tablet())&&(z="「"+p+"」"+z),$("#acti_search_resultNum_div").text(z),e.resultList.sort(function(e,t){var n=Number(e.attr("pageno")),i=Number(t.attr("pageno"));return n<i?-1:n>i?1:0}),$("#acti-search-content-view").empty();for(var B=e.resultList.length>=20?20:e.resultList.length,O=0;O<B;O++)$("#acti-search-content-view").append(e.resultList[O]);e.highlightSearchResult()}},error:function(e){console.log("msg: "+JSON.stringify(e))}})}}(u,g);e.oldKeyWords=n},showSearchResult:function(e,t,n,i){var o=this;if(1==o.clearBtnFlg)return void $("#acti-search-content-view").empty();for(var a=[],l=e.indexOf(i);l>-1;){var r=t.substring(l-10,l),s=t.substring(l,Number(l)+Number(i.length)+20),c=r+s;o.matchStrArr.push(c),t.substring(l,Number(l)+Number(i.length)),a.push(t.substring(l,Number(l)+Number(i.length))),l=e.indexOf(i,l+1)}var p=o.resultList.length,d=0;o.lastKeyWord!=i&&o.lastKeyPage.indexOf(n)>-1&&(d=o.lastKeyNum);for(var m=p,_=o.matchStrArr.length;m<_;m++){d++;var u=a[m-p],g="<span class='highlight'>"+u+"</span>",h="";h=u.indexOf("*")>-1?o.matchStrArr[m].replace(new RegExp("\\"+u,"g"),g):o.matchStrArr[m].replace(new RegExp(u,"g"),g);var f=App.TurnUtilController.updateTurnCurrPage(n);f?f.length>15&&(f=f.slice(0,15)+"..."):f="";var v=$("<li pageno='"+n+"' keyorder="+n+"_"+d+" keytext="+i+"><div class='page_num'>"+f+App.i18n.pc_toolbar__search__page__text+"</div><div class='search_result'>"+h+"</div></li>");o.resultList.push(v)}o.lastKeyNum=d,o.lastKeyWord=i,o.lastKeyPage.push(n)},highlightSearchResult:function(){var e=this;e.clearCanvasRect(),e.isContainKeywords()&&(e.appendCanvasFlg?(e.appendCanvas(),e.saveRectInfo(),e.fillRect()):(e.saveRectInfo(),e.fillRect()))},clearCanvasRect:function(){if($(".bookCanvasBox #bookCanvas").length>0){var e=$(".bookCanvasBox #bookCanvas"),t=e[0].getContext("2d"),n=e.width(),i=e.height();t.clearRect(0,0,n,i)}},changeCanvasRect:function(){var e=this;if(0!=e.showCanvasFlg&&0!=$(".bookCanvasBox #bookCanvas").length&&0!=e.isContainKeywords()){e.clearCanvasRect();var t=$(".bookCanvasBox").width(),n=$(".bookCanvasBox").height();document.getElementById("bookCanvas").width=t,document.getElementById("bookCanvas").height=n,e.saveRectInfo(),e.fillRect()}},isContainKeywords:function(){for(var e=this,t=!1,n=App.TurnUtilController.getCurrentPagenos(),i=[],o=0;o<e.keywordsArr.length;o++)i.push(e.keywordsArr[o].pageno);for(var o=0;o<n.length;o++)i.indexOf(String(n[o]))>-1&&(t=!0);return t},appendCanvas:function(){var e=this,t=$("<div class='bookCanvasBox'></div>"),n=$("<canvas id='bookCanvas'></canvas>"),i=parseInt(App.pdfInfo.get("totalPageNo"));t.css({position:"absolute",left:"0",top:"0",width:"100%",height:"100%","z-index":Number(20+i)}),t.append(n),$("#book_main").append(t);var o=$(".bookCanvasBox").width(),a=$(".bookCanvasBox").height();document.getElementById("bookCanvas").width=o,document.getElementById("bookCanvas").height=a,e.appendCanvasFlg=!1},saveRectInfo:function(){var e=this,t=e.keywordsArr.length,n="";if(t)for(var i=0;i<t;i++){for(var o=e.keywordsArr[i].pageno,a=0;a<e.keywordsArr[i].allPosition.length;a++){var l={},r=e.keywordsArr[i].allPosition[a].split(","),s=r[0]+","+r[1]+","+(Number(r[2])-Number(r[0]))+","+(Number(r[3])-Number(r[1]));l[o]=s,e.rectArr.push(l)}if(n!=o){var c=e.keywordsArr[i].mediabox.split(","),p={},d=c[2]+","+c[3];p[o]=d,e.xmlSizeArr.push(p),n=o}}},fillRect:function(){var e=this,t=e.getRectinfoByCurrPage(),n=e.currKeyOrder,i=e.currKeyText,o=e.currkeyPage,a=App.pdfInfo.get("spread_mode"),l=!1,r=0;if("double"==a&&o%2!=0&&n&&$("#acti-search-content-view li[keyorder="+n+"]").prev()){l=!0;var s=$("#acti-search-content-view li[keyorder="+n+"]").prev().attr("keyorder"),c=s?s.indexOf("_"):"-1";r="-1"!=c?s.substring(c+1):0}if(t)for(var p=e.resetRectinfo(t),d=$("#bookCanvas")[0],m=d.getContext("2d"),_=0,u=p.length;_<u;_++){var g=p[_].split(","),h=Number(g[0]),f=Number(g[1]),v=Number(g[2]),b=Number(g[3]);if(n){var x=n.indexOf("_"),A=n.substring(x+1),C=i,k=C.split(" ");if(1==k.length){l&&(A=Number(A)+Number(r));var w=C.length,P=(A-1)*w,y=A*w;m.fillStyle=_>=P&&_<y?"rgba(255,147,106,.6)":"rgba(255,245,118,.6)"}else if(k.length>1){var w=i.length,P=function(){for(var e=[],t="",i=n.indexOf("_"),a=n.substring(i+1),l=$("#acti-search-content-view li"),r=0,s=$("#acti-search-content-view li").length;r<s;r++)if(l[r].getAttribute("pageno")<o)e.push(l[r].getAttribute("keytext"));else if(l[r].getAttribute("pageno")==o){var c=l[r].getAttribute("keyorder").indexOf("_"),p=l[r].getAttribute("keyorder").substring(c+1);Number(p)<Number(a)&&e.push(l[r].getAttribute("keytext"))}return t=e.join(""),t.length}(),y=Number(P)+Number(w);m.fillStyle=_>=P&&_<y?"rgba(255,147,106,.6)":"rgba(255,245,118,.6)"}}else m.fillStyle="rgba(255,245,118,.6)";m.fillRect(h,f,v,b)}},getRectinfoByCurrPage:function(){function e(e){for(var t=[],n=0,i=e.length;n<i;n++)t.indexOf(e[n])<0&&t.push(e[n]);return t}for(var t=this,n=[],i=[],o=[],a=App.TurnUtilController.getCurrentPagenos(),l=App.pdfInfo.get("spread_mode"),r=App.pdfInfo.get("direction"),s=App.pdfInfo.get("hasCover"),c=0,p=a.length;c<p;c++)for(var d=0,m=t.xmlSizeArr.length;d<m;d++)for(var _ in t.xmlSizeArr[d])a[c]==_&&(i.push(t.xmlSizeArr[d][_]),_);var u=[];u=window.ActiveXObject||"ActiveXObject"in window?e(i):Array.from(new Set(i));var g="";"single"==l?g=$("#bookCanvas").width():"double"==l&&(g=$("#bookCanvas").width()/2);var h=$("#bookCanvas").height(),f=g/h;f=Number(f).toFixed(2);var v=u[0].split(","),b=v[0]/v[1];b=Number(b).toFixed(2);var x=v[0];x=f==b||f<b?v[0]:v[1]*f;for(var A=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),c=0,p=a.length;c<p;c++)for(var d=0,C=t.rectArr.length;d<C;d++)for(var _ in t.rectArr[d])if("ltr"==r){if(1==s&&1==a.length&&"1"==a[0]){if(a[c]==_){
var k=t.rectArr[d][_].split(","),w=!!((device.mobile()||device.tablet()||A)&&$("#book_main").height()>$("#book_main").width());k[0]=w?Number(k[0]):Number(k[0])+Number(x);var P=k.join(",");n.push(P),o.push("R");break}}else if(0==c&&a[c]==_&&(n.push(t.rectArr[d][_]),o.push("L")),1==c&&a[c]==_){var k=t.rectArr[d][_].split(",");k[0]=Number(k[0])+Number(x);var P=k.join(",");n.push(P),o.push("R")}}else if("rtl"==r)if(1==s&&1==a.length&&"1"==a[0]){if(a[c]==_){n.push(t.rectArr[d][_]),o.push("L");break}}else if(1==a.length)0==c&&a[c]==_&&(n.push(t.rectArr[d][_]),o.push("L"));else if(2==a.length){if(0==c&&a[c]==_){var k=t.rectArr[d][_].split(",");k[0]=Number(k[0])+Number(x);var P=k.join(",");n.push(P),o.push("R")}1==c&&a[c]==_&&(n.push(t.rectArr[d][_]),o.push("L"))}var y=[];y=window.ActiveXObject||"ActiveXObject"in window?e(n):Array.from(new Set(n));var U={};return U.rect=y,U.xml=u,U.rectDirection=o,o=[],U},resetRectinfo:function(e){var t=this,n="",i=App.pdfInfo.get("spread_mode");if("single"==i?n=$("#bookCanvas").width():"double"==i&&(n=$("#bookCanvas").width()/2),0==window.orientation||180==window.orientation)n=$("#bookCanvas").width();else if(90==window.orientation||-90==window.orientation){var o=App.pdfInfo.get("spread_mode");"single"==o?n=$("#bookCanvas").width():"double"==o&&(n=$("#bookCanvas").width()/2)}var a=e.rect,l=e.xml,r=e.rectDirection,s=l[0].split(","),c=s[0]/s[1];c=Number(c).toFixed(2);var p=$("#bookCanvas").height(),d=n/p;d=Number(d).toFixed(2);var m=[];return d==c?function(){var e=t.keywordsArr[0].mediabox.split(","),i=e[2],o=i/n;m=a.map(function(e){var t=e.split(",");return t=t.map(function(e){return e/o}),e=t.join(",")})}():d<c?function(){var e=Number(n)/Number(c);m=a.map(function(t){var i=t.split(","),o=Number(s[0]),a=Number(n),l=o/a;return i=i.map(function(e){return e/l}),i[1]=Number(i[1])+Number(.5*(p-e)),t=i.join(",")})}():d>c&&function(){var e=Number(p)*Number(c);m=a.map(function(i,o){var l=i.split(","),c=Number(s[1]),d=Number(p),m=c/d;l=l.map(function(e){return e/m});var _=a.length,u=Number(r.length)/Number(_);return"L"==t.resetRectDirection(r,u)[o]&&(l[0]=Number(l[0])+(Number(n)-Number(e))),i=l.join(",")})}(),m},resetRectDirection:function(e,t){for(var n=e.join(""),i=0,o=0,a=0;a<n.length;a++)"L"==n.charAt(a)?i++:"R"==n.charAt(a)&&o++;i/=t,o/=t;for(var l="",r="",s="",a=0;a<i;a++)l+="L";for(var a=0;a<o;a++)r+="R";return s=l+r,s.split("")},clearSearchData:function(){var e=this;e.keywordsArr=[],e.keywordsArr.length=0,e.rectArr=[],e.rectArr.length=0,e.matchStrArr=[],e.matchStrArr.length=0,e.pageHistory=[],e.pageHistory.length=0,e.lastKeyNum=0,e.lastKeyWord="",e.lastKeyPage=[],e.currKeyOrder="",e.currKeyText="",e.currkeyPage="",e.resultList=[],e.resultList.length=0}})}),define("one-book/controllers/utils/print-util-controller",["exports","ember"],function(e,t){App.PrintUtilController=t.default.Object.create({printMode:"double",initPrintJspanel:function(){this.changePrintMode(),this.changePrintOption(),$("#print_select_dialog div.acti-print-option").on("click",function(){var e=$(this).attr("type");App.PrintUtilController.toPrint(e)})},toPrint:function(e){var t=this,n=App.PrintUtilController.getPrintContent(e),i=window.open("","_blank");i.document.body.innerHTML=n;var o=0,a="",l="";$("body img",i.document).each(function(){var n=$(this).attr("data-src");this.onload=function(){var n="print_"+o;if($(this).attr("id",n),a+=t.verticalPrintStyle(this.width,this.height,n,e),l+=t.horizontalPrintStyle(this.width,this.height,n,e),++o===$("body img",i.document).length){var r="<style>";/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)?r+="body{font-size:0;}.page{width:100%;height:100%;page-break-after:always; display: inline-block;}.page .img-box{height:100%;width:100%; }.img-box img{max-width:100%;max-height:100%;}.leftPage.img-box{width:50%;display:inline-block;}.rightPage.img-box{width:50%;display:inline-block;}.leftPage.img-box img{float:right;}.rightPage.img-box img{float:left;}":window.ActiveXObject||"ActiveXObject"in window?(r+="@page{size: auto; margin: 0;} body{font-size: 0;} .page{width: 100%; height: 100%; page-break-after: always;} .page .img-box{margin-top: 35px; margin-bottom: 35px; height: calc(100% - 70px); width: 100%; float: left;} .img-box img{display: none; max-width: 100%; max-height: 100%;} .leftPage.img-box{width: 50%; display: inline-block;} .rightPage.img-box{width: 50%; display: inline-block;} .leftPage.img-box img{float: right;} .rightPage.img-box img{float: left;}",r+="@media print and (max-aspect-ratio: 1/1) {"+a+"}",r+="@media print and (min-aspect-ratio: 1/1) {"+l+"}"):(r+="@page{size: auto; margin: 0;} body{font-size: 0;} .page{width: 100%; height: 100%; page-break-after: always;} .page .img-box{margin-top: 10px; height: calc(100% - 20px); width: 100%; float: left;} .img-box img{display: none; max-width: 100%; max-height: 100%;} .leftPage.img-box{width: 50%; display: inline-block;} .rightPage.img-box{width: 50%; display: inline-block;} .leftPage.img-box img{float: right;} .rightPage.img-box img{float: left;}",r+="@media print and (max-aspect-ratio: 1/1) {"+a+"}",r+="@media print and (min-aspect-ratio: 1/1) {"+l+"}"),r+="</style>",$(i.document.body).append(r);try{setTimeout(function(){i.focus();try{i.document.execCommand("print",!1,null)||i.print()}catch(e){i.print()}i.close()},10)}catch(e){}}},this.src=n})},horizontalPrintStyle:function(e,t,n,i){var o=this,a="",l=void 0,r=void 0,s=void 0,c=void 0;r=297,l=210;var p=App.pdfInfo.get("spread_mode");return"double"==i?r/=2:"all"==i&&"double"==p&&(r/=2),c=void 0,s=void 0,e/t>=r/l?(c=r,s=r/e*t):(s=l,c=l/t*e),c-r>s-l?"single"===o.printMode?a+=" #"+n+" {width: 50%; height: auto; display: block;} ":"double"===o.printMode&&(a+=" #"+n+" {width: 100%; height: auto; display: block;} "):a+=" #"+n+" {height: 100%; width: auto; display: block;} ",a},verticalPrintStyle:function(e,t,n,i){var o="",a=void 0,l=void 0,r=void 0,s=void 0;l=210,a=297;var c=App.pdfInfo.get("spread_mode");return"double"==i?l/=2:"all"==i&&"double"==c&&(l/=2),s=void 0,r=void 0,e/t>=l/a?(s=l,r=l/e*t):(r=a,s=a/t*e),o+=s-l>r-a?" #"+n+" {width: 100%; height: auto; display: block;} ":" #"+n+" {height: 100%; width: auto; display: block;} "},getPrintContent:function(e){var t=this,n=[],i="",o=App.TurnUtilController.getCurrentPagenos();if("left"==e){if(1==o.length)n.push(o[0]);else{var a=App.TurnUtilController.isPositionByPageno(o[0]);"L"==a?n.push(o[0]):n.push(o[1])}var l=this.getPageImgByPageno(n[0]);i+='<div class="page"><div class="img-box"><img data-src="'+l+'"></div></div>'}else if("right"==e){if(1==o.length)n.push(o[0]);else{var a=App.TurnUtilController.isPositionByPageno(o[0]);"R"==a?n.push(o[0]):n.push(o[1])}var l=this.getPageImgByPageno(n[0]);i+='<div class="page"><div class="img-box"><img data-src="'+l+'"></div></div>'}else if("double"==e){var a=App.TurnUtilController.isPositionByPageno(o[0]);"L"==a?(n.push(o[0]),n.push(o[1])):(n.push(o[1]),n.push(o[0]));var r=this.getPageImgByPageno(n[0]),s=this.getPageImgByPageno(n[1]);i+='<div class="page">',"single"===t.printMode?(i+='<div class="img-box"><img data-src="'+r+'"></div>',i+='<div class="img-box"><img data-src="'+s+'"></div>'):"double"===t.printMode&&(i+='<div class="leftPage img-box"><img data-src="'+r+'"></div>',i+='<div class="rightPage img-box"><img data-src="'+s+'"></div>'),i+="</div>"}else if("single"==e){n.push(o[0]);var l=this.getPageImgByPageno(n[0]);i+='<div class="page"><div class="img-box"><img data-src="'+l+'"></div></div>'}else if("all"==e){var c=parseInt(App.pdfInfo.get("totalPageNo")),p=App.pdfInfo.get("spread_mode"),d=App.pdfInfo.get("hasCover"),m=t.printMode;if("single"==p||"single"===m)for(var _=1;_<=c;_++){var l=this.getPageImgByPageno(_);i+='<div class="page"><div class="img-box"><img data-src="'+l+'"></div></div>'}else{var _=1;for(d&&(_=0);_<=c;_++){var u=App.TurnUtilController.isPositionByPageno(_),r="",s="";"L"==u?(r=this.getPageImgByPageno(_),s=this.getPageImgByPageno(_+1)):(r=this.getPageImgByPageno(_+1),s=this.getPageImgByPageno(_)),_++,i+='<div class="page">',i+=r?'<div class="leftPage img-box"><img data-src="'+r+'"></div>':'<div class="leftPage img-box"></div>',i+=s?'<div class="rightPage img-box"><img data-src="'+s+'"></div>':'<div class="rightPage img-box"></div>',i+="</div>"}}}return i},getPageImgByPageno:function(e){if(e>parseInt(App.pdfInfo.get("totalPageNo"))||e<1)return"";var t=App.pdfInfo.url_Prefix;"DL"==App.pdfInfo.viewerType&&(t=App.pdfInfo.shareBaseUrl.replace(/index.html$/,""));var n=App.pdfInfo.url_Suffix,i=App.pageConfig.pageImgPath,o=App.pdfInfo.get("imgType")||App.pageConfig.pageImgType;return encodeURI(t+i+e+o+n)},disablePrintOption:function(){$("#print_select_dialog div.acti-print-option").addClass("acti-disable")},changePrintOption:function(){var e=App.pdfInfo.get("spread_mode"),t=App.TurnUtilController.getCurrentPagenos();if($("#print_select_dialog div.acti-print-option").removeClass("acti-disable"),"single"==e)$("#print_select_dialog div.acti-print-option-left").hide(),$("#print_select_dialog div.acti-print-option-right").hide(),$("#print_select_dialog div.acti-print-option-double").hide(),$("#print_select_dialog div.acti-print-option-single").show(),$("#print_select_dialog div.acti-print-option-all").show();else if(1==t.length){var n=App.TurnUtilController.isPositionByPageno(t[0]);$("#print_select_dialog div.acti-print-option-double").hide(),$("#print_select_dialog div.acti-print-option-single").hide(),$("#print_select_dialog div.acti-print-option-all").show(),"L"==n?($("#print_select_dialog div.acti-print-option-left").show(),$("#print_select_dialog div.acti-print-option-right").hide()):($("#print_select_dialog div.acti-print-option-left").hide(),$("#print_select_dialog div.acti-print-option-right").show())}else $("#print_select_dialog div.acti-print-option-single").hide(),$("#print_select_dialog div.acti-print-option-left").show(),$("#print_select_dialog div.acti-print-option-right").show(),$("#print_select_dialog div.acti-print-option-double").show(),$("#print_select_dialog div.acti-print-option-all").show()},changePrintMode:function(){var e=this;if($(".doubleLabel input").prop("checked",!0),"single"==App.pdfInfo.get("spread_mode"))return $(".selectOptions").hide(),$(".singlePages").hide(),void $(".doublePages").show();$(document).off("click",".inputRadio label").on("click",".inputRadio label",function(t){t.stopPropagation(),t.preventDefault(),"singleLabel"!=t.target.className&&"singleLabelI"!=t.target.className||$(".singleLabel input").prop("checked")?"doubleLabel"!=t.target.className&&"doubleLabelI"!=t.target.className||$(".doubleLabel input").prop("checked")||(e.printMode="double",$(".singlePages").hide(),$(".singleLabel input").prop("checked",!1),$(".doubleLabel input").prop("checked",!0),$(".doublePages").show()):(e.printMode="single",$(".singlePages").show(),$(".singleLabel input").prop("checked",!0),$(".doubleLabel input").prop("checked",!1),$(".doublePages").hide())})}})}),define("one-book/controllers/utils/public-util-controller",["exports","ember"],function(exports,_ember){App.PublicUtilController=_ember.default.Object.create({footerDisplayFlg:!0,window_resize:function(){var e=parseInt(App.pdfInfo.get("totalPageNo"));App.pdfInfo.set("currentZoomScale",1),App.TurnUtilController.initBookViewSize(),App.TurnUtilController.setPageMainDivSize(),App.TurnUtilController.bookPositionCenter(),App.PdfMainController.isLoaded&&App.bookViewerController.pdfPagesRendering(),App.TurnUtilController.binkSelectedAndPosition(),$.isTouch?($("#book_main").off("touchstart.pageZoom"),$(document).off("touchmove.pageZoom"),$(document).off("touchend.pageZoom")):($("#book_main").off("mousedown.pageZoom"),$(document).off("mousemove.pageZoom"),$(document).off("mouseup.pageZoom")),App.TurnUtilController.setZoomStopfun(),App.TurnUtilController.setZoomRunfun(),1==e&&$("#book_main").turn("disable",!0),App.MemoUtilController.resetPageMemoList("resize"),App.PdfUtilController.changeCanvasRect(),App.PdfUtilController.highlightSearchResult(),1!=App.pdfInfo.get("embed_flg")&&($("#goto_page_input").focus(),$("#goto_page_input").blur());try{window.top.gotoTopByViewer&&window.top.gotoTopByViewer()}catch(e){console.log(e)}},click_searchResult_event:function(e){var t=$(e).attr("pageno"),n=App.pdfInfo.get("compatibleFlg");if("1"!=n){var i=$(e).data("div-index");App.pdfInfo.set("selectedPagenoAndDivIndex",{pageno:t,divIndex:i});App.PdfUtilController.get("textDivsArr")[t]}else if("1"==n){var o=$(e).attr("keyorder"),a=$(e).attr("keytext"),l=$(e).attr("pageno");App.PdfUtilController.currKeyOrder=o,App.PdfUtilController.currKeyText=a,App.PdfUtilController.currkeyPage=l}App.TurnUtilController.isCurrentPagenosContainsPageno(parseInt(t))?"1"!=n?App.PdfUtilController.setSelectedClassName(t):App.PdfUtilController.highlightSearchResult():(App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_search",t),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(t)},0))},click_link_event:function(e){var t=$(e).data("info"),n=$(e).attr("pageno"),i=t.type,o=t.target;if(i==App.pageConfig.get("Link_Type_Audio")){$("#pageLink_audio_id").parent().show();var a=App.pdfInfo.get("url_Prefix"),l=App.pdfInfo.get("url_Suffix");$("video").trigger("pause");var r={};r.src=a+"attachments/"+t.target+l,r.autoplay="autoplay",$("#pageLink_audio_id").attr(r).attr("pageno",n),$("#pageLink_audio_id").trigger("play"),$("#pageLink_audio_id").on("ended",function(){$("#pageLink_audio_id").parent().hide()})}else if(i==App.pageConfig.get("Link_Type_File")){var a=App.pdfInfo.get("url_Prefix"),l=App.pdfInfo.get("url_Suffix");window.open(a+"attachments/"+o+l)}else if(i==App.pageConfig.get("Link_Type_Goto")){o=App.CommonUtilController.checkNumber(o,1,1/0);var s=App.pdfInfo.get("totalPageNo");o&&o>s&&(o=1),o&&(App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_link",o),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(o)},0))}else if(i==App.pageConfig.get("Link_Type_URL")){var c=$("<a></a>");c.attr("href",o),o.match(/^(http|https):\/\//i)||"http:"!=c[0].protocol&&"https:"!=c[0].protocol||(o="http://"+o),window.open(o)}App.KinesisLogUtilController.sendLogByActionTpye(App.pageConfig.get("kinesis_log_actionType_link_click"),t)},setButtonShowOrHideByPorts:function(){var e=App.pdfInfo.get("embed_flg"),t=App.pdfInfo.get("contentInfoDispFlg"),n=App.pdfInfo.get("hasText"),i=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);if(device.mobile())0==t?$("body").addClass("acti_noContentInfo"):1==t&&$("body").addClass("acti_contentInfo");else if("1"==e){$("body").addClass("embed_flg"),$("#right_sidebar_main").show(),$("#sidebar_full_srceen").show();var o=App.pdfInfo.get("appButtonDispFlg");(device.tablet()||i)&&"0"!=o&&$(".appdownload").show();var a=App.pdfInfo.get("shareableFlg");1==a&&$(".sidebar_share").css("visibility","visible"),$("#sidebar_pen").parent().hide(),$("#sidebar_memo").parent().hide(),$("#sidebar_cut").parent().remove()}else 0==t?($("body").addClass("acti_noContentInfo"),$("#right_sidebar_main").show(),device.tablet()):1==t&&$("body").addClass("acti_contentInfo");$("#bottom_sidebar_main .sidebar_print").hide(),$("#right_sidebar_main .printer_button").hide();var l=App.pdfInfo.get("chapterJsons");if(l&&l.length>0?$(".acti-not-hamburger").removeClass("acti-not-hamburger"):$("#acti-mobile-hamburger-button").parent().hide(),$(".acti-not-hamburger").removeClass("acti-not-hamburger"),"1"==n?$(".search_main").css("visibility","visible"):$("#acti-mobile-search-button").parent().hide(),device.mobile()||device.tablet()||i)try{for(var r=window,s=0;s<5&&(r=r.parent,!$("body",r.document).hasClass("topPage"));s++);1==r.history.length?$(".acti-goBack-button").css("visibility","hidden"):(App.CommonUtilController.setTapEvent(".acti-goBack-button"),$(".acti-goBack-button").on("tapOne",function(){var e=window;try{for(var t=!1,n=0;n<5;n++)if(e=e.parent,$("body",e.document).hasClass("topPage")){e.history.go(-1),t=!0;break}if(t)return}catch(e){}window.history.go(-1)}))}catch(e){}"1"==App.pdfInfo.get("cutFlg")?$("#sidebar_cut").parent().show():$("#sidebar_cut").parent().remove()},closeOtherDialog_pc:function(e){"share"!=e&&$("#share_dialog").hide(),"print"!=e&&$("#SelectingPrintingDirection").hide(),"pen"!=e&&$("div.jsPanel-theme-pc-painter .jsPanel-btn-close").trigger("click"),"memo"!=e&&$("div.jsPanel-theme-pc-memo-select-list .jsPanel-btn-close").trigger("click"),"search"!=e&&$("#search_dialog").hide(),"print"!=e&&$("#print_select_dialog .jsPanel-btn-close").trigger("click")},memoEventBind_mobile:function(){function e(){$("#memo_text_dialog div.memo-text-dialog-save-button").off("click"),$("#memo_text_dialog div.memo-text-dialog-save-button").on("click",function(){var e=function(){var e=$("#memo_text_dialog").attr("pageno"),t=$("#memo_text_dialog").attr("memoid"),n=$("#memo_text_dialog").attr("memo-type"),i=App.StorageUtilController.getMemoByPagenoAndId(e,t),o=$("#"+t);"text"==n?(i.text=$("#memo_text_dialog textarea").val(),App.StorageUtilController.pushMemoData(e,i),$("div.acti-memo-text-box > textarea",o).val(i.text)):"outlink"==n&&(i.linkType=App.pageConfig.memo_link_type_outlink,i.linkDetail=$("#memo_text_dialog textarea").val(),App.StorageUtilController.pushMemoData(e,i),$("select.acti-memo-link-content-inlink-page-num",o).val(""),$("div.acti-memo-link-content-inlink-img",o).css("background-image",""),$("div.acti-memo-link-content-outlink > textarea",o).val(i.linkDetail)),$("#memo_text_dialog").attr({pageno:"",memoid:"","memo-type":""}),$("#memo_text_dialog div.memo-text-dialog-title").text(""),$("#memo_text_dialog textarea").attr({placeholder:"",maxLength:""}),$("#memo_text_dialog textarea").val(""),$("#memo_text_dialog").hide(),App.MemoUtilController.isChangeMemoLinkInfo=!1};App.JspanelUtilController.showConfirmJspanel(App.i18n.mobile_memo_text_save_dialog_text,e)}),$("#memo_text_dialog div.memo-text-dialog-cancel-button").off("click"),$("#memo_text_dialog div.memo-text-dialog-cancel-button").on("click",function(){var e=function(){$("#memo_text_dialog").attr({pageno:"",memoid:"","memo-type":""}),$("#memo_text_dialog div.memo-text-dialog-title").text(""),$("#memo_text_dialog textarea").attr({placeholder:"",maxLength:""}),$("#memo_text_dialog textarea").val(""),$("#memo_text_dialog").hide(),App.MemoUtilController.isChangeMemoLinkInfo=!1};App.JspanelUtilController.showConfirmJspanel(App.i18n.mobile_memo_text_cancel_dialog_text,e)})}$(document).on("click.changeEditMode","i.acti-memo-link-button-unfold-icon, div.acti-memo-link-button-edit",function(){var e=$(this).parents("div.jsPanel:first");if(e&&e.length){var n=$(e).attr("pageno"),i=$(e).attr("id"),o=App.StorageUtilController.getMemoByPagenoAndId(n,i);if(!$("select.acti-memo-link-content-inlink-page-num",e).hasClass("acti-loaded")){var a=App.pdfInfo.get("customizeJsons"),l=$("select.acti-memo-link-content-inlink-page-num",e);l.append('<option selected="selected" disabled="disabled" value=""></option>');for(var r=0;r<a.length;r++)l.append('<option value="'+a[r].target+'">'+a[r].show+"</option>");$("select.acti-memo-link-content-inlink-page-num",e).addClass("acti-loaded"),$("select.acti-memo-link-content-inlink-page-num",e).val("")}$(e).hasClass("link-state-edit")?(o&&o.linkDetail?(o.linkType==App.pageConfig.memo_link_type_outlink?($(e).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-outlink"),$("div.acti-memo-link-content-text",e).text(o.linkDetail)):($(e).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-inlink"),$("div.acti-memo-link-content-text",e).text(App.i18n.getMemoInlinkContentJointText(o.linkDetail))),$("div.acti-memo-link-content-text",e).data({"link-type":o.linkType,"link-detail":o.linkDetail})):($(e).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-notset"),$("div.acti-memo-link-content-text",e).text("")),$("div.acti-memo-link-content-inlink",e).hide(),$("div.acti-memo-link-content-outlink",e).hide()):($(e).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-edit"),$("div.acti-memo-link-content-button-radio",e).removeClass("checked"),o&&o.linkType==App.pageConfig.memo_link_type_outlink?($("div.acti-memo-link-content-inlink",e).hide(),$("div.acti-memo-link-content-outlink",e).show(),$("div.acti-memo-link-content-button-radio:eq(1)",e).addClass("checked"),$("div.acti-memo-link-content-outlink > textarea",e).val(o.linkDetail)):($("div.acti-memo-link-content-outlink",e).hide(),$("div.acti-memo-link-content-inlink",e).show(),$("div.acti-memo-link-content-button-radio:eq(0)",e).addClass("checked"),$("select.acti-memo-link-content-inlink-page-num",e).val(o.linkDetail),t(e,o.linkDetail)))}}),$(document).on("click.changeLinkType","div.acti-memo-link-content-button-radio",function(){var e=$(this).parents("div.jsPanel:first");if(e&&e.length){$("div.acti-memo-link-content-button-radio",e).removeClass("checked"),$(this).addClass("checked");$(this).attr("type")==App.pageConfig.memo_link_type_inlink?($("div.acti-memo-link-content-outlink",e).hide(),$("div.acti-memo-link-content-inlink",e).show()):($("div.acti-memo-link-content-inlink",e).hide(),$("div.acti-memo-link-content-outlink",e).show())}});var t=function(e,t){if(t){var n=App.pdfInfo.url_Prefix,i=App.pdfInfo.url_Suffix,o=App.pageConfig.get("thumbnailPath"),a=App.pdfInfo.get("imgType")||App.pageConfig.pageImgType,l=encodeURI(n+o+t+a+i);$("div.acti-memo-link-content-inlink-img",e).css("background-image","url("+l+")")}};$(document).on("change.changeInlink","select.acti-memo-link-content-inlink-page-num",function(){var e=$(this).parents("div.jsPanel:first");if(e&&e.length){var n=$(this).val();t(e,n);var i=$(e).attr("pageno"),o=$(e).attr("id"),a=App.StorageUtilController.getMemoByPagenoAndId(i,o);a.linkType=App.pageConfig.memo_link_type_inlink,a.linkDetail=n,App.StorageUtilController.pushMemoData(i,a),$("div.acti-memo-link-content-outlink > textarea",e).val("")}}),$(document).on("click.changeInlinkMinus","div.acti-memo-link-content-text",function(e){var t=parseInt(App.pdfInfo.get("totalPageNo")),n=$(this).parents("div.jsPanel:first");if(n&&n.length){var i=$(this).data("link-type"),o=$(this).data("link-detail");if(i==App.pageConfig.memo_link_type_inlink)Number(o)>t&&(o=t,$(this).data("link-detail",o)),App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_tag",t),setTimeout(function(){App.TurnUtilController.gotoPageByTarget(o)},0);else if(i==App.pageConfig.memo_link_type_outlink){if(o.match(/^(http|https):\/\//i)||o.match(/^(tel|mailto):/i))window.open(o);else try{window.open("http://"+o)}catch(e){window.open(o)}}}}),$(document).on("click.changeOutlink","div.acti-memo-link-content-outlink > textarea",function(t){var n=$(this).parents("div.jsPanel:first");if(n&&n.length){App.MemoUtilController.isChangeMemoLinkInfo=!0;var i=$(n).attr("pageno"),o=$(n).attr("id");$("#memo_text_dialog").attr({pageno:i,memoid:o,"memo-type":"outlink"}),$("#memo_text_dialog div.memo-text-dialog-title").text(App.i18n.mobile_memo_text_dialog_outlink_title),$("#memo_text_dialog textarea").attr({placeholder:App.i18n.mobile_memo_text_dialog_outlink_placeholder,maxLength:1e4}),$("#memo_text_dialog").show(),$("#memo_text_dialog textarea").val($(this).val()),e(),App.CommonUtilController.gotoTop_parent()}}),$(document).on("click.cleanLinkInfo","div.acti-memo-link-button-clean",function(e){var t=$(this).parents("div.jsPanel:first");if(t&&t.length){var n=$(t).attr("id"),i=function(){var e=$("#"+n),t=$(e).attr("pageno"),i=App.StorageUtilController.getMemoByPagenoAndId(t,n);i.linkType="",i.linkDetail="",App.StorageUtilController.pushMemoData(t,i),$("select.acti-memo-link-content-inlink-page-num",e).val(""),$("div.acti-memo-link-content-inlink-img",e).css("background-image",""),$("div.acti-memo-link-content-outlink > textarea",e).val(""),$("div.acti-memo-link-content-button-radio",e).removeClass("checked"),$("div.acti-memo-link-content-button-radio:eq(0)",e).addClass("checked"),$("div.acti-memo-link-content-outlink",e).hide(),$("div.acti-memo-link-content-inlink",e).show(),$("div.acti-memo-link-content-text",e).is(":visible")&&($("div.acti-memo-link-content-text",e).text(""),$(e).removeClass("link-state-outlink link-state-edit link-state-inlink link-state-notset").addClass("link-state-notset"))};App.JspanelUtilController.showConfirmJspanel(App.i18n.memo_cleanLinkInfo_text,i)}}),$(document).on("click.changeOutlink","div.acti-memo-text-box > textarea",function(t){var n=$(this).parents("div.jsPanel:first");if(n&&n.length){App.MemoUtilController.isChangeMemoLinkInfo=!0;var i=$(n).attr("pageno"),o=$(n).attr("id");$("#memo_text_dialog").attr({pageno:i,memoid:o,"memo-type":"text"}),$("div.acti-memo-text-box > textarea").blur(),$("#memo_text_dialog div.memo-text-dialog-title").text(App.i18n.mobile_memo_text_dialog_text_title),$("#memo_text_dialog textarea").attr({placeholder:App.i18n.mobile_memo_text_dialog_text_placeholder,maxLength:200}),$("#memo_text_dialog").show(),$("#memo_text_dialog textarea").val($(this).val()),e(),App.CommonUtilController.gotoTop_parent()}}),$(document).on("touchstart.moveAndFoldMemo","#index_main",function(e){if($("div.link-state-unfold").length>0){var t=$("div.link-state-unfold").attr("id"),n="";0!=$(e.target).closest("div.jsPanel.jsPanel-theme-sd-memo").length&&(n=$(e.target).closest("div.jsPanel.jsPanel-theme-sd-memo").attr("id")),n&&t==n||function(){var e=$("div.link-state-unfold");$(e).animate({width:"54px",height:"54px"},300,function(){$(e).removeClass("link-state-unfold").addClass("link-state-fold"),$(e).removeClass("link-folding")})}()}}),$(document).on("touchstart.moveAndFoldMemo","div.jsPanel-theme-sd-memo div.jsPanel-sd-title",function(e){var t=$(this).parents("div.jsPanel:first");if(t&&t.length){var n=e.originalEvent.changedTouches[0],i=$(t).attr("pageno"),o=$(t).attr("id"),a=App.MemoUtilController.calcMemoPositionLimits({width:$(t).width(),height:$(t).height()}),l=$(t).position();t.removeClass("link-animate"),App.MemoUtilController.setMemoTopest(t),$(this).off("touchmove.moveAndFoldMemo"),$(this).on("touchmove.moveAndFoldMemo",function(e){var i=e.originalEvent.changedTouches[0];if(n&&i&&(e.preventDefault(),e.stopPropagation(),!$(t).hasClass("link-state-unfold"))){var o=i.clientX-n.clientX,r=i.clientY-n.clientY;if(0!=o||0!=r){if($(t).addClass("link-moving"),$(t).hasClass("link-state-unfold"))return;var s=l.top+r,c=l.left+o;s>a.top_max?s=a.top_max:s<a.top_min&&(s=a.top_min),c>a.left_max?c=a.left_max:c<a.left_min&&(c=a.left_min),$(t).css({top:s+"px",left:c+"px",transform:""})}return!1}}),$(document).off("touchend.moveAndFoldMemo"),$(document).on("touchend.moveAndFoldMemo",function(e){var n=App.StorageUtilController.getMemoByPagenoAndId(i,o);if($(t).hasClass("link-moving")){var a=App.MemoUtilController.calcMemoSavePosition($(t).position());n.x=a.x,n.y=a.y,i!=a.pageno&&App.StorageUtilController.removeMemoDataById(i,o);var l=App.MemoUtilController.calcMemoShowAttribute(n,a.pageno);$(t).css({left:l.left,top:l.top}),$(t).attr("pageno",a.pageno),App.StorageUtilController.pushMemoData(a.pageno,n)}else if(!$(t).hasClass("link-folding")&&$(e.target).closest(".jsPanel-sd-title").length>-1)if($("div.link-folding").length>0);else if($(t).addClass("link-folding"),$(t).hasClass("link-state-fold")){t.addClass("link-animate"),$(t).removeClass("link-animate-fold");var r="310px",s="310px";App.CommonUtilController.checkHorizentalMobile()&&(r="210px",s="210px"),$(t).animate({width:r,height:s},300,function(){$(t).removeClass("link-state-fold").addClass("link-state-unfold"),$(t).removeClass("link-folding")})}else $(t).removeClass("link-animate-fold").addClass("link-state-fold"),$(t).animate({width:"54px",height:"54px"},300,function(){$(t).removeClass("link-state-unfold").addClass("link-state-fold"),$(t).removeClass("link-folding")});$(t).removeClass("link-moving"),$(document).off("touchmove.moveAndFoldMemo"),$(document).off("touchend.moveAndFoldMemo")})}})},setFooterDisplay:function(){var e=this,t=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);if(device.mobile()||device.tablet()||t){var n=App.pdfInfo.get("contentInfoDispFlg");1==window.parent.history.length&&0==n?(e.footerDisplayFlg=!1,$(".acti-footer-content").addClass("hideFooter"),$(".progress").addClass("hideFooter"),$(".pack_book_div").addClass("hideFooter"),$("#acti-mobile-toc-content").addClass("hideFooter"),$(".star-pad #acti-mobile-hamburger-content").addClass("hideFooter"),$(".star-pad #acti-mobile-search-content").addClass("hideFooter"),$(".star-pad #acti-mobile-memo-content").addClass("hideFooter"),$(".phone #acti-mobile-hamburger-content").addClass("hideFooter"),$(".phone #acti-mobile-search-content").addClass("hideFooter"),$(".phone #acti-mobile-memo-content").addClass("hideFooter"),$("#acti-mobile-painter-content").addClass("hideFooter"),$(".memo-create-title-box").addClass("hideFooter")):(e.footerDisplayFlg=!0,$(".progress").addClass("showFooter"),$(".pack_book_div").addClass("showFooter"),$("#acti-mobile-toc-content").addClass("showFooter"),$(".star-pad #acti-mobile-hamburger-content").addClass("showFooter"),$(".star-pad #acti-mobile-memo-content").addClass("showFooter"),$(".star-pad #acti-mobile-search-content").addClass("showFooter"),$(".phone #acti-mobile-hamburger-content").addClass("showFooter"),$(".phone #acti-mobile-memo-content").addClass("showFooter"),$(".phone #acti-mobile-search-content").addClass("showFooter"),$("#acti-mobile-painter-content").addClass("showFooter"),$(".memo-create-title-box").addClass("showFooter"))}},setColorBoxPosition:function(){var e=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);if(device.mobile()||device.tablet()||e){var t=App.pdfInfo.get("contentInfoDispFlg");1==window.parent.history.length&&0==t?$(".acti-sd-pen-color").addClass("lowerBot"):$(".acti-sd-pen-color").removeClass("lowerBot")}},changeHistoryPram:function changeHistoryPram(parm,parmValue){try{if(1==App.pdfInfo.embed_flg)return;var windowTop=window.top,url=windowTop.location.href,pattern=parm+"=([^&]*)",replaceText=parm+"="+parmValue,changeUrl="";if(url.match(pattern)){var tmp="/("+parm+"=)([^&]*)/gi";changeUrl=url.replace(eval(tmp),replaceText)}else changeUrl=url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText;windowTop.history.replaceState(null,null,changeUrl)}catch(e){return}},forbiddenContextmenu:function(){$(document).on("contextmenu",function(){return!1})},updateLocalProgress:function(e){var t=App.pdfInfo.readProgressKey;localStorage.getItem(t)!=e&&localStorage.setItem(t,e)},getUrlParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");try{var n=window.top.location.search.substr(1).match(t);return null!=n?decodeURIComponent(n[2]):""}catch(e){return""}},getSearchType:function(){return"1"==App.pdfInfo.get("compatibleFlg")?!App.PdfUtilController.orSearchType:!!App.pdfInfo.get("isMatchByPage")},updateCallAppKeyword:function(e){var t=$.trim($("#sidebar_search_input").val())||"",n=e.indexOf("&keyword="),i=e.indexOf("&isAndSearch=");return e.slice(0,n+9)+t+e.slice(i)}})}),define("one-book/controllers/utils/storage-util-controller",["exports","ember"],function(e,t){App.StorageUtilController=t.default.Object.create({getStorageKeyByPageno:function(e){return App.pdfInfo.get("userNum")+"_"+App.pdfInfo.get("shareBaseUrl")+"_"+App.pdfInfo.get("contentNum")+"_"+e+"_"+(App.pdfInfo.get("embed_flg")||0)},getMemoByPageno:function(e){if(!e)return{};var t=this.getStorageKeyByPageno(e);return(JSON.parse(window.localStorage.getItem(t))||{}).memo||{}},getMemoByPagenoAndId:function(e,t){if(!e||!t)return{};var n=this.getMemoByPageno(e),i={},o=!1;return n&&n.updateDate&&$.each(n.memoData||[],function(){t==this.id&&(o=!0,i=this)}),o||(i=$.extend(!0,{},App.pageConfig.memo_init_parameter)),i},
setMemoByPageno:function(e,t){if(!e)return!1;var n=this.getStorageKeyByPageno(e),i=JSON.parse(window.localStorage.getItem(n))||{};return i.memo=t,window.localStorage.setItem(n,JSON.stringify(i)),window.initSidebar_mome_pc&&window.initSidebar_mome_pc(),!0},pushMemoData:function(e,t){if(!e||!t.id)return!1;var n=this.getMemoByPageno(e);if(n&&n.updateDate){var i=!1;$.each(n.memoData||[],function(e){t.id==this.id&&(i=!0,n.memoData[e]=t)}),i||(n.memoData&&n.memoData instanceof Array?n.memoData.push(t):n.memoData=[t]),n.updateDate=+new Date}else n={pageNum:e,updateDate:+new Date,memoData:[t]};return this.setMemoByPageno(e,n),!0},removeMemoDataById:function(e,t){if(!e)return!1;var n=this.getMemoByPageno(e);if(n&&n.updateDate){var i=!1;if($.each(n.memoData||[],function(e){if(t==this.id)return i=!0,n.memoData.splice(e,1),!1}),i)return n.updateDate=+new Date,this.setMemoByPageno(e,n),!0}return!1},getPenByPageno:function(e){if(!e)return{};var t=this.getStorageKeyByPageno(e);return(JSON.parse(window.localStorage.getItem(t))||{}).pen||{}},setPenByPageno:function(e,t){if(!e)return!1;var n=this.getStorageKeyByPageno(e),i=JSON.parse(window.localStorage.getItem(n))||{};return i.pen={pageNum:e,updateDate:+new Date,penData:t},window.localStorage.setItem(n,JSON.stringify(i)),!0}})}),define("one-book/controllers/utils/turn-util-controller",["exports","ember"],function(e,t){App.TurnUtilController=t.default.Object.create({is_first_run_turnJS_turned:!0,expandFlg:!1,initBook:function(){var e=this,t=parseInt(App.pdfInfo.get("totalPageNo"));e.initBookCss(),e.resetSpreadMode(),App.PublicUtilController.setFooterDisplay(),e.initBookViewSize(),e.setPageTurnFun(),e.bookPositionCenter();var n=new Hammer(document.getElementById("main_divLink_id"));App.pdfInfo.set("pageHammerObject",n),1==t?$("#book_main").turn("disable",!0):App.TurnUtilController.setZoomRunfun()},setPageTurnFun:function(){var e=this,n=parseInt(App.pdfInfo.get("totalPageNo")),i=App.pdfInfo.get("direction"),o=App.pdfInfo.get("hasCover"),a=App.pdfInfo.get("readProgress"),l=App.pdfInfo.get("spread_mode"),r=e.getBookSize();t.default.$("#book_main").turn({width:r.width,height:r.height,elevation:100,duration:800,acceleration:!1,page:a,cover:o,pages:n,direction:i,display:l,when:{missing:function(e,n){for(var i=0;i<n.length;i++){var o=n[i],a=$('<div style="background: #cac9cd;">                                        <div class="book-bg-active book_page" id="book_page_'+o+'">                                            </div>                                        <img class="acti-page-pen-img" pageno="'+o+'" id="pen_img_p'+o+'">                                    </div>');t.default.$("#book_main").turn("addPage",a,o)}0==$("#main_painter_id").length&&App.PainterUtilController&&App.PainterUtilController.initPainter()},turning:function(){var t=App.pdfInfo.get("spread_mode"),n=$("div.p-temporal > div").attr("pageno"),i=e.getCurrentPagenos()[0];"single"==t&&n!=i&&$("div.p-temporal > div").empty(),window.pageTurning=!0,App.LinkUtilController.stopPlayAudio(),$("#main_divLink_id").html(""),App.MemoUtilController&&App.MemoUtilController.clearMemoJspanel(),App.PainterUtilController&&App.PainterUtilController.getCanvasImgAndSaveStorage(),App.PainterUtilController&&App.PainterUtilController.clearPainterLayer(),$("#main_painter_id").css("pointer-events","none"),App.PrintUtilController&&App.PrintUtilController.disablePrintOption(),$(".bookCanvasBox")&&$(".bookCanvasBox").css({display:"none"})},turned:function(){App.KinesisLogUtilController.isCompleteTurn=!0,window.pageTurning=!1,device.mobile()&&(window.page_pressed=!1);var t=(App.pageConfig.get("prefixDivLink_Page"),e.getCurrentPagenos()),n=App.KinesisLogUtilController.readTimer;if(null!==n&&n.length>0){for(var i=n.length-1;i>=0;i--)clearInterval(n[i]);App.KinesisLogUtilController.readTimer=[]}for(var o=0;o<t.length;o++){var a=t[o],l=new Image;l.pageno=a,l.onload=function(){$("#book_page_"+this.pageno).addClass("book-bg-active")},l.src=e.getPageImgByPageno(a)}$("div.p-temporal > div").empty(),App.PdfUtilController.cleanPhraseMatch(!1),App.PdfMainController.isLoaded&&App.bookViewerController.pdfPagesRendering(),App.LinkUtilController.resetPageLinkFun(),e.binkSelectedAndPosition();var r=e.updateTurnCurrPage(e.getCurrentPagenos()[0]);if($("#goto_page_input").val(r),App.bookViewerController.rerenderFun_back(e.getCurrentPagenos()[0]),e.changeShareUrl(),App.LogUtilController.registerReadingLog(),App.KinesisLogUtilController.sendLogByActionTpye(App.pageConfig.get("kinesis_log_actionType_paging")),App.KinesisLogUtilController.sendLogByActionTpye(App.pageConfig.get("kinesis_log_actionType_dwell_time")),App.KinesisLogUtilController.processId=[],0!==App.KinesisLogUtilController.startPage){var s=App.KinesisLogUtilController.changePageActionType.actionType;""===s&&(App.KinesisLogUtilController.changePageActionType.time=(new Date).getTime());var c=App.KinesisLogUtilController.changePageActionType.time;e.sendTurnPageLog(s,c)}if(e.resetPageTurnButton(),App.MemoUtilController&&App.MemoUtilController.resetPageMemoList(),App.PainterUtilController&&App.PainterUtilController.resetPagePainterLayer(),$("#main_painter_id").css("pointer-events",""),App.PrintUtilController&&App.PrintUtilController.changePrintOption(),$("#acti-header-container .acti_book_pageno").html(r),"1"==App.pdfInfo.get("compatibleFlg")){$(".bookCanvasBox")&&$(".bookCanvasBox").css({display:"block"});for(var p=App.PdfUtilController.currkeyPage,d=!1,m=0;m<t.length;m++)p==t[m]&&(d=!0);0==d&&(App.PdfUtilController.currKeyOrder=""),App.pdfInfo.get("currentZoomScale")>1&&e.changeBackgroundImg(),App.PdfUtilController.highlightSearchResult()}App.PublicUtilController.changeHistoryPram("pNo",e.getCurrentPagenos()[0]),window.sidebar_Cutting&&$("#sidebar_cut").click()},pressed:function(){window.page_pressed=!0,$("#book_main div.link-layer").hide(),App.MemoUtilController&&App.MemoUtilController.hideMemoJspanel(),App.PainterUtilController&&App.PainterUtilController.hidePainterLayer()},start:function(t){if(window.pageTurning);else{var n=App.pdfInfo.get("spread_mode"),i=e.getCurrentPagenos()[0];"single"==n&&(0==$("div.p-temporal > div").length&&$(t.target).flip("_moveFoldingPage",!0),App.bookViewerController.rerenderFun_back(i))}return!0},end:function(){device.mobile()&&(window.page_pressed=!1),App.MemoUtilController&&App.MemoUtilController.showMemoJspanel(),$("#book_main div.link-layer").show(),App.PainterUtilController&&App.PainterUtilController.showPainterLayer()}}})},sendTurnPageLog:function(e,t){var n=this;App.pdfInfo.get("totalPageNo");setTimeout(function(){var e=n.getCurrentPagenos();if(App.KinesisLogUtilController.changePageActionType.time===t){if(""===App.KinesisLogUtilController.changePageActionType.actionType){var i=1;null!==e&&e.length>0&&e.forEach(function(e,t){i=e}),App.KinesisLogUtilController.startPage!==i&&(App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("turn_page",i),App.KinesisLogUtilController.sendReadingProcessAwsKinesisLog_Add("","turn_page",App.KinesisLogUtilController.startPage,i,""),n.sendReadLog(0))}else!function(){var t=App.KinesisLogUtilController.changePageActionType.targetPage,i=["next","previous","first","last"],o=i.filter(function(e){return t===e});if(o||o.length>0){var a=1;null!==e&&e.length>0&&e.forEach(function(e,t){a=e}),t=a}App.KinesisLogUtilController.startPage!==t&&(App.KinesisLogUtilController.sendReadingProcessAwsKinesisLog_Add("",App.KinesisLogUtilController.changePageActionType.actionType,App.KinesisLogUtilController.startPage,t,""),n.sendReadLog(1e3*App.KinesisLogUtilController.turnTimeValue))}();null!==e&&e.length>0&&e.forEach(function(e,t){App.KinesisLogUtilController.startPage=e})}},1e3*App.KinesisLogUtilController.turnTimeValue)},sendReadLog:function(e){var t=this;App.pdfInfo.get("totalPageNo");setTimeout(function(){t.getCurrentPagenos().forEach(function(e,t){App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("read",""),App.KinesisLogUtilController.sendReadingProcessAwsKinesisLog_Add("","read","",e,App.KinesisLogUtilController.turnTimeValue)});var e=setInterval(function(){t.getCurrentPagenos().forEach(function(e,t){App.KinesisLogUtilController.changePageActionType=App.LogUtilController.getReadFlag("read",""),App.KinesisLogUtilController.sendReadingProcessAwsKinesisLog_Add(App.KinesisLogUtilController.processIdList[t]||"","read","",e,App.KinesisLogUtilController.dwellTimeValue)})},1e3*App.KinesisLogUtilController.dwellTimeValue);App.KinesisLogUtilController.readTimer.push(e)},e)},resetPageTurnButton:function(){var e=parseInt(App.pdfInfo.get("totalPageNo")),t=App.pdfInfo.get("direction");$("div.toolbar_button").addClass("active").removeClass("disabled"),this.isCurrentPagenosContainsPageno(1)&&("ltr"==t?$("div.toolbar-previous, div.toolbar-first").removeClass("active").addClass("disabled"):$("div.toolbar-next, div.toolbar-last").removeClass("active").addClass("disabled")),this.isCurrentPagenosContainsPageno(e)&&("ltr"==t?$("div.toolbar-next, div.toolbar-last").removeClass("active").addClass("disabled"):$("div.toolbar-previous, div.toolbar-first").removeClass("active").addClass("disabled"))},changeShareUrl:function(){var e=this;if(App.pdfInfo.get("shareBaseUrl").indexOf("://127.0.0.1")>-1||App.pdfInfo.get("shareBaseUrl").indexOf("://localhost")>-1)return $(".sidebar_share").css("visibility","hidden"),$("#acti-mobile-share-button").parent().hide(),!0;var t="";0==App.pdfInfo.get("contentInfoDispFlg")&&(t="&detailFlg=0");var n=[];n[0]=App.pageConfig.get("ActiBookOne_Flg"),n[1]=App.pdfInfo.get("readType");var i=App.pdfInfo.get("contentNum"),o=e.getCurrentPagenos()[0],a=App.pdfInfo.get("shareBaseUrl");-1==n[1]?a+="&":a+="?";var l=n.slice(0);l[2]=App.pageConfig.get("readFrom_Facebook");var r=a+"cNo="+i+"&param="+BASE64.encoder(l.join("_"))+"&siteNum="+App.pdfInfo.get("siteNum")+"&siteTitle="+App.pdfInfo.get("siteTitle")+"&pNo="+o+t;r=App.pageConfig.get("share_facebook")+encodeURIComponent(r),App.pdfInfo.set("shareUrl_Facebook",r);var s=n.slice(0);s[2]=App.pageConfig.get("readFrom_Twitter");var c=a+"cNo="+i+"&param="+BASE64.encoder(s.join("_"))+"&siteNum="+App.pdfInfo.get("siteNum")+"&siteTitle="+App.pdfInfo.get("siteTitle")+"&pNo="+o+t;c=App.pageConfig.get("share_twitter")+encodeURIComponent(c),App.pdfInfo.set("shareUrl_twitter",c);var p=n.slice(0);p[2]=App.pageConfig.get("readFrom_LINE");var d=a+"cNo="+i+"&param="+BASE64.encoder(p.join("_"))+"&siteNum="+App.pdfInfo.get("siteNum")+"&siteTitle="+App.pdfInfo.get("siteTitle")+"&pNo="+o+t;App.pdfInfo.set("shareUrl_LINE",d);var m=n.slice(0);m[2]=App.pageConfig.get("readFrom_QRcode");var _=a+"cNo="+i+"&param="+BASE64.encoder(m.join("_"))+"&siteNum="+App.pdfInfo.get("siteNum")+"&siteTitle="+App.pdfInfo.get("siteTitle")+"&pNo="+o+t;App.pdfInfo.set("shareUrl_QRcode",_)},setPageMainDivSize:function(){var e=this.getBookSize();$("#book_main").turn("size",e.width,e.height),App.PainterUtilController.resetPainterCanvasScale()},bookPositionCenter:function(){var e=App.pdfInfo.get("book_width"),t=App.pdfInfo.get("book_height"),n=App.pdfInfo.get("book_max_width"),i=App.pdfInfo.get("book_max_height");t<=i?$("#book_main").css("top",(i-t)/2):$("#book_main").css("top",0),e<=n?$("#book_main").css("left",(n-e)/2):$("#book_main").css("left",0)},gotoPageByTarget:function(e,n){var i=$("#book_main").turn("disabled");if(i&&$("#book_main").turn("disable",!1),"next"===e)t.default.$("#book_main").turn("next");else if("previous"===e)t.default.$("#book_main").turn("previous");else if("NaN"!==parseInt(e).toString()){if(e=parseInt(e),void 0!==n&&App.MemoUtilController&&App.MemoUtilController.resetPageMemoList(),this.isCurrentPagenosContainsPageno(e))return i&&$("#book_main").turn("disabled",!0),!1;t.default.$("#book_main").turn("page",e)}else"first"===e?t.default.$("#book_main").turn("page",1):"last"===e&&t.default.$("#book_main").turn("page",App.pdfInfo.get("totalPageNo"));i&&$("#book_main").turn("disable",!0)},getCurrentPagenos:function(){var e=t.default.$("#book_main").turn("view"),n=$.inArray(0,e);return n>-1&&e.splice(n,1),e},getViewPagenos:function(){for(var e=App.pdfInfo.get("totalPageNo"),t=this.getCurrentPagenos(),n=0;n<2;n++){var i=t[t.length-1]+1;if(i>e)break;t.push(i)}for(var n=1;n<=2;n++){var i=t[0]-n;if(i<1)break;t.push(i)}return t},setZoomStopfun:function(){var e=this,t=App.pdfInfo.get("pageHammerObject");t.off("swiperight"),t.off("swipeleft"),e.resetBookTurn_disable(!0)},setZoomRunfun:function(){var e=this,t=App.pdfInfo.get("pageHammerObject");t.on("swiperight",function(e){e.preventDefault();var t=$("#book_main").turn("options");t.direction&&"rtl"===t.direction?$("#book_main").turn("next"):$("#book_main").turn("previous")}),t.on("swipeleft",function(e){e.preventDefault();var t=$("#book_main").turn("options");t.direction&&"rtl"===t.direction?$("#book_main").turn("previous"):$("#book_main").turn("next")}),e.resetBookTurn_disable(!1)},resetBookTurn_disable:function(e){if(e)$("#book_main").turn("disable",!0);else{var t=App.pdfInfo.get("currentZoomScale"),n=App.pdfInfo.get("totalPageNo");1!=t||App.PainterUtilController.penIsActive||App.MemoUtilController.memoIsCreateState||1==n?$("#book_main").turn("disable",!0):$("#book_main").turn("disable",!1)}},binkSelectedAndPosition:function(){var e=App.pageConfig.get("prefixCanvas_Toc"),t=this.getCurrentPagenos(),n=$("#"+e+t[0]),i=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);if(device.mobile()||(device.tablet()||i)&&!device.windowsTablet())$("#acti-mobile-toc-content div.page_group.active").removeClass("active"),n.length>0&&function(){$.each(t,function(){$("#"+e+this).parents("div.page_group:first").addClass("active")});var n=$("#acti-mobile-toc-content"),i=$("#"+e+t[0]).parents("div.page_group:first").width(),o=$("#acti-mobile-toc-content").width();if(1===t.length){var a=$("#"+e+t[0]).parents("div.page_group:first").position().left+n.scrollLeft();n.scrollLeft(a-o/2+i/2+8)}else{var a=0;$.each(t,function(){$("#"+e+this).parents("div.page-left:first").length>0&&(a=$("#"+e+this).parents("div.page-left:first").position().left+n.scrollLeft())}),n.scrollLeft(a-o/2+i+8+4)}$("#acti-mobile-toc-content > div").trigger("touchmove.top")}();else if(n.length>0){$("#acti-sidebar-toc-content .active").removeClass("active"),$.each(t,function(){$("#"+e+this).addClass("active")});var o=($("#acti-sidebar-toc-content"),$("#"+e+t[0]).parents(".toc-page-group:first").position().top),a=$("#"+e+t[0]).parent().height(),l=$("#acti-sidebar-toc-content").height(),r=o-l/2+a/2;r=r<0?0:r,$("#acti-sidebar-toc-content").mCustomScrollbar("scrollTo",[r,0])}},getSpreadModeByWindowSize:function(){var e="double";return $(window).width()<$(window).height()&&(e="single"),App.pdfInfo.set("spread_mode",e),e},changeSpreadMode:function(){var e=this.resetSpreadMode();t.default.$("#book_main").turn("display",e)},isCurrentPagenosContainsPageno:function(e){var t=this.getCurrentPagenos();return $.inArray(e,t)>-1},isViewPagenosContainsPageno:function(e){var n=t.default.$("#book_main").turn("view");return $.inArray(e,n)>-1},initBookViewSize:function(){var e=App.pdfInfo.get("first_width"),n=App.pdfInfo.get("first_height"),i=App.pdfInfo.get("spread_mode");"single"===i||(e*=2);var o=Math.round(t.default.$("#index_main > div.pack_book_div").width()),a=Math.round(t.default.$("#index_main > div.pack_book_div").height());App.pdfInfo.set("book_max_width",o),App.pdfInfo.set("book_max_height",a);var l=0,r=0;e/n>=o/a?(l=o,r=Math.round(n*(o/e))):(r=a,l=Math.round(e*(a/n))),l%2==1&&l++,App.pdfInfo.set("book_width",l),App.pdfInfo.set("book_height",r),"single"===i?App.pdfInfo.set("page_width",l):App.pdfInfo.set("page_width",Math.floor(l/2)),App.pdfInfo.set("page_height",r)},getBookSize:function(){var e=App.pdfInfo.get("currentZoomScale"),t=App.pdfInfo.get("book_width"),n=App.pdfInfo.get("book_height"),i=Math.floor(t*e),o=Math.floor(n*e);return i%2==1&&i--,{width:i,height:o}},getPageSize:function(){var e=App.pdfInfo.get("spread_mode"),t=this.getBookSize(),n=void 0,i=void 0;return n="single"===e?t.width:t.width/2,i=t.height,{width:n,height:i}},resetSpreadMode:function(){var e=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),n="";if(device.mobile()){var i=t.default.$("#index_main > div.pack_book_div").width(),o=t.default.$("#index_main > div.pack_book_div").height();n=i>o?App.pdfInfo.get("spread_mode_init"):"single"}else if(device.tablet()||e){var i=t.default.$("#index_main > div.pack_book_div").width(),o=t.default.$("#index_main > div.pack_book_div").height();n=o+50>i?"single":App.pdfInfo.get("spread_mode_init")}else n=App.pdfInfo.get("spread_mode_init");return App.pdfInfo.set("spread_mode",n),"single"==n?$("#book_main").data("single_fast_pageing",!0):$("#book_main").data("single_fast_pageing",!1),n},isPositionByPageno:function(e){var t=App.pdfInfo.get("spread_mode"),n=App.pdfInfo.get("direction"),i=App.pdfInfo.get("hasCover");return"single"!=t&&("rtl"==n&&!i||"ltr"==n&&i?e%2==1?"R":"L":e%2!=1?"R":"L")},getPageImgByPageno:function(e){var t=App.pdfInfo.url_Prefix,n=App.pdfInfo.url_Suffix,i=App.pageConfig.pageImgPath,o=App.pdfInfo.get("imgType")||App.pageConfig.pageImgType;return encodeURI(t+i+e+o+n)},getPageThumbnailsImgByPageno:function(e){var t=App.pdfInfo.url_Prefix,n=App.pdfInfo.url_Suffix,i=App.pageConfig.thumbnailPath,o=App.pdfInfo.get("imgType")||App.pageConfig.pageImgType;return encodeURI(t+i+e+o+n)},initBookCss:function(){for(var e=this,t=parseInt(App.pdfInfo.get("totalPageNo")),n="",i=1;i<=t;i++)n+="#book_page_"+i+'.book-bg-active {background: url("'+e.getPageImgByPageno(i)+'") center center / contain no-repeat;}',"L"===e.isPositionByPageno(i)?(n+="#book_page_"+i+" {background-position: right !important;}",n+="#book_page_"+i+" > img {float: right !important;}",n+="#book_page_"+i+" .canvasWrapper {right: 0 !important;}"):"R"===e.isPositionByPageno(i)&&(n+="#book_page_"+i+" {background-position: left !important;}",n+="#book_page_"+i+" > img {float: left !important;}",n+="#book_page_"+i+" .canvasWrapper {left: 0 !important;}");var o=document.getElementsByTagName("HEAD").item(0),a=document.createElement("style");a.type="text/css",a.innerHTML=n,o.appendChild(a)},changeBackgroundImg:function(){var e=App.pdfInfo.get("currentZoomScale");0!=$(".book-bg-active").length&&e>1&&function(){"DL"==App.pdfInfo.get("viewerType")?$(".book-bg-active").each(function(e){if($(this).children().length>0);else{var t=$(this).attr("id"),n=t.replace(/[^0-9]/gi,""),i=App.pdfInfo.get("imgType")||App.pageConfig.pageImgType,o="../images/3/"+n+i,a=$("<div class='expandDiv'></div>");$(this).append(a);var l="url("+o+") center center / contain no-repeat";a.css({width:"100%",height:"100%",background:l});var r=$(this).css("backgroundPosition");r&&a.css({backgroundPosition:r})}}):$(".book-bg-active").each(function(e){if($(this).children().length>0);else{var t=$(this).attr("id"),n=t.replace(/[^0-9]/gi,""),i=App.pdfInfo.url_Prefix,o=App.pdfInfo.url_Suffix,a=App.pageConfig.compatiblePageImgPath,l=App.pdfInfo.get("imgType")||App.pageConfig.pageImgType,r=encodeURI(i+a+n+l+o),s=$("<div class='expandDiv'></div>");$(this).append(s);var c="url("+r+") center center / contain no-repeat";s.css({width:"100%",height:"100%",background:c});var p=$(this).css("backgroundPosition");p&&s.css({backgroundPosition:p})}})}()},updateTurnCurrPage:function(e){var t=App.pdfInfo.get("customizeJsons"),n=e;return t.map(function(t,i){e==i+1&&(n=t.show)}),n},getActualPageNumber:function(e){var t=App.pdfInfo.get("pageStart"),n=Number(e)-Number(t)+1;return(n<0||0===n)&&(n=""),n},setTargetByPage:function(e){var t=App.pdfInfo.get("pageStart"),n=App.pdfInfo.get("totalPageNo"),i=1;if("NaN"!=String(Number(e))&&0!=Number(e)&&String(Number(e)).indexOf(".")<0)i=Number(e),i=i+t-1,i=App.CommonUtilController.checkNumber(i,1,n);else{for(var o=App.pdfInfo.get("customizeJsons"),a=App.pdfInfo.get("chapterJsons"),l=!1,r=0;r<o.length;r++)if(e==o[r].show){i=o[r].target,l=!0;break}if(!l){for(var s=[],r=0;r<a.length;r++)e==a[r].title&&(s.push(a[r].target),l=!0);for(var c=s[0],r=1;r<s.length;r++)c>s[r]&&(c=s[r]);i=c}}return i}})}),define("one-book/helpers/app-version",["exports","ember","one-book/config/environment","ember-cli-app-version/utils/regexp"],function(e,t,n,i){function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.hideSha?a.match(i.versionRegExp)[0]:t.hideVersion?a.match(i.shaRegExp)[0]:a}e.appVersion=o;var a=n.default.APP.version;e.default=t.default.Helper.helper(o)}),define("one-book/helpers/pluralize",["exports","ember-inflector/lib/helpers/pluralize"],function(e,t){e.default=t.default}),define("one-book/helpers/singularize",["exports","ember-inflector/lib/helpers/singularize"],function(e,t){e.default=t.default}),define("one-book/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","one-book/config/environment"],function(e,t,n){var i=n.default.APP,o=i.name,a=i.version;e.default={name:"App Version",initialize:(0,t.default)(o,a)}}),define("one-book/initializers/container-debug-adapter",["exports","ember-resolver/container-debug-adapter"],function(e,t){e.default={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0];e.register("container-debug-adapter:main",t.default),e.inject("container-debug-adapter:main","namespace","application:main")}}}),define("one-book/initializers/data-adapter",["exports","ember"],function(e,t){e.default={name:"data-adapter",before:"store",initialize:function(){}}}),define("one-book/initializers/ember-data",["exports","ember-data/setup-container","ember-data/-private/core"],function(e,t,n){e.default={name:"ember-data",initialize:t.default}}),define("one-book/initializers/export-application-global",["exports","ember","one-book/config/environment"],function(e,t,n){function i(){var e=arguments[1]||arguments[0];if(!1!==n.default.exportApplicationGlobal){var i;if("undefined"!=typeof window)i=window;else if("undefined"!=typeof global)i=global;else{if("undefined"==typeof self)return;i=self}var o,a=n.default.exportApplicationGlobal;o="string"==typeof a?a:t.default.String.classify(n.default.modulePrefix),i[o]||(i[o]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete i[o]}}))}}e.initialize=i,e.default={name:"export-application-global",initialize:i}}),define("one-book/initializers/injectStore",["exports","ember"],function(e,t){e.default={name:"injectStore",before:"store",initialize:function(){}}}),define("one-book/initializers/store",["exports","ember"],function(e,t){e.default={name:"store",after:"ember-data",initialize:function(){}}}),define("one-book/initializers/transforms",["exports","ember"],function(e,t){e.default={name:"transforms",before:"store",initialize:function(){}}}),define("one-book/instance-initializers/ember-data",["exports","ember-data/-private/instance-initializers/initialize-store-service"],function(e,t){e.default={name:"ember-data",initialize:t.default}}),define("one-book/models/pdf-model",["exports","ember"],function(e,t){e.default=t.default.Object.extend({totalPageNo:0,currentZoomScale:1,maxZoom:3,minZoom:1,hasCover:!1,readProgress:1,spread_mode:"double",spread_mode_init:"double",searchValueArr:t.default.A(),isMatchByPage:!1,password:"",pdfPath:"",pageHammerObject:null,url_Prefix:"",url_Suffix:"",customize_date:"",linkJsons:null,fileJsons:[],chapterJsons:null,contentInfoJsons:{},book_max_width:0,book_min_height:0,book_width:0,book_height:0,page_width:0,page_height:0,first_width:0,first_height:0,initViewerAttr:{},selectedPagenoAndDivIndex:{},callAppUrl:"",embed_flg:"",backUrl:"",printableFlg:"",shareableFlg:"",contentInfoDispFlg:"",hasText:"",shareUrl_Facebook:"",shareUrl_twitter:"",shareUrl_LINE:"",shareUrl_QRcode:""})}),define("one-book/models/pdf-page-view",["exports","ember"],function(e,t){e.default=t.default.Object.extend({totalPageNo:0,loadType:"page",id:null,renderingId:null,div:null,canvas:null,drawLayer:null,zoomLayer:null,scale:1,width:null,height:null,page_zoom_scale:0,page_rendering_scale:0,pdfPage:null,loadingTask:null,viewport:null,stats:null,outputScale:null,renderingState:null,renderingQueue:null,resume:null,paintTask:null,error:null,downloadComplete:null,isTextLayer:null,textLayer_viewport:null,canvasFixWdith:"",canvasFixHeight:"",unusualWidth:"",unusualHeight:"",unusualFlg:!1,init:function(){this.renderingId="book_page_canvas_"+this.id,this.renderingQueue=App.PdfMainController.renderingQueue,this.totalPageNo=App.pdfInfo.get("totalPageNo")},setPdfPage:function(e){this.pdfPage=e,this.viewport=e.getViewport({scale:this.scale*CSS_UNITS}),this.stats=e.stats,this.reset()},reset:function(e){this.cancelRendering(),this.renderingState=RenderingStates.INITIAL;var t=this.div;if(!t)return!1;$(this.div).empty(),t.removeAttribute("data-loaded"),this.resetViewport()},_resetZoomLayer:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];if(this.zoomLayer){var t=this.zoomLayer.firstChild;t&&(t.width=0,t.height=0),e&&this.zoomLayer.remove(),this.zoomLayer=null}},cancelRendering:function(){this.isTextLayer=!0,this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&$(this.textLayer).empty()},cleanup:function(){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.pdfPage&&(this.pdfPage.cleanup(),this.pdfPage=null),this.resume=null},resetViewport:function(){if(!this.pdfPage)return!1;var e,t,n=this.pdfPage.getViewport({scale:1*CSS_UNITS}),i=App.TurnUtilController.getPageSize(),o=this.maxWidth=i.width,a=this.maxHeight=i.height;n.width/n.height>=o/a?(e=o,t=n.height*(o/n.width)):(t=a,e=n.width*(a/n.height)),this.width=Number(i.width),this.height=Number(i.height),this.unusualWidth=Math.floor(e),this.unusualHeight=Math.floor(t),this.canvasFixWdith=this.width,this.canvasFixHeight=this.height,this.viewport=this.pdfPage.getViewport({scale:this.width/n.width*CSS_UNITS})},draw:function(){var e=this;if(this.renderingState!==RenderingStates.INITIAL&&this.reset(),!this.pdfPage)return this.renderingState=RenderingStates.FINISHED,Promise.reject(null);this.renderingState=RenderingStates.RUNNING;var t=this.pdfPage,n=this.div,i=document.createElement("div"),o=0;this.maxWidth-this.unusualWidth<=2?(this.unusualFlg=!1,o=100):(this.unusualFlg=!0,o=this.unusualWidth/this.maxWidth*100),i.style.width=o>=100?"100%":o+"%";var a=0;this.maxHeight-this.unusualHeight<=2?(this.unusualFlg=!1,a=100):(this.unusualFlg=!0,a=this.unusualHeight/this.maxHeight*100),i.style.height=a>=100?"100%":a+"%",i.classList.add("canvasWrapper"),$(i).css("z-index",e.totalPageNo+55),n.appendChild(i),this.drawLayer=i;var l=null;if(this.isTextLayer){var r=document.createElement("div");r.className="textLayer",r.style.width=i.style.width,r.style.height=i.style.height,n.appendChild(r),l=r,$(l).css("z-index",this.totalPageNo+60)}this.textLayer=l;var s=null;this.renderingQueue&&(s=function(t){if(!e.renderingQueue.isHighestPriority(e))return e.renderingState=RenderingStates.PAUSED,void(e.resume=function(){e.renderingState=RenderingStates.RUNNING,t()});t()});var c=function(i){if(i){var o=App.pdfInfo.get("currentZoomScale");App.TurnUtilController.isCurrentPagenosContainsPageno(e.id)?o==e.page_zoom_scale?e.renderingState=RenderingStates.FINISHED:e.renderingState=RenderingStates.INITIAL:e.renderingState=RenderingStates.FINISHED}else e.renderingState=RenderingStates.FINISHED;return d===e.paintTask&&(e.paintTask=null),"cancelled"===i||i instanceof window["pdfjs-dist/build/pdf"].RenderingCancelledException?(e.error=null,Promise.resolve(void 0)):($("img",e.div).remove(),e.page_zoom_scale=e.page_rendering_scale,n.setAttribute("data-loaded",!0),$(e.drawLayer).siblings(".canvasWrapper").remove(),e._resetZoomLayer(!0),e.error=i,e.stats=t.stats,e.onAfterDraw&&e.onAfterDraw(),i?Promise.reject(i):Promise.resolve(void 0))},p=function(){e.textLayer&&t.getTextContent({normalizeWhitespace:!0}).then(function(t){var n=e.id,i=[],o=document.createDocumentFragment(),a=pdfjsLib.renderTextLayer({textContent:t,container:o,viewport:e.viewport,textDivs:i,timeout:200,enhanceTextSelection:!0}),r=App.PdfUtilController.get("textDivsArr");r[n]=i,App.PdfUtilController.set("textDivsArr",r),a.promise.then(function(){l.appendChild(o)}.bind(this),function(e){});for(var s=App.PdfUtilController.get("pageContentArr"),c=t.items,p=[],d=0,m=c.length;d<m;d++)p.push(c[d].str);s[n]=p.join("").replace(/\s/," "),App.PdfUtilController.set("pageContentArr",s);var _=App.PdfUtilController.get("textContentArr");_[n]=t,App.PdfUtilController.set("textContentArr",_),App.PdfUtilController.calcFindPhraseMatch(n)},function(){App.CommonUtilController.log("渲染文本层发生错误2!")}),"single"==App.pdfInfo.get("spread_mode")&&App.bookViewerController.rerenderFun_back(e.id)};if(e.page_rendering_scale<=1)return c(null).then(function(){p()}),Promise.resolve(void 0);var d=this.paintOnCanvas(i);d.onRenderContinue=s,this.paintTask=d;var m=d.promise.then(function(){return c(null).then(function(){e.canvas&&e.canvas.removeAttribute("hidden"),p()})},function(e){return c(e)});return this.onBeforeDraw&&this.onBeforeDraw(),m},paintOnCanvas:function(e){var t=pdfjsLib.createPromiseCapability(),n={promise:t.promise,onRenderContinue:function(e){e()},cancel:function(){u.cancel()}},i=this.viewport,o=document.createElement("canvas");o.id=this.renderingId,o.setAttribute("hidden","hidden");e.appendChild(o),this.canvas=o,("undefined"==typeof PDFJSDev||PDFJSDev.test("MOZCENTRAL || FIREFOX || GENERIC"))&&(o.mozOpaque=!0);var a=o.getContext("2d",{alpha:!1}),l=getOutputScale(a);if(this.outputScale=l,pdfjsLib.maxCanvasPixels>0){var r=i.width*i.height,s=Math.sqrt(pdfjsLib.maxCanvasPixels/r);(l.sx>s||l.sy>s)&&(l.sx=s,l.sy=s,l.scaled=!0)}var c="",p="";if(0==this.unusualFlg)c=Number(this.canvasFixWdith),p=Number(this.canvasFixHeight);else if(1==this.unusualFlg){var d=e.offsetWidth,m=e.offsetHeight;c=d,p=m}o.width=c,o.height=p;var _={canvasContext:a,transform:null,viewport:this.viewport,renderInteractiveForms:this.renderInteractiveForms},u=this.pdfPage.render(_);return u.onContinue=function(e){n.onRenderContinue?n.onRenderContinue(e):e()},u.promise.then(function(){t.resolve(void 0)},function(e){t.reject(e)}),n},errorFun:function(){var e=this.id,t=$("#book_page_"+e);if(this.renderingState=RenderingStates.FINISHED,t.hasClass("render_error"))return!1;this.div&&$("img",this.div).remove(),t.addClass("render_error").append("<div class='render_page_error'>"+App.App.i18n.pc_toolbar__search__failed+"</div>")}})}),define("one-book/models/pdf-search-view",["exports","ember"],function(e,t){e.default=t.default.Object.extend({id:null,renderingId:null,searchValueArr:[],loadType:"search",pdfPage:null,worker:null,error:null,renderingState:null,renderingQueue:null,resume:null,paintTask:null,extractTextPromises:null,caseSensitive:!1,pageContents:"",textContent:"",textDivs:[],matches:[],init:function(){this.renderingId="search_"+this.id,this.renderingQueue=App.PdfMainController.renderingQueue},setPdfPage:function(e){this.pdfPage=e,this.stats=e.stats,this.reset()},cleanup:function(){this.paintTask&&(this.paintTask=null),this.pdfPage&&(this.pdfPage.cleanup(),this.pdfPage=null),this.resume=null},getPageTextContent:function(){return this.pdfPage.getTextContent({normalizeWhitespace:!0})},reset:function(){!(arguments.length<=0||void 0===arguments[0])&&arguments[0];this.cancelRendering()},cancelRendering:function(){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.renderingState=RenderingStates.INITIAL,this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null)},draw:function(){var e=this;if(this.renderingState!==RenderingStates.INITIAL&&this.reset(),!this.pdfPage)return this.renderingState=RenderingStates.FINISHED,Promise.reject(null);this.renderingState=RenderingStates.RUNNING;var t=this.pdfPage,n=null;this.renderingQueue&&(n=function(t){if(!e.renderingQueue.isHighestPriority(e))return e.renderingState=RenderingStates.PAUSED,void(e.resume=function(){e.renderingState=RenderingStates.RUNNING,
t()});t()});var i=function(n){return e.cleanup(),"cancelled"===n||n instanceof window["pdfjs-dist/build/pdf"].RenderingCancelledException?(e.error=null,Promise.resolve(void 0)):(e.renderingState=RenderingStates.FINISHED,e.error=n,e.stats=t.stats,n?Promise.reject(n):Promise.resolve(void 0))},o=this._searching();return o.onRenderContinue=n,this.paintTask=o,o.then(function(){return i(null).then(function(){})},function(e){return i(e)})},_searching:function(){var e=this,t=pdfjsLib.createPromiseCapability();this.extractTextPromises=t.promise,this.extractTextPromises.then(function(){e.calcFindMatch()});var n=Promise.resolve();return n=n.then(function(){return e.getPageTextContent().then(function(n){e.textContent=n;for(var i=n.items,o=[],a=0,l=i.length;a<l;a++)o.push(i[a].str);e.pageContents=o.join(""),t.resolve()},function(n){console.error("Unable to get page "+(i+1)+" text content",n),e.pageContents="",t.resolve()})})},calcFindMatch:function(){var e=this,t=this.id,n=this.pageContents,i=this.pageContents,o=this.get("searchValueArr");if(0!==o.length){this.caseSensitive||(i=i.toLowerCase());var a=App.pdfInfo.get("isMatchByPage"),l=0,r=[];if($.each(o,function(){if(""===this)return!0;for(var e=this.toLowerCase(),t=e.length,n=-t,o=!1;;){if(-1===(n=i.indexOf(e,n+t)))break;for(var s=n,c=n+t;s<c;s++)r.push(s);o=!0}if(o)l++;else if(a)return l=-1,!1}),l<=0)return!1;r=_.uniq(r),r=_.sortBy(r);for(var s=-999,c=App.searchViewerController.get("matchResultArray"),p=0;p<r.length;p++){var d=r[p];if(d>s){var m=i.substring(0,d),u=m.match(/[,.\s，。]/g),g=u?u[u.length-1]:" ";s=i.lastIndexOf(g,d),-1===s&&(s=0),d-s<30&&(d=s+30);var h=i.substring(d),f=h.match(/[,.\s，。]/g),v=f?f[0]:" ",b=0;b=i.indexOf(v,s+30),-1===b&&(b=i.length);for(var x=p,A=r[x],C=n.substring(s,A),k=1,w=[];x<r.length;x++)if(r[x+1]&&r[x+1]===r[x]+1)k++;else{var P=n.substr(A,k);P=App.CommonUtilController.HTMLEncode(P);var y="<span class='highlight'>"+P+"</span>";C+=y;var U=e.convertMatches([A],t,P);if(w.push(U[0]),!(r[x+1]&&r[x+1]<b)){A+=k;break}C+=n.substring(A+k,r[x+1]),A=r[x+1],k=1}var I=n.substring(A,b);C+=App.CommonUtilController.HTMLEncode(I);var T=C;s=b;var S=App.TurnUtilController.updateTurnCurrPage(t);S?S.length>15&&(S=S.slice(0,15)+"..."):S="";var L="<li pageno='"+t+"' data-div-index='"+JSON.stringify(w)+"'><div class='page_num'>"+S+App.i18n.pc_toolbar__search__page__text+"</div><div class='search_result'>"+T+"</div></li>",M=App.pdfInfo.get("searchValueArr");c.length<50&&M.length>0&&$("#acti-search-content-view").append(L),M.length>0&&c.push(L)}}}},convertMatches:function(e,t,n,i){var o=this,a=0,l=0,r=o.textContent.items,s=r.length-1,c=n.length,p=[];if(!e)return p;for(var d=0,m=e.length;d<m;d++){for(var _=e[d];a!==s&&_>=l+r[a].str.length;)l+=r[a].str.length,a++;a===r.length&&console.error("Could not find a matching mapping");var u={begin:{divIdx:a,offset:_-l}};for(_+=i?i[d]:c;a!==s&&_>l+r[a].str.length;)l+=r[a].str.length,a++;u.end={divIdx:a,offset:_-l},p.push(u)}return p},errorFun:function(){this.renderingState=RenderingStates.FINISHED}})}),define("one-book/models/pdf-thumbnail-view",["exports","ember"],function(e,t){e.default=t.default.Object.extend({MAX_NUM_SCALING_STEPS:3,THUMBNAIL_CANVAS_BORDER_WIDTH:4,THUMBNAIL_WIDTH:73,id:null,container:null,renderingId:null,loadType:"thumbnail",pdfPage:null,pdfDocument:null,renderTask:null,resume:null,init:function(){this.renderingId="thumbnail_"+this.id,this.renderingQueue=App.PdfMainController.renderingQueue,this.renderingState=RenderingStates.INITIAL,this.pageWidth=App.pdfInfo.get("first_width"),this.pageHeight=App.pdfInfo.get("first_height"),this.pageRatio=this.pageWidth/this.pageHeight,this.canvasWidth=this.THUMBNAIL_WIDTH,this.canvasHeight=this.canvasWidth/this.pageRatio|0,this.scale=this.canvasWidth/this.pageWidth;var e=document.createElement("div"),t=2*this.THUMBNAIL_CANVAS_BORDER_WIDTH;e.style.width=this.canvasWidth+t+"px",e.style.position="relative",this.div=e,this.container.appendChild(e)},setPdfPage:function(e,t){this.pdfPage=e,this.pdfDocument=t,this.viewport=e.getViewport(1),this.resetView()},reset:function(){this.renderingState=RenderingStates.INITIAL},resetView:function(){this.cancelRendering(),this.pageWidth=this.viewport.width,this.pageHeight=this.viewport.height,this.pageRatio=this.pageWidth/this.pageHeight,this.canvasHeight=this.canvasWidth/this.pageRatio|0,this.scale=this.canvasWidth/this.pageWidth,this.div.removeAttribute("data-loaded");for(var e=this.div,t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t[n]);var i=2*this.THUMBNAIL_CANVAS_BORDER_WIDTH;e.style.width=this.canvasWidth+i+"px",this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas),this.image&&(this.image.removeAttribute("src"),delete this.image)},cleanup:function(){if(this.renderingQueue.isHighestPriority(this)&&(this.renderingQueue.printing=!1),this.renderingState!=RenderingStates.FINISHED&&(this.renderingState=RenderingStates.INITIAL),this.loadingTask&&(this.loadingTask.destroy(),this.loadingTask=null),this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.pdfDocument&&this.pdfDocument.transport){for(var e=this.pdfDocument.transport,t=0,n=e.pageCache.length;t<n;t++){var i=e.pageCache[t];i&&i.cleanup()}e.commonObjs.clear(),e.fontLoader.clear(),this.pdfDocument=null}this.pdfPage&&(this.pdfPage.cleanup(),this.pdfPage=null),this.resume=null},cancelRendering:function(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.renderingState=RenderingStates.INITIAL,this.resume=null},_getPageDrawContext:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=document.createElement("canvas");this.canvas=t,("undefined"==typeof PDFJSDev||PDFJSDev.test("MOZCENTRAL || FIREFOX || GENERIC"))&&(t.mozOpaque=!0);var n=t.getContext("2d",{alpha:!1}),i={sx:1,sy:1};return t.width=this.canvasWidth*i.sx|0,t.height=this.canvasHeight*i.sy|0,t.style.width=this.canvasWidth+"px",t.style.height=this.canvasHeight+"px",!e&&i.scaled&&n.scale(i.sx,i.sy),n},_convertCanvasToImage:function(){if(this.canvas&&this.renderingState===RenderingStates.FINISHED){var e=this.renderingId,t=document.createElement("img");t.id=e,t.className="thumbnailImage",t.src=this.canvas.toDataURL(),this.image=t,this.div.setAttribute("data-loaded",!0),this.div.appendChild(t),$(this.div).parent().addClass("loaded"),this.canvas.width=0,this.canvas.height=0,delete this.canvas}},draw:function(){var e=this;if(this.renderingState!==RenderingStates.INITIAL)return Promise.resolve(void 0);if(!this.pdfPage)return this.renderingState=RenderingStates.FINISHED,Promise.resolve(void 0);this.renderingState=RenderingStates.RUNNING;var t=pdfjsLib.createPromiseCapability(),n=function(n){if(e.cleanup(),$(e.div).parents("div.toc-page-group:first").css("height","auto"),("undefined"==typeof PDFJSDev||!PDFJSDev.test("PDFJS_NEXT"))&&"cancelled"===n||n instanceof window["pdfjs-dist/build/pdf"].RenderingCancelledException)return void t.resolve(void 0);e.renderingState=RenderingStates.FINISHED,e._convertCanvasToImage(),n?t.reject(n):t.resolve(void 0)},i=this._getPageDrawContext(),o=this.pdfPage.getViewport(this.scale),a=function(t){if(!e.renderingQueue.isHighestPriority(e))return e.renderingState=RenderingStates.PAUSED,void(e.resume=function(){e.renderingState=RenderingStates.RUNNING,t()});t()},l={canvasContext:i,viewport:o},r=this.renderTask=this.pdfPage.render(l);return r.onContinue=a,r.promise.then(function(){n(null)},function(e){n(e)}),t.promise},errorFun:function(){var e=this.id,n=t.default.$("#toc_canvas_"+e+" > div");if(n.hasClass("render_error"))return!1;n.addClass("render_error").append("<i class='oneviewer oneviewer-times-circle'></i>")},getCanvas:function(e,t){var n=document.createElement("canvas");n.width=e,n.height=t,("undefined"==typeof PDFJSDev||PDFJSDev.test("MOZCENTRAL || FIREFOX || GENERIC"))&&(n.mozOpaque=!0);var i=n.getContext("2d",{alpha:!1});return i.save(),i.fillStyle="rgb(255, 255, 255)",i.fillRect(0,0,e,t),i.restore(),n}})}),define("one-book/resolver",["exports","ember-resolver"],function(e,t){e.default=t.default}),define("one-book/router",["exports","ember","one-book/config/environment"],function(e,t,n){var i=t.default.Router.extend({location:n.default.locationType,rootURL:n.default.rootURL});i.map(function(){this.route("main"),this.route("pc"),this.route("sd"),this.route("pad"),this.route("embedded-sd")}),e.default=i}),define("one-book/routes/embedded-sd",["exports","ember","one-book/controllers/utils/common-util-controller","one-book/configInfo/page-config","one-book/configInfo/pdf-info","one-book/configInfo/i18n-config","one-book/configInfo/browser-info"],function(e,t,n,i,o,a,l){e.default=t.default.Route.extend({})}),define("one-book/routes/index",["exports","ember","one-book/configInfo/browser-info"],function(e,t,n){e.default=t.default.Route.extend({setupController:function(e,t){this._super(e,t);var n=!!(navigator.userAgent.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);device.desktop()||device.windowsTablet()?n?this.transitionTo("pad"):this.transitionTo("pc"):device.tablet()?this.transitionTo("pad"):this.transitionTo("sd")},model:function(e){return e},renderTemplate:function(e,n){this._super(e,n),t.default.run.scheduleOnce("afterRender",this,function(){})}})}),define("one-book/routes/pad",["exports","ember","one-book/controllers/utils/common-util-controller","one-book/controllers/utils/public-util-controller","one-book/configInfo/page-config","one-book/configInfo/pdf-info","one-book/configInfo/i18n-config","one-book/configInfo/browser-info","one-book/controllers/utils/link-util-controller","one-book/controllers/utils/pdf-util-controller","one-book/controllers/utils/turn-util-controller","one-book/controllers/utils/log-util-controller","one-book/controllers/utils/kinesis-log-util-controller","one-book/controllers/utils/jspanel-util-controller","one-book/controllers/utils/memo-util-controller","one-book/controllers/utils/painter-util-controller","one-book/controllers/utils/storage-util-controller","one-book/controllers/utils/hammer-util-controller"],function(e,t,n,i,o,a,l,r,s,c,p,d,m,_,u,g,h,f){e.default=t.default.Route.extend({setupController:function(e,t){this._super(e,t),"1"==App.pdfInfo.get("embed_flg")&&this.transitionTo("pc")}})}),define("one-book/routes/pc",["exports","ember","one-book/controllers/utils/common-util-controller","one-book/controllers/utils/public-util-controller","one-book/configInfo/page-config","one-book/configInfo/pdf-info","one-book/configInfo/i18n-config","one-book/configInfo/browser-info","one-book/controllers/utils/link-util-controller","one-book/controllers/utils/pdf-util-controller","one-book/controllers/utils/turn-util-controller","one-book/controllers/utils/log-util-controller","one-book/controllers/utils/kinesis-log-util-controller","one-book/controllers/utils/jspanel-util-controller","one-book/controllers/utils/memo-util-controller","one-book/controllers/utils/painter-util-controller","one-book/controllers/utils/storage-util-controller","one-book/controllers/utils/print-util-controller","one-book/controllers/utils/hammer-util-controller"],function(e,t,n,i,o,a,l,r,s,c,p,d,m,_,u,g,h,f,v){e.default=t.default.Route.extend({})}),define("one-book/routes/sd",["exports","ember","one-book/controllers/utils/common-util-controller","one-book/controllers/utils/public-util-controller","one-book/configInfo/page-config","one-book/configInfo/pdf-info","one-book/configInfo/i18n-config","one-book/configInfo/browser-info","one-book/controllers/utils/link-util-controller","one-book/controllers/utils/pdf-util-controller","one-book/controllers/utils/turn-util-controller","one-book/controllers/utils/log-util-controller","one-book/controllers/utils/kinesis-log-util-controller","one-book/controllers/utils/jspanel-util-controller","one-book/controllers/utils/memo-util-controller","one-book/controllers/utils/painter-util-controller","one-book/controllers/utils/storage-util-controller","one-book/controllers/utils/hammer-util-controller"],function(e,t,n,i,o,a,l,r,s,c,p,d,m,_,u,g,h,f){e.default=t.default.Route.extend({setupController:function(e,t){this._super(e,t),"1"==App.pdfInfo.get("embed_flg")&&this.transitionTo("embedded-sd")}})}),define("one-book/services/ajax",["exports","ember-ajax/services/ajax"],function(e,t){Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("one-book/templates/application",["exports"],function(e){e.default=Ember.HTMLBars.template({id:"M44ouDIN",block:'{"statements":[["append",["unknown",["outlet"]],false],["text","\\n"]],"locals":[],"named":[],"yields":[],"blocks":[],"hasPartials":false}',meta:{moduleName:"one-book/templates/application.hbs"}})}),define("one-book/templates/components/page-main",["exports"],function(e){e.default=Ember.HTMLBars.template({id:"X/JYPtMX",block:'{"statements":[["open-element","div",[]],["static-attr","id","book_main"],["flush-element"],["text","\\n\\n"],["close-element"]],"locals":[],"named":[],"yields":[],"blocks":[],"hasPartials":false}',meta:{moduleName:"one-book/templates/components/page-main.hbs"}})}),define("one-book/templates/embedded-sd",["exports"],function(e){e.default=Ember.HTMLBars.template({id:"zgy0RjJZ",block:'{"statements":[["text","    "],["open-element","link",[]],["static-attr","rel","stylesheet"],["static-attr","href","./assets/css/embedded-20230316190742.css"],["flush-element"],["close-element"],["text","\\n    "],["open-element","main",[]],["flush-element"],["text","\\n      "],["open-element","div",[]],["static-attr","class","viewer-wrap"],["static-attr","id","viewer-wrap"],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","viewer-wrap__concealer"],["flush-element"],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","viewer-wrap__inner"],["flush-element"],["text","\\n          "],["open-element","div",[]],["static-attr","class","viewer-wrap__image"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","viewer-wrap__image__inner"],["flush-element"],["text","\\n                "],["open-element","img",[]],["static-attr","id","book_cover"],["static-attr","class","viewer-wrap__image__entity"],["flush-element"],["close-element"],["text","\\n            "],["close-element"],["text","\\n          "],["close-element"],["text","\\n          "],["open-element","div",[]],["static-attr","class","viewer-wrap__buttons"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","viewer-wrap__buttons__operation"],["flush-element"],["text","\\n                "],["open-element","a",[]],["static-attr","class","btn btn-operation btn-operation--app waves-effect"],["static-attr","id","app_button"],["static-attr","href","javascript: void(0);"],["static-attr","style","visibility: hidden;"],["flush-element"],["text","\\n                    "],["open-element","i",[]],["static-attr","class","fa fa-mobile"],["flush-element"],["close-element"],["append",["unknown",["share_content__browser_button__text"]],false],["text","\\n                "],["close-element"],["text","\\n                "],["open-element","a",[]],["static-attr","class","btn btn-operation btn-operation--browser waves-effect"],["static-attr","id","browser_button"],["static-attr","href","javascript: void(0);"],["flush-element"],["text","\\n                    "],["open-element","i",[]],["static-attr","class","xiconbasic-globe"],["flush-element"],["close-element"],["append",["unknown",["share_content__browser_button__text"]],false],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","viewer-wrap__buttons__share"],["flush-element"],["text","\\n              "],["open-element","div",[]],["static-attr","class","btn-share-wrap"],["flush-element"],["open-element","a",[]],["static-attr","class","btn btn-share btn-share--qrcode waves-effect"],["static-attr","id","share_qrcode"],["static-attr","href","javascript: void(0);"],["flush-element"],["close-element"],["close-element"],["text","\\n              "],["open-element","div",[]],["static-attr","class","btn-share-wrap"],["flush-element"],["open-element","a",[]],["static-attr","class","btn btn-share btn-share--twitter waves-effect"],["static-attr","id","share_twitter"],["static-attr","href","javascript: void(0);"],["flush-element"],["close-element"],["close-element"],["text","\\n              "],["open-element","div",[]],["static-attr","class","btn-share-wrap"],["flush-element"],["open-element","a",[]],["static-attr","class","btn btn-share btn-share--line waves-effect"],["static-attr","id","share_line"],["static-attr","href","javascript: void(0);"],["flush-element"],["close-element"],["close-element"],["text","\\n            "],["close-element"],["text","\\n          "],["close-element"],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","viewer-wrap__qrcode"],["static-attr","id","qrcode_wrap"],["flush-element"],["text","\\n          "],["open-element","div",[]],["static-attr","class","viewer-wrap__qrcode__contents"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","viewer-wrap__qrcode__contents__close close_btn waves-effect waves-light"],["static-attr","id","qrcode_close"],["flush-element"],["open-element","i",[]],["static-attr","class","xiconbasic-close"],["flush-element"],["close-element"],["close-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","viewer-wrap__qrcode__contents__wrap"],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","viewer-wrap__qrcode__contents__text"],["flush-element"],["text","\\n                        "],["append",["unknown",["share_content__qrcode_contents_text__1"]],false],["text","\\n                        "],["open-element","wbr",[]],["flush-element"],["close-element"],["text","\\n                        "],["append",["unknown",["share_content__qrcode_contents_text__2"]],false],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","viewer-wrap__qrcode__contents__image"],["flush-element"],["text","\\n                      "],["open-element","div",[]],["static-attr","class","viewer-wrap__qrcode__contents__image__frame"],["static-attr","id","QRcode_img_div"],["flush-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                "],["close-element"],["text","\\n          "],["close-element"],["text","\\n        "],["close-element"],["text","\\n      "],["close-element"],["text","\\n    "],["close-element"],["text","\\n    "],["open-element","script",[]],["static-attr","type","text/javascript"],["flush-element"],["text","\\n        $(function(){\\n            // ボタンタップ時、通常のリンク動作はさせない\\n            $(\'.btn\').on(\'click\', function(e){\\n                e.preventDefault();\\n            });\\n            // QR コードのオーバーレイ表示\\n            $(\'#share_qrcode\').on(\'click\', function(){\\n                $(\'#viewer-wrap\').addClass(\'show_qrcode\');\\n            });\\n            // QR コードのオーバーレイを消去\\n            $(\'#qrcode_close\').on(\'click\', function(){\\n                $(\'#viewer-wrap\').addClass(\'hide_qrcode\');\\n            });\\n            // オーバーレイのアニメーション\\n            $(\'#qrcode_wrap\').on(\'animationend webkitAnimationEnd oAnimationEnd mozAnimationEnd\',function(){\\n                if($(\'#viewer-wrap\').is(\'.hide_qrcode\')){\\n                    $(\'#viewer-wrap\').removeClass(\'show_qrcode hide_qrcode\');\\n                }\\n            });\\n\\n            App.CommonUtilController.log(\\"sd埋入环境!\\");\\n\\n            if(App.pdfInfo.get(\\"shareableFlg\\") == 0){\\n                $(\\".viewer-wrap__buttons__share\\").css(\\"visibility\\", \\"hidden\\");\\n            }\\n\\n            // 手机App按钮\\n            $(\\"#app_button\\").on(\\"click\\", function(){\\n                var callAppUrl = App.pdfInfo.get(\\"callAppUrl\\");\\n                if(callAppUrl){\\n                    window.open(callAppUrl);\\n                }\\n            });\\n\\n            // web按钮\\n            $(\\"#browser_button\\").on(\\"click\\", function(){\\n                var contentDetailUrl = App.pdfInfo.get(\\"contentDetailUrl\\");\\n                if(contentDetailUrl){\\n                    window.open(contentDetailUrl);\\n                }\\n            });\\n\\n            // 封面\\n            var url_Prefix = App.pdfInfo.get(\\"url_Prefix\\");\\n            var url_Suffix = App.pdfInfo.get(\\"url_Suffix\\");\\n            var img_src = url_Prefix + \\"cover.png\\" + url_Suffix;\\n\\n            $(\\"#book_cover\\").attr(\\"src\\", img_src);\\n\\n            // 设置Url参数.\\n            var initViewerAttr = App.pdfInfo.get(\\"initViewerAttr\\");\\n            let shareUrl_param = [];\\n            shareUrl_param[0] = App.pageConfig.get(\\"ActiBookOne_Flg\\");\\n            shareUrl_param[1] = App.pdfInfo.get(\\"readType\\");\\n\\n            var contentNum = App.pdfInfo.get(\\"contentNum\\");\\n            var pageno = initViewerAttr[\\"readProgress\\"] || 0;\\n\\n            // faceBook分享\\n            var shareUrl_param_Facebook = shareUrl_param.slice(0);\\n            shareUrl_param_Facebook[2] = App.pageConfig.get(\\"readFrom_Facebook\\");\\n            \\n            let shareUrl_Facebook = App.pdfInfo.get(\\"shareBaseUrl\\") + \\n                                \\"?cNo=\\" + contentNum + \\n                                \\"&param=\\" + BASE64.encoder(shareUrl_param_Facebook.join(\\"_\\")) +\\n                                \\"&siteNum=\\" + App.pdfInfo.get(\'siteNum\') +\\n                                \\"&siteTitle=\\" + App.pdfInfo.get(\'siteTitle\') +\\n                                \\"&pNo=\\" + pageno;\\n            \\n            $(\\"#share_facebook\\").off(\\"click\\");\\n            $(\\"#share_facebook\\").on(\\"click\\", function(event){\\n                event.preventDefault();\\n                window.open(App.pageConfig.get(\\"share_facebook\\") + encodeURIComponent(shareUrl_Facebook), \\"facebook\\");\\n            });\\n            // twitter分享\\n            var shareUrl_param_twitter = shareUrl_param.slice(0);\\n            shareUrl_param_twitter[2] = App.pageConfig.get(\\"readFrom_Twitter\\");\\n            \\n            let shareUrl_twitter = App.pdfInfo.get(\\"shareBaseUrl\\") + \\n                                \\"?cNo=\\" + contentNum + \\n                                \\"&param=\\" + BASE64.encoder(shareUrl_param_twitter.join(\\"_\\")) +\\n                                \\"&siteNum=\\" + App.pdfInfo.get(\'siteNum\') +\\n                                \\"&siteTitle=\\" + App.pdfInfo.get(\'siteTitle\') +\\n                                \\"&pNo=\\" + pageno;\\n\\n            $(\\"#share_twitter\\").off(\\"click\\");\\n            $(\\"#share_twitter\\").on(\\"click\\", function(event){\\n                event.preventDefault();\\n                window.open(App.pageConfig.get(\\"share_twitter\\") + encodeURIComponent(shareUrl_twitter), \\"twitter\\");\\n            });\\n\\n            // LINE分享\\n            var shareUrl_param_LINE = shareUrl_param.slice(0);\\n            shareUrl_param_LINE[2] = App.pageConfig.get(\\"readFrom_LINE\\");\\n            \\n            let shareUrl_LINE = App.pdfInfo.get(\\"shareBaseUrl\\") + \\n                                \\"?cNo=\\" + contentNum + \\n                                \\"&param=\\" + BASE64.encoder(shareUrl_param_LINE.join(\\"_\\")) +\\n                                \\"&siteNum=\\" + App.pdfInfo.get(\'siteNum\') +\\n                                \\"&siteTitle=\\" + App.pdfInfo.get(\'siteTitle\') +\\n                                \\"&pNo=\\" + pageno;\\n\\n            shareUrl_LINE =  App.pageConfig.get(\\"share_LINE\\") + encodeURIComponent(shareUrl_LINE); \\n\\n            $(\\"#share_line\\").off(\\"click\\");\\n            $(\\"#share_line\\").on(\\"click\\", function(event){\\n                event.preventDefault();\\n                window.open(shareUrl_LINE, \\"LINE\\");\\n            });\\n\\n            // QRcode分享\\n            var shareUrl_param_QRcode = shareUrl_param.slice(0);\\n            shareUrl_param_QRcode[2] = App.pageConfig.get(\\"readFrom_QRcode\\");\\n            \\n            let shareUrl_QRcode = App.pdfInfo.get(\\"shareBaseUrl\\") + \\n                                    \\"?cNo=\\" + contentNum + \\n                                    \\"&param=\\" + BASE64.encoder(shareUrl_param_QRcode.join(\\"_\\")) +\\n                                    \\"&siteNum=\\" + App.pdfInfo.get(\'siteNum\') +\\n                                    \\"&siteTitle=\\" + App.pdfInfo.get(\'siteTitle\') +\\n                                    \\"&pNo=\\" + pageno;\\n\\n            // 重新生成二维码.\\n            var qrcode = new QRCode($(\\"#QRcode_img_div\\")[0], {\\n                width : 116,\\n                height : 116,\\n                correctLevel : QRCode.CorrectLevel.L\\n            });\\n\\n            qrcode.makeCode(shareUrl_QRcode);\\n        });\\n    "],["close-element"]],"locals":[],"named":[],"yields":[],"blocks":[],"hasPartials":false}',meta:{moduleName:"one-book/templates/embedded-sd.hbs"}})}),define("one-book/templates/pad",["exports"],function(e){e.default=Ember.HTMLBars.template({id:"abz/f/mt",
block:'{"statements":[["open-element","div",[]],["static-attr","id","index_main"],["static-attr","class","star-pad"],["flush-element"],["text","\\n    "],["open-element","div",[]],["static-attr","id","sidebar_main"],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","id","acti-mobile-menu-content"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","id","acti-header-container"],["flush-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","acti-header-title"],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti_book_title"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["flush-element"],["text","("],["open-element","span",[]],["static-attr","class","acti_book_pageno"],["flush-element"],["close-element"],["text","/"],["append",["unknown",["bookTotalPageNo"]],false],["text",")"],["close-element"],["text","\\n                "],["close-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","acti-menu-close"],["flush-element"],["text","\\n                    "],["open-element","a",[]],["static-attr","id","close_button"],["static-attr","href","#"],["modifier",["action"],[["get",[null]],"closeMenu_mobile_content"]],["flush-element"],["open-element","i",[]],["static-attr","class"," oneviewer oneviewer-sd_menuclose"],["flush-element"],["close-element"],["close-element"],["text","\\n                "],["close-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","acti-menu-buttons"],["flush-element"],["text","\\n                    "],["open-element","div",[]],["flush-element"],["text","\\n                        "],["open-element","a",[]],["static-attr","href","#"],["static-attr","id","acti-mobile-toc-button"],["modifier",["action"],[["get",[null]],"toggleMenu_mobile_content","acti-mobile-toc-content","acti-mobile-toc-button"]],["flush-element"],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-sd_thumbs"],["flush-element"],["close-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n\\n                    "],["open-element","div",[]],["flush-element"],["text","\\n                        "],["open-element","a",[]],["static-attr","href","#"],["static-attr","id","acti-mobile-hamburger-button"],["modifier",["action"],[["get",[null]],"toggleMenu_mobile_content","acti-mobile-hamburger-content","acti-mobile-hamburger-button"]],["flush-element"],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-sd_toc"],["flush-element"],["close-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n\\n                    "],["open-element","div",[]],["flush-element"],["text","\\n                        "],["open-element","a",[]],["static-attr","href","#"],["static-attr","id","acti-mobile-search-button"],["modifier",["action"],[["get",[null]],"toggleMenu_mobile_content","acti-mobile-search-content","acti-mobile-search-button"]],["flush-element"],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-sd_search"],["flush-element"],["close-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n\\n                    "],["open-element","div",[]],["flush-element"],["text","\\n                        "],["open-element","a",[]],["static-attr","href","#"],["static-attr","id","acti-mobile-painter-button"],["modifier",["action"],[["get",[null]],"toggleMenu_mobile_content","acti-mobile-painter-content","acti-mobile-painter-button"]],["flush-element"],["open-element","i",[]],["static-attr","class","acti-mobile-painter-button-icon"],["flush-element"],["close-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n\\n                    "],["open-element","div",[]],["flush-element"],["text","\\n                        "],["open-element","a",[]],["static-attr","href","#"],["static-attr","id","acti-mobile-memo-button"],["modifier",["action"],[["get",[null]],"toggleMenu_mobile_content","acti-mobile-memo-content","acti-mobile-memo-button"]],["flush-element"],["open-element","i",[]],["static-attr","class","acti-mobile-memo-button-icon"],["flush-element"],["close-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n\\n            "],["open-element","div",[]],["static-attr","id","acti-mobile-toc-content"],["static-attr","class","content"],["flush-element"],["text","\\n                "],["open-element","div",[]],["flush-element"],["text","\\n\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n            "],["open-element","div",[]],["static-attr","id","acti-mobile-hamburger-content"],["static-attr","class","content"],["flush-element"],["text","\\n                "],["open-element","div",[]],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","list"],["flush-element"],["text","\\n\\n                    "],["close-element"],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n            "],["open-element","div",[]],["static-attr","id","acti-mobile-search-content"],["static-attr","class","content"],["flush-element"],["text","\\n                "],["open-element","div",[]],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","searchType"],["flush-element"],["text","\\n                        "],["open-element","span",[]],["static-attr","class","choose"],["flush-element"],["text","\\n                            "],["open-element","label",[]],["static-attr","class","radio"],["flush-element"],["text","AND"],["open-element","input",[]],["static-attr","type","radio"],["static-attr","name","radio"],["static-attr","value","1"],["static-attr","id","andRadio"],["static-attr","checked","checked"],["flush-element"],["close-element"],["open-element","i",[]],["flush-element"],["close-element"],["close-element"],["text","\\n                            "],["open-element","label",[]],["static-attr","class","radio"],["flush-element"],["text","OR"],["open-element","input",[]],["static-attr","type","radio"],["static-attr","name","radio"],["static-attr","value","2"],["static-attr","id","orRadio"],["flush-element"],["close-element"],["open-element","i",[]],["flush-element"],["close-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","title"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["flush-element"],["text","\\n                            "],["open-element","form",[]],["static-attr","action",""],["static-attr","method","get"],["static-attr","onkeydown","if(event.keyCode==13){return false;}"],["flush-element"],["text","\\n                                "],["open-element","input",[]],["static-attr","type","search"],["static-attr","class","acti-search-keyword"],["static-attr","id","sidebar_search_input"],["dynamic-attr","placeholder",["concat",[["unknown",["sidewrap__thumbnail__text"]]]]],["static-attr","autocomplete","off"],["flush-element"],["close-element"],["text","\\n                            "],["close-element"],["text","\\n                            "],["open-element","span",[]],["static-attr","id","sidebar_empty_icon"],["flush-element"],["open-element","i",[]],["static-attr","class","acti-icon xiconbasic-cross"],["flush-element"],["close-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n\\n                        "],["open-element","button",[]],["static-attr","class","acti-btn disabled"],["static-attr","id","sidebar_clean_button"],["flush-element"],["text","\\n                            "],["append",["unknown",["sidebar__search_clean_button__text"]],false],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","id","acti_search_resultNum_div"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-search-result"],["flush-element"],["text","\\n                        "],["open-element","ul",[]],["static-attr","id","acti-search-content-view"],["flush-element"],["text","\\n\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n\\n            "],["open-element","div",[]],["static-attr","id","acti-mobile-painter-content"],["static-attr","class","content noselect"],["flush-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-button-box"],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-curve acti-active"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-straightline"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-lineWidth acti-mobile-painter-content-lineWidth-1"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","class","acti-painter-lineWidth-icon"],["flush-element"],["close-element"],["text","\\n                        "],["open-element","i",[]],["static-attr","class","acti-painter-select-icon"],["flush-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-color"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-color-box"],["flush-element"],["text","\\n                            "],["open-element","input",[]],["static-attr","type","color"],["static-attr","class","colorpicker"],["static-attr","value","#ff0000"],["flush-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                        "],["open-element","i",[]],["static-attr","class","acti-painter-select-icon"],["flush-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-back acti-inactive"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-line"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-clear"],["flush-element"],["close-element"],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n\\n            "],["open-element","div",[]],["static-attr","id","acti-mobile-memo-content"],["static-attr","class","content"],["flush-element"],["text","\\n                "],["open-element","div",[]],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","list"],["flush-element"],["text","\\n\\n                    "],["close-element"],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n\\n        "],["close-element"],["text","\\n\\n         "],["open-element","div",[]],["static-attr","class","memo-create-title-box content noselect"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","memo-create-title-box-text"],["flush-element"],["text","\\n                "],["append",["unknown",["mobile_memo_create_text_1"]],false],["text","\\n                "],["open-element","br",[]],["flush-element"],["close-element"],["text","\\n                "],["append",["unknown",["mobile_memo_create_text_2"]],false],["text","\\n            "],["close-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","memo-create-title-box-button"],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"cancelMemoCreateState"],null],null],["flush-element"],["text","\\n                "],["append",["unknown",["mobile_memo_create_button_text"]],false],["text","\\n            "],["close-element"],["text","\\n        "],["close-element"],["text","\\n\\n        "],["open-element","div",[]],["static-attr","class","acti-mobile-menu-button"],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"openMenu_mobile_content"],null],null],["flush-element"],["text","\\n            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-next"],["flush-element"],["close-element"],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","pack_book_div noselect"],["flush-element"],["text","\\n        "],["append",["unknown",["page-main"]],false],["text","\\n    "],["close-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","audioLink noselect"],["flush-element"],["text","\\n        "],["open-element","audio",[]],["static-attr","controls","controls"],["static-attr","id","pageLink_audio_id"],["static-attr","controlsList","nodownload"],["flush-element"],["close-element"],["text","\\n    "],["close-element"],["text","\\n\\n    "],["open-element","div",[]],["static-attr","class","acti-footer-content"],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","acti-goBack-button"],["flush-element"],["text","\\n            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-prev"],["flush-element"],["close-element"],["text","\\n            "],["append",["unknown",["footer__back_button__text"]],false],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"resizeParentSize","in"],null],null],["static-attr","class","resetParentPageSize_button resetParentPageSize_button_in"],["flush-element"],["text","\\n            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-enlargebar_sd_larger"],["flush-element"],["close-element"],["text","\\n            "],["append",["unknown",["footer__larger_button__text"]],false],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"resizeParentSize","out"],null],null],["static-attr","class","resetParentPageSize_button resetParentPageSize_button_out"],["flush-element"],["text","\\n            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-enlargebar_sd_normal"],["flush-element"],["close-element"],["text","\\n            "],["append",["unknown",["footer__normal_button__text"]],false],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n\\n"],["close-element"],["text","\\n\\n"],["open-element","div",[]],["static-attr","id","memo_text_dialog"],["static-attr","class","memo-text-dialog"],["flush-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","memo-text-dialog-button-box"],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","memo-text-dialog-title"],["flush-element"],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","memo-text-dialog-cancel-button"],["flush-element"],["append",["unknown",["mobile_memo_text_dialog_cancel"]],false],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","memo-text-dialog-save-button"],["flush-element"],["append",["unknown",["mobile_memo_text_dialog_save"]],false],["close-element"],["text","\\n    "],["close-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","memo-text-dialog-textarea"],["flush-element"],["text","\\n        "],["open-element","textarea",[]],["static-attr","placeholder",""],["static-attr","tabindex","-1"],["static-attr","maxlength","10000"],["flush-element"],["close-element"],["text","\\n    "],["close-element"],["text","\\n"],["close-element"],["text","\\n\\n"],["open-element","div",[]],["static-attr","id","acti-mobile-share-content"],["static-attr","class","content"],["flush-element"],["text","\\n    "],["open-element","div",[]],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","acti-mobile-share-content-title"],["flush-element"],["text","\\n            "],["append",["unknown",["share_content__title__text"]],false],["text","\\n            "],["open-element","div",[]],["static-attr","class","close_button"],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"hideShareContent"],null],null],["flush-element"],["text","\\n                "],["open-element","i",[]],["static-attr","class","fa fa-times"],["static-attr","aria-hidden","true"],["flush-element"],["close-element"],["text","\\n            "],["close-element"],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","acti-mobile-share-content-buttons"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","share_button_twitter"],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"openTwitter"],null],null],["flush-element"],["text","\\n                "],["open-element","span",[]],["static-attr","class","socicon-twitter"],["flush-element"],["close-element"],["text","\\n            "],["close-element"],["text","\\n            "],["open-element","div",[]],["static-attr","data-icon","true"],["static-attr","id","share_line_div_sd_id"],["flush-element"],["text","\\n                "],["open-element","img",[]],["static-attr","src","./assets/css/img/line_40-20230316190742.png"],["flush-element"],["close-element"],["text","\\n            "],["close-element"],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","acti-mobile-share-content-QR"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","QRcode_img_mobile"],["flush-element"],["text","\\n\\n            "],["close-element"],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","data-clipboard-text",""],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"copy_url"],null],null],["static-attr","class","acti-mobile-share-content-url-button"],["flush-element"],["text","\\n            "],["append",["unknown",["share_content__copy_button__text"]],false],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","acti-mobile-share-content-url-title"],["flush-element"],["text","\\n            "],["append",["unknown",["share_content__content_url_title__text"]],false],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n"],["close-element"],["text","\\n\\n"],["open-element","div",[]],["static-attr","class","progress progress_pad"],["static-attr","id","load_pdf_progress"],["flush-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","progress-bar progress-bar-indicating active"],["flush-element"],["close-element"],["text","\\n"],["close-element"]],"locals":[],"named":[],"yields":[],"blocks":[],"hasPartials":false}',meta:{moduleName:"one-book/templates/pad.hbs"}})}),define("one-book/templates/pc",["exports"],function(e){e.default=Ember.HTMLBars.template({id:"e4DdGADF",
block:'{"statements":[["open-element","div",[]],["static-attr","id","index_main"],["static-attr","class","computer"],["flush-element"],["text","\\n    "],["open-element","div",[]],["static-attr","id","sidebar_main"],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","acti-sideblock"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","acti-opener noselect"],["modifier",["action"],[["get",[null]],"unfold_toggle_sidebar"]],["flush-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","acti-opener_button"],["flush-element"],["text","\\n                    "],["open-element","i",[]],["static-attr","class","xiconbasic-lists"],["flush-element"],["close-element"],["text","\\n                "],["close-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","acti-opener_shadow"],["flush-element"],["close-element"],["text","\\n            "],["close-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","acti-sidewrap-inner acti-not-hamburger"],["flush-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","acti-sidewrap_border"],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-sidebar_toggle_button noselect"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","id","acti-sidebar-toc-button"],["static-attr","class","toggle_button_left toggle_button_selected"],["static-attr","style","width: 85px;"],["modifier",["action"],[["get",[null]],"toggle_sidebar_content","acti-sidebar-toc-button"]],["flush-element"],["text","\\n                            "],["append",["unknown",["sidewrap__thumbnail__text"]],false],["text","\\n                        "],["close-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","id","acti-sidebar-hamburger-button"],["static-attr","class",""],["static-attr","style","width: 54px;"],["modifier",["action"],[["get",[null]],"toggle_sidebar_content","acti-sidebar-hamburger-button"]],["flush-element"],["text","\\n                            "],["append",["unknown",["sidewrap__contents__text"]],false],["text","\\n                        "],["close-element"],["text","\\n"],["text","                        "],["open-element","div",[]],["static-attr","id","acti-sidebar-mome-button"],["static-attr","class","toggle_button_right memo-left-nav-btn"],["modifier",["action"],[["get",[null]],"toggle_sidebar_content","acti-sidebar-mome-button"]],["flush-element"],["text","\\n                            "],["append",["unknown",["sidewrap__mome__text"]],false],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","id","acti-sidebar-toc-content"],["static-attr","class","content_div f_s_0"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","id","acti-sidebar-hamburger-content"],["static-attr","class","content_div"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","id","acti-sidebar-mome-content"],["static-attr","class","content_div"],["flush-element"],["close-element"],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","right_border"],["flush-element"],["close-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","top_border"],["flush-element"],["close-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","bottom_border"],["flush-element"],["close-element"],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","pack_book_div noselect"],["flush-element"],["text","\\n        "],["append",["unknown",["page-main"]],false],["text","\\n\\n        "],["open-element","div",[]],["static-attr","class","audioLink noselect"],["flush-element"],["text","\\n            "],["open-element","audio",[]],["static-attr","controls","controls"],["static-attr","id","pageLink_audio_id"],["static-attr","controlsList","nodownload"],["flush-element"],["close-element"],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n    "],["open-element","div",[]],["static-attr","id","toolbar_main"],["static-attr","class","noselect"],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","id","bottom_sidebar_main"],["flush-element"],["text","\\n            "],["open-element","table",[]],["static-attr","cellspacing","0"],["static-attr","cellpadding","0"],["flush-element"],["text","\\n                "],["open-element","tr",[]],["flush-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w395px search_main"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","class","searchType"],["flush-element"],["text","\\n                            "],["open-element","span",[]],["static-attr","class","choose"],["flush-element"],["text","\\n                                "],["open-element","label",[]],["static-attr","class","radio"],["flush-element"],["text","AND"],["open-element","input",[]],["static-attr","type","radio"],["static-attr","name","radio"],["static-attr","value","1"],["static-attr","id","andRadio"],["static-attr","checked","true"],["flush-element"],["close-element"],["open-element","i",[]],["flush-element"],["close-element"],["close-element"],["text","\\n                                "],["open-element","label",[]],["static-attr","class","radio"],["flush-element"],["text","OR"],["open-element","input",[]],["static-attr","type","radio"],["static-attr","name","radio"],["static-attr","value","2"],["static-attr","id","orRadio"],["flush-element"],["close-element"],["open-element","i",[]],["flush-element"],["close-element"],["close-element"],["text","\\n                            "],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                        "],["open-element","form",[]],["static-attr","action",""],["static-attr","method","get"],["static-attr","onkeydown","if(event.keyCode==13){return false;}"],["static-attr","class","keywordForm"],["flush-element"],["text","\\n                            "],["open-element","input",[]],["static-attr","type","text"],["static-attr","class","search-keyword"],["static-attr","autocomplete","off"],["static-attr","id","sidebar_search_input"],["dynamic-attr","placeholder",["concat",[["unknown",["toolbar__search__placeholder"]]]]],["flush-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                        "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-search"],["modifier",["action"],[["get",[null]],"clickSearch"]],["flush-element"],["close-element"],["text","\\n                        "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-times-circle"],["static-attr","id","sidebar_circle_button"],["flush-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w42px toolbar_space"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w45px"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","class","toolbar_button active toolbar-first"],["modifier",["action"],[["get",[null]],"gotoPageByTarget","first"]],["flush-element"],["text","\\n                            "],["open-element","div",[]],["static-attr","class","tooltips_top"],["flush-element"],["close-element"],["text","\\n                            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-first"],["flush-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w45px"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","class","toolbar_button active toolbar-previous"],["modifier",["action"],[["get",[null]],"gotoPageByTarget","previous"]],["flush-element"],["text","\\n                            "],["open-element","div",[]],["static-attr","class","tooltips_top"],["flush-element"],["close-element"],["text","\\n                            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-prev"],["flush-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w45px"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","class","toolbar_button active toolbar-next"],["modifier",["action"],[["get",[null]],"gotoPageByTarget","next"]],["flush-element"],["text","\\n                            "],["open-element","div",[]],["static-attr","class","tooltips_top"],["flush-element"],["close-element"],["text","\\n                            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-next"],["flush-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w45px"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","class","toolbar_button active toolbar-last"],["modifier",["action"],[["get",[null]],"gotoPageByTarget","last"]],["flush-element"],["text","\\n                            "],["open-element","div",[]],["static-attr","class","tooltips_top"],["flush-element"],["close-element"],["text","\\n                            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-last"],["flush-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w45px"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","id","sidebar_zoom_in"],["static-attr","data-type","in"],["static-attr","class","toolbar_button zoom-button"],["flush-element"],["text","\\n                            "],["open-element","div",[]],["static-attr","class","tooltips_top"],["flush-element"],["append",["unknown",["toolbar__zoom_in__text"]],false],["close-element"],["text","\\n                            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-magnifier"],["flush-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w45px"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","id","sidebar_zoom_out"],["static-attr","data-type","out"],["static-attr","class","toolbar_button zoom-button"],["flush-element"],["text","\\n                            "],["open-element","div",[]],["static-attr","class","tooltips_top"],["flush-element"],["append",["unknown",["toolbar__zoom_out__text"]],false],["close-element"],["text","\\n                            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-minifier"],["flush-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w45px"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","id","sidebar_pen"],["static-attr","data-type","out"],["static-attr","class","toolbar_button"],["modifier",["action"],[["get",[null]],"showPenDialog"]],["flush-element"],["text","\\n                            "],["open-element","div",[]],["static-attr","class","tooltips_top"],["flush-element"],["append",["unknown",["toolbar__pen__text"]],false],["close-element"],["text","\\n                            "],["open-element","i",[]],["flush-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w45px"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","id","sidebar_memo"],["static-attr","data-type","out"],["static-attr","class","toolbar_button"],["modifier",["action"],[["get",[null]],"showMemoDialog"]],["flush-element"],["text","\\n                            "],["open-element","div",[]],["static-attr","class","tooltips_top"],["flush-element"],["append",["unknown",["toolbar__memo__text"]],false],["close-element"],["text","\\n                            "],["open-element","i",[]],["flush-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w45px"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","id","sidebar_cut"],["static-attr","data-type","out"],["static-attr","class","toolbar_button"],["modifier",["action"],[["get",[null]],"showCutDialog"]],["flush-element"],["text","\\n                            "],["open-element","div",[]],["static-attr","class","tooltips_top"],["flush-element"],["append",["unknown",["toolbar__cut__text"]],false],["close-element"],["text","\\n                            "],["open-element","i",[]],["flush-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w16px toolbar_space"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w160px"],["flush-element"],["text","\\n                        "],["open-element","form",[]],["static-attr","action",""],["static-attr","method","get"],["static-attr","onkeydown","if(event.keyCode==13){return false;}"],["flush-element"],["text","\\n                            "],["open-element","input",[]],["static-attr","type","tel"],["static-attr","class","goto-input"],["static-attr","id","goto_page_input"],["static-attr","autocomplete","off"],["flush-element"],["close-element"],["text","\\n                            "],["open-element","span",[]],["static-attr","class","spacing_sign"],["flush-element"],["text","/"],["close-element"],["text","\\n                            "],["open-element","span",[]],["static-attr","class","toolbar_pageCount"],["flush-element"],["text"," "],["append",["unknown",["bookTotalPageNo"]],false],["text"," "],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w45px acti_noContentInfo_hide"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","td",[]],["static-attr","class","w45px acti_noContentInfo_hide"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","class","toolbar_button sidebar_print"],["modifier",["action"],[["get",[null]],"showPrintDialog"]],["flush-element"],["text","\\n                            "],["open-element","div",[]],["static-attr","class","tooltips_top"],["flush-element"],["append",["unknown",["toolbar__print__text"]],false],["close-element"],["text","\\n                            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-printer"],["flush-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n        "],["close-element"],["text","\\n\\n        "],["open-element","div",[]],["static-attr","id","fullScreen_extend_out"],["modifier",["action"],[["get",[null]],"fullScreenFun_extend","out"]],["flush-element"],["text","\\n            "],["open-element","div",[]],["flush-element"],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-viewer_right_minimize"],["flush-element"],["close-element"],["close-element"],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n\\n    "],["open-element","div",[]],["static-attr","id","right_sidebar_main"],["static-attr","class","noselect"],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","sidebar_share"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","sidebar-button"],["static-attr","id","sidebar_QR_code_button"],["modifier",["action"],[["get",[null]],"showSharedialog"]],["flush-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","tooltips_left"],["flush-element"],["append",["unknown",["right_sidebar__share__text"]],false],["close-element"],["text","\\n                "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-viewer_right_share"],["flush-element"],["close-element"],["text","\\n            "],["close-element"],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","sidebar_other_buttons"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","sidebar_other_buttons_position"],["flush-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","sidebar-button appdownload"],["flush-element"],["text","\\n                    "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-viewer_right_app"],["flush-element"],["close-element"],["text","\\n                "],["close-element"],["text","\\n\\n                "],["open-element","div",[]],["static-attr","class","sidebar-button"],["static-attr","data-full_screen","0"],["static-attr","id","sidebar_full_srceen"],["modifier",["action"],[["get",[null]],"fullScreenFun"]],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","tooltips_left"],["flush-element"],["append",["unknown",["right_sidebar__full_srceen__text"]],false],["close-element"],["text","\\n                    "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-viewer_right_maximize"],["flush-element"],["close-element"],["text","\\n                "],["close-element"],["text","\\n\\n                "],["open-element","div",[]],["static-attr","class","sidebar-button printer_button"],["modifier",["action"],[["get",[null]],"showPrintDialog"]],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","tooltips_left"],["flush-element"],["append",["unknown",["right_sidebar__print__text"]],false],["close-element"],["text","\\n                    "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-viewer_right_printer"],["flush-element"],["close-element"],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n"],["close-element"],["text","\\n\\n"],["open-element","div",[]],["static-attr","id","search_dialog"],["flush-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","search_title"],["flush-element"],["text","\\n        "],["open-element","span",[]],["flush-element"],["text","「"],["close-element"],["text","\\n        "],["open-element","span",[]],["static-attr","id","acti_search_value"],["flush-element"],["close-element"],["text","\\n        "],["open-element","span",[]],["flush-element"],["text","」"],["close-element"],["text","\\n        "],["open-element","span",[]],["static-attr","id","acti_search_resultNum_div"],["static-attr","class","acti_search_resultNum"],["flush-element"],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","close_button"],["modifier",["action"],[["get",[null]],"hideSearchDialog"]],["flush-element"],["text","\\n            "],["open-element","i",[]],["static-attr","class","fa fa-times"],["static-attr","aria-hidden","true"],["flush-element"],["close-element"],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n\\n    "],["open-element","div",[]],["static-attr","class","search_content"],["static-attr","id","acti-sidebar-search-content-list"],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","acti-search-content"],["flush-element"],["text","\\n            "],["open-element","ul",[]],["static-attr","id","acti-search-content-view"],["flush-element"],["text","\\n\\n            "],["close-element"],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n"],["close-element"],["text","\\n\\n"],["open-element","div",[]],["static-attr","id","share_dialog"],["flush-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","share_title"],["flush-element"],["text","\\n        "],["append",["unknown",["share_dialog__title__text"]],false],["text","\\n        "],["open-element","div",[]],["static-attr","class","close_button"],["modifier",["action"],[["get",[null]],"hideShareDialog"]],["flush-element"],["text","\\n            "],["open-element","i",[]],["static-attr","class","fa fa-times"],["static-attr","aria-hidden","true"],["flush-element"],["close-element"],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n\\n    "],["open-element","div",[]],["static-attr","class","share_buttons"],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","share_button share_button_twitter"],["static-attr","title","Twitter"],["flush-element"],["text","\\n            "],["open-element","span",[]],["static-attr","class","socicon-twitter"],["flush-element"],["close-element"],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","share_button"],["static-attr","data-icon","true"],["static-attr","id","share_line_div_id"],["static-attr","title","このページの情報をLINEでシェアできます。"],["flush-element"],["text","\\n            "],["open-element","img",[]],["static-attr","src","./assets/css/img/line_60-20230316190742.png"],["static-attr","width","30"],["static-attr","height","30"],["flush-element"],["close-element"],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","share_url"],["flush-element"],["text","\\n        "],["open-element","input",[]],["static-attr","type","text"],["static-attr","readonly","readonly"],["static-attr","value",""],["flush-element"],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","copy_button"],["static-attr","data-clipboard-text",""],["flush-element"],["append",["unknown",["share_dialog__copy_button__text"]],false],["close-element"],["text","\\n    "],["close-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","share_QRcode QRcode_img"],["flush-element"],["text","\\n\\n    "],["close-element"],["text","\\n"],["close-element"],["text","\\n\\n"],["open-element","div",[]],["static-attr","id","embed_share_dialog"],["flush-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","share_title"],["flush-element"],["text","\\n        "],["append",["unknown",["embed_share_dialog__title__text"]],false],["text","\\n        "],["open-element","div",[]],["static-attr","class","close_button"],["modifier",["action"],[["get",[null]],"embedHideShareDialog"]],["flush-element"],["text","\\n            "],["open-element","i",[]],["static-attr","class","fa fa-times"],["static-attr","aria-hidden","true"],["flush-element"],["close-element"],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n\\n    "],["open-element","div",[]],["static-attr","class","share_buttons"],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","share_button share_button_twitter"],["static-attr","title","Twitter"],["flush-element"],["text","\\n            "],["open-element","span",[]],["static-attr","class","socicon-twitter"],["flush-element"],["close-element"],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","share_button"],["static-attr","data-icon","true"],["static-attr","id","share_line_div_id"],["flush-element"],["text","\\n            "],["open-element","img",[]],["static-attr","src","assets/css/img/line_60-20230316190742.png"],["static-attr","width","30"],["static-attr","height","30"],["flush-element"],["close-element"],["text","\\n        "],["close-element"],["text","\\n\\n        "],["open-element","div",[]],["static-attr","class","share_url"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","copy_button"],["static-attr","data-clipboard-text",""],["flush-element"],["append",["unknown",["embed_share_dialog__copy_button__text"]],false],["close-element"],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n\\n    "],["open-element","div",[]],["static-attr","class","share_QRcode QRcode_img"],["flush-element"],["text","\\n\\n    "],["close-element"],["text","\\n"],["close-element"],["text","\\n\\n"],["open-element","div",[]],["static-attr","class","progress"],["static-attr","id","load_pdf_progress"],["flush-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","progress-bar progress-bar-indicating active"],["flush-element"],["close-element"],["text","\\n"],["close-element"],["text","\\n"]],"locals":[],"named":[],"yields":[],"blocks":[],"hasPartials":false}',meta:{moduleName:"one-book/templates/pc.hbs"}})}),define("one-book/templates/sd",["exports"],function(e){e.default=Ember.HTMLBars.template({id:"6MtY902O",
block:'{"statements":[["open-element","div",[]],["static-attr","id","index_main"],["static-attr","class","phone"],["flush-element"],["text","\\n    "],["open-element","div",[]],["static-attr","id","sidebar_main"],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","id","acti-mobile-menu-content"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","id","acti-header-container"],["flush-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","acti-header-title"],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti_book_title"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["flush-element"],["text","("],["open-element","span",[]],["static-attr","class","acti_book_pageno"],["flush-element"],["close-element"],["text","/"],["append",["unknown",["bookTotalPageNo"]],false],["text",")"],["close-element"],["text","\\n                "],["close-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","acti-menu-close"],["flush-element"],["text","\\n                    "],["open-element","a",[]],["static-attr","id","close_button"],["static-attr","href","#"],["modifier",["action"],[["get",[null]],"closeMenu_mobile_content"]],["flush-element"],["open-element","i",[]],["static-attr","class"," oneviewer oneviewer-sd_menuclose"],["flush-element"],["close-element"],["close-element"],["text","\\n                "],["close-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","acti-menu-buttons"],["flush-element"],["text","\\n                    "],["open-element","div",[]],["flush-element"],["text","\\n                        "],["open-element","a",[]],["static-attr","href","#"],["static-attr","id","acti-mobile-toc-button"],["modifier",["action"],[["get",[null]],"toggleMenu_mobile_content","acti-mobile-toc-content","acti-mobile-toc-button"]],["flush-element"],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-sd_thumbs"],["flush-element"],["close-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n\\n                    "],["open-element","div",[]],["flush-element"],["text","\\n                        "],["open-element","a",[]],["static-attr","href","#"],["static-attr","id","acti-mobile-hamburger-button"],["modifier",["action"],[["get",[null]],"toggleMenu_mobile_content","acti-mobile-hamburger-content","acti-mobile-hamburger-button"]],["flush-element"],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-sd_toc"],["flush-element"],["close-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n\\n                    "],["open-element","div",[]],["flush-element"],["text","\\n                        "],["open-element","a",[]],["static-attr","href","#"],["static-attr","id","acti-mobile-search-button"],["modifier",["action"],[["get",[null]],"toggleMenu_mobile_content","acti-mobile-search-content","acti-mobile-search-button"]],["flush-element"],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-sd_search"],["flush-element"],["close-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n\\n                    "],["open-element","div",[]],["flush-element"],["text","\\n                        "],["open-element","a",[]],["static-attr","href","#"],["static-attr","id","acti-mobile-painter-button"],["modifier",["action"],[["get",[null]],"toggleMenu_mobile_content","acti-mobile-painter-content","acti-mobile-painter-button"]],["flush-element"],["open-element","i",[]],["static-attr","class","acti-mobile-painter-button-icon"],["flush-element"],["close-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n\\n                    "],["open-element","div",[]],["flush-element"],["text","\\n                        "],["open-element","a",[]],["static-attr","href","#"],["static-attr","id","acti-mobile-memo-button"],["modifier",["action"],[["get",[null]],"toggleMenu_mobile_content","acti-mobile-memo-content","acti-mobile-memo-button"]],["flush-element"],["open-element","i",[]],["static-attr","class","acti-mobile-memo-button-icon"],["flush-element"],["close-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n\\n            "],["open-element","div",[]],["static-attr","id","acti-mobile-toc-content"],["static-attr","class","content"],["flush-element"],["text","\\n                "],["open-element","div",[]],["flush-element"],["text","\\n\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n            "],["open-element","div",[]],["static-attr","id","acti-mobile-hamburger-content"],["static-attr","class","content "],["flush-element"],["text","\\n                "],["open-element","div",[]],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","list"],["flush-element"],["text","\\n\\n                    "],["close-element"],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n            "],["open-element","div",[]],["static-attr","id","acti-mobile-search-content"],["static-attr","class","content"],["flush-element"],["text","\\n                "],["open-element","div",[]],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","searchType"],["flush-element"],["text","\\n                        "],["open-element","span",[]],["static-attr","class","choose"],["flush-element"],["text","\\n                            "],["open-element","label",[]],["static-attr","class","radio"],["flush-element"],["text","AND"],["open-element","input",[]],["static-attr","type","radio"],["static-attr","name","radio"],["static-attr","value","1"],["static-attr","id","andRadio"],["static-attr","checked","checked"],["flush-element"],["close-element"],["open-element","i",[]],["flush-element"],["close-element"],["close-element"],["text","\\n                            "],["open-element","label",[]],["static-attr","class","radio"],["flush-element"],["text","OR"],["open-element","input",[]],["static-attr","type","radio"],["static-attr","name","radio"],["static-attr","value","2"],["static-attr","id","orRadio"],["flush-element"],["close-element"],["open-element","i",[]],["flush-element"],["close-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","title"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["flush-element"],["text","\\n                            "],["open-element","form",[]],["static-attr","action",""],["static-attr","method","get"],["static-attr","onkeydown","if(event.keyCode==13){return false;}"],["flush-element"],["text","\\n                                "],["open-element","input",[]],["static-attr","type","search"],["static-attr","class","acti-search-keyword"],["static-attr","id","sidebar_search_input"],["dynamic-attr","placeholder",["concat",[["unknown",["sidewrap__thumbnail__text"]]]]],["static-attr","autocomplete","off"],["flush-element"],["close-element"],["text","\\n                            "],["close-element"],["text","\\n                            "],["open-element","span",[]],["static-attr","id","sidebar_empty_icon"],["flush-element"],["open-element","i",[]],["static-attr","class","acti-icon xiconbasic-cross"],["flush-element"],["close-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n\\n                        "],["open-element","button",[]],["static-attr","class","acti-btn disabled"],["static-attr","id","sidebar_clean_button"],["flush-element"],["text","\\n                            "],["append",["unknown",["sidebar__search_clean_button__text"]],false],["text","\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","id","acti_search_resultNum_div"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-search-result"],["flush-element"],["text","\\n                        "],["open-element","ul",[]],["static-attr","id","acti-search-content-view"],["flush-element"],["text","\\n\\n                        "],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n\\n            "],["open-element","div",[]],["static-attr","id","acti-mobile-painter-content"],["static-attr","class","content noselect"],["flush-element"],["text","\\n                "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-button-box"],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-curve acti-active"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-straightline"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-lineWidth acti-mobile-painter-content-lineWidth-1"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","class","acti-painter-lineWidth-icon"],["flush-element"],["close-element"],["text","\\n                        "],["open-element","i",[]],["static-attr","class","acti-painter-select-icon"],["flush-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-color"],["flush-element"],["text","\\n                        "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-color-box"],["flush-element"],["text","\\n                            "],["open-element","input",[]],["static-attr","type","color"],["static-attr","class","colorpicker"],["static-attr","value","#ff0000"],["flush-element"],["close-element"],["text","\\n                        "],["close-element"],["text","\\n                        "],["open-element","i",[]],["static-attr","class","acti-painter-select-icon"],["flush-element"],["close-element"],["text","\\n                    "],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-back acti-inactive"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-line"],["flush-element"],["close-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","acti-mobile-painter-content-clear"],["flush-element"],["close-element"],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n\\n            "],["open-element","div",[]],["static-attr","id","acti-mobile-memo-content"],["static-attr","class","content"],["flush-element"],["text","\\n                "],["open-element","div",[]],["flush-element"],["text","\\n                    "],["open-element","div",[]],["static-attr","class","list"],["flush-element"],["text","\\n\\n                    "],["close-element"],["text","\\n                "],["close-element"],["text","\\n            "],["close-element"],["text","\\n\\n        "],["close-element"],["text","\\n\\n        "],["open-element","div",[]],["static-attr","class","memo-create-title-box content noselect"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","memo-create-title-box-text"],["flush-element"],["text","\\n                "],["append",["unknown",["mobile_memo_create_text_1"]],false],["text","\\n                "],["open-element","br",[]],["flush-element"],["close-element"],["text","\\n                "],["append",["unknown",["mobile_memo_create_text_2"]],false],["text","\\n            "],["close-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","memo-create-title-box-button"],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"cancelMemoCreateState"],null],null],["flush-element"],["text","\\n                "],["append",["unknown",["mobile_memo_create_button_text"]],false],["text","\\n            "],["close-element"],["text","\\n        "],["close-element"],["text","\\n\\n        "],["open-element","div",[]],["static-attr","class","acti-mobile-menu-button"],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"openMenu_mobile_content"],null],null],["flush-element"],["text","\\n            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-next"],["flush-element"],["close-element"],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","pack_book_div noselect"],["flush-element"],["text","\\n        "],["append",["unknown",["page-main"]],false],["text","\\n    "],["close-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","audioLink noselect"],["flush-element"],["text","\\n        "],["open-element","audio",[]],["static-attr","controls","controls"],["static-attr","id","pageLink_audio_id"],["static-attr","controlsList","nodownload"],["flush-element"],["close-element"],["text","\\n    "],["close-element"],["text","\\n\\n    "],["open-element","div",[]],["static-attr","class","acti-footer-content"],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","acti-goBack-button"],["flush-element"],["text","\\n            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-prev"],["flush-element"],["close-element"],["text","\\n            "],["append",["unknown",["footer__back_button__text"]],false],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"resizeParentSize","in"],null],null],["static-attr","class","resetParentPageSize_button resetParentPageSize_button_in"],["flush-element"],["text","\\n            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-enlargebar_sd_larger"],["flush-element"],["close-element"],["text","\\n            "],["append",["unknown",["footer__larger_button__text"]],false],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"resizeParentSize","out"],null],null],["static-attr","class","resetParentPageSize_button resetParentPageSize_button_out"],["flush-element"],["text","\\n            "],["open-element","i",[]],["static-attr","class","oneviewer oneviewer-enlargebar_sd_normal"],["flush-element"],["close-element"],["text","\\n            "],["append",["unknown",["footer__normal_button__text"]],false],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n\\n"],["close-element"],["text","\\n\\n"],["open-element","div",[]],["static-attr","id","memo_text_dialog"],["static-attr","class","memo-text-dialog"],["flush-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","memo-text-dialog-button-box"],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","memo-text-dialog-title"],["flush-element"],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","memo-text-dialog-cancel-button"],["flush-element"],["append",["unknown",["mobile_memo_text_dialog_cancel"]],false],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","memo-text-dialog-save-button"],["flush-element"],["append",["unknown",["mobile_memo_text_dialog_save"]],false],["close-element"],["text","\\n    "],["close-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","memo-text-dialog-textarea"],["flush-element"],["text","\\n        "],["open-element","textarea",[]],["static-attr","placeholder",""],["static-attr","tabindex","-1"],["static-attr","maxlength","10000"],["flush-element"],["close-element"],["text","\\n    "],["close-element"],["text","\\n"],["close-element"],["text","\\n\\n"],["open-element","div",[]],["static-attr","id","acti-mobile-share-content"],["static-attr","class","content"],["flush-element"],["text","\\n    "],["open-element","div",[]],["flush-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","acti-mobile-share-content-title"],["flush-element"],["text","\\n            "],["append",["unknown",["share_content__title__text"]],false],["text","\\n            "],["open-element","div",[]],["static-attr","class","close_button"],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"hideShareContent"],null],null],["flush-element"],["text","\\n                "],["open-element","i",[]],["static-attr","class","fa fa-times"],["static-attr","aria-hidden","true"],["flush-element"],["close-element"],["text","\\n            "],["close-element"],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","acti-mobile-share-content-buttons"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","share_button_twitter"],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"openTwitter"],null],null],["flush-element"],["text","\\n                "],["open-element","span",[]],["static-attr","class","socicon-twitter"],["flush-element"],["close-element"],["text","\\n            "],["close-element"],["text","\\n            "],["open-element","div",[]],["static-attr","data-icon","true"],["static-attr","id","share_line_div_sd_id"],["flush-element"],["text","\\n                "],["open-element","img",[]],["static-attr","src","./assets/css/img/line_40-20230316190742.png"],["flush-element"],["close-element"],["text","\\n            "],["close-element"],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","acti-mobile-share-content-QR-sd"],["flush-element"],["text","\\n            "],["open-element","div",[]],["static-attr","class","QRcode_img_mobile_sd"],["flush-element"],["text","\\n\\n            "],["close-element"],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","data-clipboard-text",""],["dynamic-attr","onclick",["helper",["action"],[["get",[null]],"copy_url"],null],null],["static-attr","class","acti-mobile-share-content-url-button"],["flush-element"],["text","\\n            "],["append",["unknown",["share_content__copy_button__text"]],false],["text","\\n        "],["close-element"],["text","\\n        "],["open-element","div",[]],["static-attr","class","acti-mobile-share-content-url-title"],["flush-element"],["text","\\n            "],["append",["unknown",["share_content__content_url_title__text"]],false],["text","\\n        "],["close-element"],["text","\\n    "],["close-element"],["text","\\n"],["close-element"],["text","\\n\\n"],["open-element","div",[]],["static-attr","class","progress progress_sd"],["static-attr","id","load_pdf_progress"],["flush-element"],["text","\\n    "],["open-element","div",[]],["static-attr","class","progress-bar progress-bar-indicating active"],["flush-element"],["close-element"],["text","\\n"],["close-element"]],"locals":[],"named":[],"yields":[],"blocks":[],"hasPartials":false}',meta:{moduleName:"one-book/templates/sd.hbs"}})}),define("one-book/config/environment",["ember"],function(e){try{var t="one-book/config/environment",n=document.querySelector('meta[name="'+t+'"]').getAttribute("content"),i=JSON.parse(unescape(n)),o={default:i};return Object.defineProperty(o,"__esModule",{value:!0}),o}catch(e){throw new Error('Could not read config from meta tag with name "'+t+'".')}}),runningTests||require("one-book/app").default.create({name:"one-book",version:"0.0.0+"});